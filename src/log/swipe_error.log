2025-06-04 15:25:58.823 | ERROR    |  -  | [Errno 48] error while attempting to bind on address ('127.0.0.1', 8000): address already in use
2025-06-04 21:13:07.853 | ERROR    |  e2d4c890f9d1494c8d509bc9c79269d5  | Exception in ASGI application

  + Exception Group Traceback (most recent call last):
  |
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                │     │                      └ <anyio._backends._asyncio.TaskGroup object at 0x1062bca50>
  |                │     └ <function create_task_group at 0x101f82fc0>
  |                └ <module 'anyio' from '/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/anyio/__init__.py'>
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  |
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |           │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x1062cb1a0>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1060b67...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.cors.CORSMiddleware object at 0x1060d8050>
    |           └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x1060d81a0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    |     await self.simple_response(scope, receive, send, request_headers=headers)
    |           │    │               │      │        │                     └ Headers({'host': '127.0.0.1:8080', 'connection': 'keep-alive', 'content-length': '33', 'sec-ch-ua-platform': '"macOS"', 'auth...
    |           │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x1062cb1a0>
    |           │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1060b67...
    |           │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <function CORSMiddleware.simple_response at 0x10354e020>
    |           └ <starlette.middleware.cors.CORSMiddleware object at 0x1060d8050>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x1060d8050>>, sen...
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1060b67...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x105f67cb0>, header_name='X-Request-I...
    |           └ <starlette.middleware.cors.CORSMiddleware object at 0x1060d8050>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/asgi_correlation_id/middleware.py", line 90, in __call__
    |     await self.app(scope, receive, handle_outgoing_request)
    |           │    │   │      │        └ <function CorrelationIdMiddleware.__call__.<locals>.handle_outgoing_request at 0x106716d40>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1060b67...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <src.middleware.state_middleware.StateMiddleware object at 0x105f67cb0>
    |           └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x105f67cb0>, header_name='X-Request-I...
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |          │            │            └ <function collapse_excgroups at 0x10334da80>
    |          │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
    |          └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
    |   File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 162, in __exit__
    |     self.gen.throw(value)
    |     │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [MissingGreenlet("greenlet_spawn has not been called; can't call await_only...
    |     │    │   └ <method 'throw' of 'generator' objects>
    |     │    └ <generator object collapse_excgroups at 0x106719f20>
    |     └ <contextlib._GeneratorContextManager object at 0x1067bf1c0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                      │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x106717560>
    |                      │    │             └ <starlette.middleware.base._CachedRequest object at 0x1062b7df0>
    |                      │    └ <bound method StateMiddleware.dispatch of <src.middleware.state_middleware.StateMiddleware object at 0x105f67cb0>>
    |                      └ <src.middleware.state_middleware.StateMiddleware object at 0x105f67cb0>
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/src/middleware/state_middleware.py", line 24, in dispatch
    |     response = await call_next(request)
    |                      │         └ <starlette.middleware.base._CachedRequest object at 0x1062b7df0>
    |                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x106717560>
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 156, in call_next
    |     raise app_exc
    |           └ MissingGreenlet("greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place?")
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |           │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x1067cf920>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1067cfba0>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x105f67b60>
    |           └ <src.middleware.state_middleware.StateMiddleware object at 0x105f67cb0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/authentication.py", line 48, in __call__
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x1067cf920>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1067cfba0>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x105f67a10>
    |           └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x105f67b60>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |           │                            │    │    │     │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x1067cf920>
    |           │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1067cfba0>
    |           │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │                            │    │    └ <starlette.requests.Request object at 0x106254a10>
    |           │                            │    └ <fastapi.routing.APIRouter object at 0x105ff2550>
    |           │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x105f67a10>
    |           └ <function wrap_app_handling_exceptions at 0x1033e0180>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |           │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1062caca0>
    |           │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1067cfba0>
    |           │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           └ <fastapi.routing.APIRouter object at 0x105ff2550>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |           │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1062caca0>
    |           │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1067cfba0>
    |           │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x105ff2550>>
    |           └ <fastapi.routing.APIRouter object at 0x105ff2550>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |           │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1062caca0>
    |           │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1067cfba0>
    |           │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │     └ <function Route.handle at 0x1033e18a0>
    |           └ APIRoute(path='/api/v1/user/cards', name='set_cards', methods=['POST'])
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1062caca0>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1067cfba0>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <function request_response.<locals>.app at 0x10601ef20>
    |           └ APIRoute(path='/api/v1/user/cards', name='set_cards', methods=['POST'])
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |           │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1062caca0>
    |           │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1067cfba0>
    |           │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │                            │    └ <starlette.requests.Request object at 0x10627fb90>
    |           │                            └ <function request_response.<locals>.app.<locals>.app at 0x106814ea0>
    |           └ <function wrap_app_handling_exceptions at 0x1033e0180>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |           │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1068154e0>
    |           │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1067cfba0>
    |           │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           └ <function request_response.<locals>.app.<locals>.app at 0x106814ea0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    |     response = await f(request)
    |                      │ └ <starlette.requests.Request object at 0x10627fb90>
    |                      └ <function get_request_handler.<locals>.app at 0x10601ee80>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                          └ <function run_endpoint_function at 0x1033c7920>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |                  │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x10679ab10>, 'obj': AssignCardRequest(card_ids=[6, 5, 4]), 're...
    |                  │         └ <function set_cards at 0x105f61c60>
    |                  └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/src/backend/user/routes.py", line 24, in set_cards
    |     await user_service.assign_cards(db, request, obj)
    |           │            │            │   │        └ AssignCardRequest(card_ids=[6, 5, 4])
    |           │            │            │   └ <starlette.requests.Request object at 0x10627fb90>
    |           │            │            └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x10679ab10>
    |           │            └ <function UserService.assign_cards at 0x105f618a0>
    |           └ <src.backend.user.service.UserService object at 0x105f64ad0>
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/src/backend/user/service.py", line 83, in assign_cards
    |     raise e
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/src/backend/user/service.py", line 72, in assign_cards
    |     current_card_ids = {card.id for card in user.cards}
    |                                             │    └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x105edae80>
    |                                             └ <unprintable User object>
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/orm/attributes.py", line 566, in __get__
    |     return self.impl.get(state, dict_)  # type: ignore[no-any-return]
    |            │    │        │      └ {'_sa_instance_state': <sqlalchemy.orm.state.InstanceState object at 0x1068415b0>}
    |            │    │        └ <sqlalchemy.orm.state.InstanceState object at 0x1068415b0>
    |            │    └ <member 'impl' of 'QueryableAttribute' objects>
    |            └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x105edae80>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/orm/attributes.py", line 1086, in get
    |     value = self._fire_loader_callables(state, key, passive)
    |             │    │                      │      │    └ symbol('PASSIVE_OFF')
    |             │    │                      │      └ 'cards'
    |             │    │                      └ <sqlalchemy.orm.state.InstanceState object at 0x1068415b0>
    |             │    └ <function AttributeImpl._fire_loader_callables at 0x10599d440>
    |             └ <sqlalchemy.orm.attributes.CollectionAttributeImpl object at 0x1062ace00>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/orm/attributes.py", line 1121, in _fire_loader_callables
    |     return self.callable_(state, passive)
    |            │    │         │      └ symbol('PASSIVE_OFF')
    |            │    │         └ <sqlalchemy.orm.state.InstanceState object at 0x1068415b0>
    |            │    └ <member 'callable_' of 'AttributeImpl' objects>
    |            └ <sqlalchemy.orm.attributes.CollectionAttributeImpl object at 0x1062ace00>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/orm/strategies.py", line 978, in _load_for_state
    |     return self._emit_lazyload(
    |            │    └ <function LazyLoader._emit_lazyload at 0x105cfa520>
    |            └ <sqlalchemy.orm.strategies.LazyLoader object at 0x1067534c0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/orm/strategies.py", line 1141, in _emit_lazyload
    |     result = session.execute(
    |              │       └ <function Session.execute at 0x105c8bb00>
    |              └ <sqlalchemy.orm.session.Session object at 0x10679b100>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    |     return self._execute_internal(
    |            │    └ <function Session._execute_internal at 0x105c8b7e0>
    |            └ <sqlalchemy.orm.session.Session object at 0x10679b100>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    |     result: Result[Any] = compile_state_cls.orm_execute_statement(
    |                    │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x1059efd80>)>
    |                    │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
    |                    └ typing.Any
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    |     result = conn.execute(
    |              │    └ <function Connection.execute at 0x104a1d300>
    |              └ <sqlalchemy.engine.base.Connection object at 0x10679b360>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    |     return meth(
    |            └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x1068015e0>>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    |     return connection._execute_clauseelement(
    |            │          └ <function Connection._execute_clauseelement at 0x104a1d620>
    |            └ <sqlalchemy.engine.base.Connection object at 0x10679b360>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    |     ret = self._execute_context(
    |           │    └ <function Connection._execute_context at 0x104a1d800>
    |           └ <sqlalchemy.engine.base.Connection object at 0x10679b360>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    |     return self._exec_single_context(
    |            │    └ <function Connection._exec_single_context at 0x104a1d8a0>
    |            └ <sqlalchemy.engine.base.Connection object at 0x10679b360>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    |     self._handle_dbapi_exception(
    |     │    └ <function Connection._handle_dbapi_exception at 0x104a1db20>
    |     └ <sqlalchemy.engine.base.Connection object at 0x10679b360>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2354, in _handle_dbapi_exception
    |     raise exc_info[1].with_traceback(exc_info[2])
    |           │                          └ (<class 'sqlalchemy.exc.MissingGreenlet'>, MissingGreenlet("greenlet_spawn has not been called; can't call await_only() here....
    |           └ (<class 'sqlalchemy.exc.MissingGreenlet'>, MissingGreenlet("greenlet_spawn has not been called; can't call await_only() here....
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    |     self.dialect.do_execute(
    |     │    │       └ <function DefaultDialect.do_execute at 0x105874900>
    |     │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x1060da3c0>
    |     └ <sqlalchemy.engine.base.Connection object at 0x10679b360>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    |     cursor.execute(statement, parameters)
    |     │      │       │          └ (7,)
    |     │      │       └ 'SELECT card.id AS card_id, card.bank_id AS card_bank_id, card.name AS card_name, card.description AS card_description, card....
    |     │      └ <function AsyncAdapt_asyncpg_cursor.execute at 0x105e96700>
    |     └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x106842560>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 580, in execute
    |     self._adapt_connection.await_(
    |     │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    |     └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x106842560>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 123, in await_only
    |     raise exc.MissingGreenlet(
    |           │   └ <class 'sqlalchemy.exc.MissingGreenlet'>
    |           └ <module 'sqlalchemy.exc' from '/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/exc.py'>
    |
    | sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
    +------------------------------------


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x1062cb1a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1060b67...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x1060d8050>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x1060d81a0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:8080', 'connection': 'keep-alive', 'content-length': '33', 'sec-ch-ua-platform': '"macOS"', 'auth...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x1062cb1a0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1060b67...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x10354e020>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x1060d8050>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x1060d8050>>, sen...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1060b67...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x105f67cb0>, header_name='X-Request-I...
          └ <starlette.middleware.cors.CORSMiddleware object at 0x1060d8050>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/asgi_correlation_id/middleware.py", line 90, in __call__
    await self.app(scope, receive, handle_outgoing_request)
          │    │   │      │        └ <function CorrelationIdMiddleware.__call__.<locals>.handle_outgoing_request at 0x106716d40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1060b67...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <src.middleware.state_middleware.StateMiddleware object at 0x105f67cb0>
          └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x105f67cb0>, header_name='X-Request-I...
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
         │            │            └ <function collapse_excgroups at 0x10334da80>
         │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
         └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [MissingGreenlet("greenlet_spawn has not been called; can't call await_only...
    │    │   └ <method 'throw' of 'generator' objects>
    │    └ <generator object collapse_excgroups at 0x106719f20>
    └ <contextlib._GeneratorContextManager object at 0x1067bf1c0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    raise exc
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x106717560>
                     │    │             └ <starlette.middleware.base._CachedRequest object at 0x1062b7df0>
                     │    └ <bound method StateMiddleware.dispatch of <src.middleware.state_middleware.StateMiddleware object at 0x105f67cb0>>
                     └ <src.middleware.state_middleware.StateMiddleware object at 0x105f67cb0>

  File "/Users/kathayatnk/Desktop/swipewise/src/middleware/state_middleware.py", line 24, in dispatch
    response = await call_next(request)
                     │         └ <starlette.middleware.base._CachedRequest object at 0x1062b7df0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x106717560>

  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 156, in call_next
    raise app_exc
          └ MissingGreenlet("greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place?")
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x1067cf920>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1067cfba0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x105f67b60>
          └ <src.middleware.state_middleware.StateMiddleware object at 0x105f67cb0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/authentication.py", line 48, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x1067cf920>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1067cfba0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x105f67a10>
          └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x105f67b60>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x1067cf920>
          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1067cfba0>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x106254a10>
          │                            │    └ <fastapi.routing.APIRouter object at 0x105ff2550>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x105f67a10>
          └ <function wrap_app_handling_exceptions at 0x1033e0180>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1062caca0>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1067cfba0>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          └ <fastapi.routing.APIRouter object at 0x105ff2550>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1062caca0>
          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1067cfba0>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x105ff2550>>
          └ <fastapi.routing.APIRouter object at 0x105ff2550>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1062caca0>
          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1067cfba0>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │     └ <function Route.handle at 0x1033e18a0>
          └ APIRoute(path='/api/v1/user/cards', name='set_cards', methods=['POST'])
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1062caca0>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1067cfba0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <function request_response.<locals>.app at 0x10601ef20>
          └ APIRoute(path='/api/v1/user/cards', name='set_cards', methods=['POST'])
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1062caca0>
          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1067cfba0>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x10627fb90>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x106814ea0>
          └ <function wrap_app_handling_exceptions at 0x1033e0180>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1068154e0>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1067cfba0>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x106814ea0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x10627fb90>
                     └ <function get_request_handler.<locals>.app at 0x10601ee80>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x1033c7920>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x10679ab10>, 'obj': AssignCardRequest(card_ids=[6, 5, 4]), 're...
                 │         └ <function set_cards at 0x105f61c60>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/Users/kathayatnk/Desktop/swipewise/src/backend/user/routes.py", line 24, in set_cards
    await user_service.assign_cards(db, request, obj)
          │            │            │   │        └ AssignCardRequest(card_ids=[6, 5, 4])
          │            │            │   └ <starlette.requests.Request object at 0x10627fb90>
          │            │            └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x10679ab10>
          │            └ <function UserService.assign_cards at 0x105f618a0>
          └ <src.backend.user.service.UserService object at 0x105f64ad0>

  File "/Users/kathayatnk/Desktop/swipewise/src/backend/user/service.py", line 83, in assign_cards
    raise e

  File "/Users/kathayatnk/Desktop/swipewise/src/backend/user/service.py", line 72, in assign_cards
    current_card_ids = {card.id for card in user.cards}
                                            │    └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x105edae80>
                                            └ <unprintable User object>

  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/orm/attributes.py", line 566, in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
           │    │        │      └ {'_sa_instance_state': <sqlalchemy.orm.state.InstanceState object at 0x1068415b0>}
           │    │        └ <sqlalchemy.orm.state.InstanceState object at 0x1068415b0>
           │    └ <member 'impl' of 'QueryableAttribute' objects>
           └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x105edae80>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/orm/attributes.py", line 1086, in get
    value = self._fire_loader_callables(state, key, passive)
            │    │                      │      │    └ symbol('PASSIVE_OFF')
            │    │                      │      └ 'cards'
            │    │                      └ <sqlalchemy.orm.state.InstanceState object at 0x1068415b0>
            │    └ <function AttributeImpl._fire_loader_callables at 0x10599d440>
            └ <sqlalchemy.orm.attributes.CollectionAttributeImpl object at 0x1062ace00>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/orm/attributes.py", line 1121, in _fire_loader_callables
    return self.callable_(state, passive)
           │    │         │      └ symbol('PASSIVE_OFF')
           │    │         └ <sqlalchemy.orm.state.InstanceState object at 0x1068415b0>
           │    └ <member 'callable_' of 'AttributeImpl' objects>
           └ <sqlalchemy.orm.attributes.CollectionAttributeImpl object at 0x1062ace00>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/orm/strategies.py", line 978, in _load_for_state
    return self._emit_lazyload(
           │    └ <function LazyLoader._emit_lazyload at 0x105cfa520>
           └ <sqlalchemy.orm.strategies.LazyLoader object at 0x1067534c0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/orm/strategies.py", line 1141, in _emit_lazyload
    result = session.execute(
             │       └ <function Session.execute at 0x105c8bb00>
             └ <sqlalchemy.orm.session.Session object at 0x10679b100>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x105c8b7e0>
           └ <sqlalchemy.orm.session.Session object at 0x10679b100>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x1059efd80>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x104a1d300>
             └ <sqlalchemy.engine.base.Connection object at 0x10679b360>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x1068015e0>>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x104a1d620>
           └ <sqlalchemy.engine.base.Connection object at 0x10679b360>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x104a1d800>
          └ <sqlalchemy.engine.base.Connection object at 0x10679b360>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x104a1d8a0>
           └ <sqlalchemy.engine.base.Connection object at 0x10679b360>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x104a1db20>
    └ <sqlalchemy.engine.base.Connection object at 0x10679b360>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2354, in _handle_dbapi_exception
    raise exc_info[1].with_traceback(exc_info[2])
          │                          └ (<class 'sqlalchemy.exc.MissingGreenlet'>, MissingGreenlet("greenlet_spawn has not been called; can't call await_only() here....
          └ (<class 'sqlalchemy.exc.MissingGreenlet'>, MissingGreenlet("greenlet_spawn has not been called; can't call await_only() here....
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x105874900>
    │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x1060da3c0>
    └ <sqlalchemy.engine.base.Connection object at 0x10679b360>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ (7,)
    │      │       └ 'SELECT card.id AS card_id, card.bank_id AS card_bank_id, card.name AS card_name, card.description AS card_description, card....
    │      └ <function AsyncAdapt_asyncpg_cursor.execute at 0x105e96700>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x106842560>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x106842560>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 123, in await_only
    raise exc.MissingGreenlet(
          │   └ <class 'sqlalchemy.exc.MissingGreenlet'>
          └ <module 'sqlalchemy.exc' from '/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/exc.py'>

sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 5
               │     └ 8
               └ <function _main at 0x101bff6a0>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 5
           │    └ <function BaseProcess._bootstrap at 0x101bd6200>
           └ <SpawnProcess name='SpawnProcess-1' parent=26429 started>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x101bd5760>
    └ <SpawnProcess name='SpawnProcess-1' parent=26429 started>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x101f99a90>, 'target': <bound method Server.run of <uvicorn.server.Server object...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=26429 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=26429 started>
    │    └ <function subprocess_started at 0x101e85b20>
    └ <SpawnProcess name='SpawnProcess-1' parent=26429 started>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=2, type=1, proto=0, laddr=('127.0.0.1', 8080)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x101f99be0>>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=4, family=2, type=1, proto=0, laddr=('127.0.0.1', 8080)>]
           │       │   │    └ <function Server.serve at 0x101e84ae0>
           │       │   └ <uvicorn.server.Server object at 0x101f99be0>
           │       └ <function run at 0x101bd4720>
           └ <module 'asyncio' from '/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/__init__.py'>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x101e6e340>
           │      └ <function Runner.run at 0x101d18720>
           └ <asyncio.runners.Runner object at 0x101f9a510>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-pac...
           │    │     └ <cyfunction Loop.run_until_complete at 0x102221be0>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x101f9a510>
> File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x105f67380>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1060b67a0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1060b67...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x105f656a0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x105f67380>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1060b67a0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1060b67...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1060b67a0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1060b67...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x1060d81a0>
          └ <fastapi.applications.FastAPI object at 0x105f656a0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 177, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x10627f890>
                     │    └ <function ExceptionHandler.register.<locals>.cors_custom_code_500_exception_handler at 0x1060bbd80>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x1060d81a0>

  File "/Users/kathayatnk/Desktop/swipewise/src/common/exception/exception_handler.py", line 226, in cors_custom_code_500_exception_handler
    status_code = StandardResponseCode.HTTP_500.value
                  │                    └ 500
                  └ <class 'src.common.response.response_code.StandardResponseCode'>

AttributeError: 'int' object has no attribute 'value'
2025-06-04 21:16:39.017 | ERROR    |  ba3b29b754aa45749c2f2e953fe7d0a4  | Exception in ASGI application

  + Exception Group Traceback (most recent call last):
  |
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                │     │                      └ <anyio._backends._asyncio.TaskGroup object at 0x10607f6b0>
  |                │     └ <function create_task_group at 0x101f82fc0>
  |                └ <module 'anyio' from '/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/anyio/__init__.py'>
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  |
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |           │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x106bc9620>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x106b6c8...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.cors.CORSMiddleware object at 0x1060d8050>
    |           └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x1060d81a0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    |     await self.simple_response(scope, receive, send, request_headers=headers)
    |           │    │               │      │        │                     └ Headers({'host': '127.0.0.1:8080', 'connection': 'keep-alive', 'content-length': '33', 'sec-ch-ua-platform': '"macOS"', 'auth...
    |           │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x106bc9620>
    |           │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x106b6c8...
    |           │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <function CORSMiddleware.simple_response at 0x10354e020>
    |           └ <starlette.middleware.cors.CORSMiddleware object at 0x1060d8050>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x1060d8050>>, sen...
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x106b6c8...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x105f67cb0>, header_name='X-Request-I...
    |           └ <starlette.middleware.cors.CORSMiddleware object at 0x1060d8050>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/asgi_correlation_id/middleware.py", line 90, in __call__
    |     await self.app(scope, receive, handle_outgoing_request)
    |           │    │   │      │        └ <function CorrelationIdMiddleware.__call__.<locals>.handle_outgoing_request at 0x106893380>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x106b6c8...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <src.middleware.state_middleware.StateMiddleware object at 0x105f67cb0>
    |           └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x105f67cb0>, header_name='X-Request-I...
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |          │            │            └ <function collapse_excgroups at 0x10334da80>
    |          │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
    |          └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
    |   File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 162, in __exit__
    |     self.gen.throw(value)
    |     │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [MissingGreenlet("greenlet_spawn has not been called; can't call await_only...
    |     │    │   └ <method 'throw' of 'generator' objects>
    |     │    └ <generator object collapse_excgroups at 0x106718d40>
    |     └ <contextlib._GeneratorContextManager object at 0x106b4bf50>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                      │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x106890ae0>
    |                      │    │             └ <starlette.middleware.base._CachedRequest object at 0x1062bc350>
    |                      │    └ <bound method StateMiddleware.dispatch of <src.middleware.state_middleware.StateMiddleware object at 0x105f67cb0>>
    |                      └ <src.middleware.state_middleware.StateMiddleware object at 0x105f67cb0>
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/src/middleware/state_middleware.py", line 24, in dispatch
    |     response = await call_next(request)
    |                      │         └ <starlette.middleware.base._CachedRequest object at 0x1062bc350>
    |                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x106890ae0>
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 156, in call_next
    |     raise app_exc
    |           └ MissingGreenlet("greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place?")
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |           │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x106815580>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x106815120>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x105f67b60>
    |           └ <src.middleware.state_middleware.StateMiddleware object at 0x105f67cb0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/authentication.py", line 48, in __call__
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x106815580>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x106815120>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x105f67a10>
    |           └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x105f67b60>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |           │                            │    │    │     │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x106815580>
    |           │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x106815120>
    |           │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │                            │    │    └ <starlette.requests.Request object at 0x1062ac5d0>
    |           │                            │    └ <fastapi.routing.APIRouter object at 0x105ff2550>
    |           │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x105f67a10>
    |           └ <function wrap_app_handling_exceptions at 0x1033e0180>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |           │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x106815080>
    |           │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x106815120>
    |           │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           └ <fastapi.routing.APIRouter object at 0x105ff2550>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |           │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x106815080>
    |           │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x106815120>
    |           │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x105ff2550>>
    |           └ <fastapi.routing.APIRouter object at 0x105ff2550>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |           │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x106815080>
    |           │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x106815120>
    |           │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │     └ <function Route.handle at 0x1033e18a0>
    |           └ APIRoute(path='/api/v1/user/cards', name='set_cards', methods=['POST'])
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x106815080>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x106815120>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <function request_response.<locals>.app at 0x10601ef20>
    |           └ APIRoute(path='/api/v1/user/cards', name='set_cards', methods=['POST'])
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |           │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x106815080>
    |           │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x106815120>
    |           │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │                            │    └ <starlette.requests.Request object at 0x106864050>
    |           │                            └ <function request_response.<locals>.app.<locals>.app at 0x10677b600>
    |           └ <function wrap_app_handling_exceptions at 0x1033e0180>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |           │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10677aac0>
    |           │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x106815120>
    |           │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           └ <function request_response.<locals>.app.<locals>.app at 0x10677b600>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    |     response = await f(request)
    |                      │ └ <starlette.requests.Request object at 0x106864050>
    |                      └ <function get_request_handler.<locals>.app at 0x10601ee80>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                          └ <function run_endpoint_function at 0x1033c7920>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |                  │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x10679be10>, 'obj': AssignCardRequest(card_ids=[6, 5, 4]), 're...
    |                  │         └ <function set_cards at 0x105f61c60>
    |                  └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/src/backend/user/routes.py", line 24, in set_cards
    |     await user_service.assign_cards(db, request, obj)
    |           │            │            │   │        └ AssignCardRequest(card_ids=[6, 5, 4])
    |           │            │            │   └ <starlette.requests.Request object at 0x106864050>
    |           │            │            └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x10679be10>
    |           │            └ <function UserService.assign_cards at 0x105f618a0>
    |           └ <src.backend.user.service.UserService object at 0x105f64ad0>
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/src/backend/user/service.py", line 83, in assign_cards
    |     raise e
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/src/backend/user/service.py", line 72, in assign_cards
    |     current_card_ids = {card.id for card in user.cards}
    |                                             │    └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x105edae80>
    |                                             └ <unprintable User object>
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/orm/attributes.py", line 566, in __get__
    |     return self.impl.get(state, dict_)  # type: ignore[no-any-return]
    |            │    │        │      └ {'_sa_instance_state': <sqlalchemy.orm.state.InstanceState object at 0x106b5d310>}
    |            │    │        └ <sqlalchemy.orm.state.InstanceState object at 0x106b5d310>
    |            │    └ <member 'impl' of 'QueryableAttribute' objects>
    |            └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x105edae80>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/orm/attributes.py", line 1086, in get
    |     value = self._fire_loader_callables(state, key, passive)
    |             │    │                      │      │    └ symbol('PASSIVE_OFF')
    |             │    │                      │      └ 'cards'
    |             │    │                      └ <sqlalchemy.orm.state.InstanceState object at 0x106b5d310>
    |             │    └ <function AttributeImpl._fire_loader_callables at 0x10599d440>
    |             └ <sqlalchemy.orm.attributes.CollectionAttributeImpl object at 0x1062ace00>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/orm/attributes.py", line 1121, in _fire_loader_callables
    |     return self.callable_(state, passive)
    |            │    │         │      └ symbol('PASSIVE_OFF')
    |            │    │         └ <sqlalchemy.orm.state.InstanceState object at 0x106b5d310>
    |            │    └ <member 'callable_' of 'AttributeImpl' objects>
    |            └ <sqlalchemy.orm.attributes.CollectionAttributeImpl object at 0x1062ace00>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/orm/strategies.py", line 978, in _load_for_state
    |     return self._emit_lazyload(
    |            │    └ <function LazyLoader._emit_lazyload at 0x105cfa520>
    |            └ <sqlalchemy.orm.strategies.LazyLoader object at 0x1067534c0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/orm/strategies.py", line 1141, in _emit_lazyload
    |     result = session.execute(
    |              │       └ <function Session.execute at 0x105c8bb00>
    |              └ <sqlalchemy.orm.session.Session object at 0x106b70050>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    |     return self._execute_internal(
    |            │    └ <function Session._execute_internal at 0x105c8b7e0>
    |            └ <sqlalchemy.orm.session.Session object at 0x106b70050>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    |     result: Result[Any] = compile_state_cls.orm_execute_statement(
    |                    │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x1059efd80>)>
    |                    │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
    |                    └ typing.Any
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    |     result = conn.execute(
    |              │    └ <function Connection.execute at 0x104a1d300>
    |              └ <sqlalchemy.engine.base.Connection object at 0x10680a8d0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    |     return meth(
    |            └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x106b7c500>>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    |     return connection._execute_clauseelement(
    |            │          └ <function Connection._execute_clauseelement at 0x104a1d620>
    |            └ <sqlalchemy.engine.base.Connection object at 0x10680a8d0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    |     ret = self._execute_context(
    |           │    └ <function Connection._execute_context at 0x104a1d800>
    |           └ <sqlalchemy.engine.base.Connection object at 0x10680a8d0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    |     return self._exec_single_context(
    |            │    └ <function Connection._exec_single_context at 0x104a1d8a0>
    |            └ <sqlalchemy.engine.base.Connection object at 0x10680a8d0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    |     self._handle_dbapi_exception(
    |     │    └ <function Connection._handle_dbapi_exception at 0x104a1db20>
    |     └ <sqlalchemy.engine.base.Connection object at 0x10680a8d0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2354, in _handle_dbapi_exception
    |     raise exc_info[1].with_traceback(exc_info[2])
    |           │                          └ (<class 'sqlalchemy.exc.MissingGreenlet'>, MissingGreenlet("greenlet_spawn has not been called; can't call await_only() here....
    |           └ (<class 'sqlalchemy.exc.MissingGreenlet'>, MissingGreenlet("greenlet_spawn has not been called; can't call await_only() here....
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    |     self.dialect.do_execute(
    |     │    │       └ <function DefaultDialect.do_execute at 0x105874900>
    |     │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x1060da3c0>
    |     └ <sqlalchemy.engine.base.Connection object at 0x10680a8d0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    |     cursor.execute(statement, parameters)
    |     │      │       │          └ (7,)
    |     │      │       └ 'SELECT card.id AS card_id, card.bank_id AS card_bank_id, card.name AS card_name, card.description AS card_description, card....
    |     │      └ <function AsyncAdapt_asyncpg_cursor.execute at 0x105e96700>
    |     └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x106b5db40>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 580, in execute
    |     self._adapt_connection.await_(
    |     │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    |     └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x106b5db40>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 123, in await_only
    |     raise exc.MissingGreenlet(
    |           │   └ <class 'sqlalchemy.exc.MissingGreenlet'>
    |           └ <module 'sqlalchemy.exc' from '/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/exc.py'>
    |
    | sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
    +------------------------------------


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x106bc9620>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x106b6c8...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x1060d8050>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x1060d81a0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:8080', 'connection': 'keep-alive', 'content-length': '33', 'sec-ch-ua-platform': '"macOS"', 'auth...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x106bc9620>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x106b6c8...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x10354e020>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x1060d8050>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x1060d8050>>, sen...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x106b6c8...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x105f67cb0>, header_name='X-Request-I...
          └ <starlette.middleware.cors.CORSMiddleware object at 0x1060d8050>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/asgi_correlation_id/middleware.py", line 90, in __call__
    await self.app(scope, receive, handle_outgoing_request)
          │    │   │      │        └ <function CorrelationIdMiddleware.__call__.<locals>.handle_outgoing_request at 0x106893380>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x106b6c8...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <src.middleware.state_middleware.StateMiddleware object at 0x105f67cb0>
          └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x105f67cb0>, header_name='X-Request-I...
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
         │            │            └ <function collapse_excgroups at 0x10334da80>
         │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
         └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [MissingGreenlet("greenlet_spawn has not been called; can't call await_only...
    │    │   └ <method 'throw' of 'generator' objects>
    │    └ <generator object collapse_excgroups at 0x106718d40>
    └ <contextlib._GeneratorContextManager object at 0x106b4bf50>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    raise exc
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x106890ae0>
                     │    │             └ <starlette.middleware.base._CachedRequest object at 0x1062bc350>
                     │    └ <bound method StateMiddleware.dispatch of <src.middleware.state_middleware.StateMiddleware object at 0x105f67cb0>>
                     └ <src.middleware.state_middleware.StateMiddleware object at 0x105f67cb0>

  File "/Users/kathayatnk/Desktop/swipewise/src/middleware/state_middleware.py", line 24, in dispatch
    response = await call_next(request)
                     │         └ <starlette.middleware.base._CachedRequest object at 0x1062bc350>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x106890ae0>

  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 156, in call_next
    raise app_exc
          └ MissingGreenlet("greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place?")
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x106815580>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x106815120>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x105f67b60>
          └ <src.middleware.state_middleware.StateMiddleware object at 0x105f67cb0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/authentication.py", line 48, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x106815580>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x106815120>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x105f67a10>
          └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x105f67b60>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x106815580>
          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x106815120>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x1062ac5d0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x105ff2550>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x105f67a10>
          └ <function wrap_app_handling_exceptions at 0x1033e0180>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x106815080>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x106815120>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          └ <fastapi.routing.APIRouter object at 0x105ff2550>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x106815080>
          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x106815120>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x105ff2550>>
          └ <fastapi.routing.APIRouter object at 0x105ff2550>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x106815080>
          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x106815120>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │     └ <function Route.handle at 0x1033e18a0>
          └ APIRoute(path='/api/v1/user/cards', name='set_cards', methods=['POST'])
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x106815080>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x106815120>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <function request_response.<locals>.app at 0x10601ef20>
          └ APIRoute(path='/api/v1/user/cards', name='set_cards', methods=['POST'])
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x106815080>
          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x106815120>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x106864050>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x10677b600>
          └ <function wrap_app_handling_exceptions at 0x1033e0180>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10677aac0>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x106815120>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x10677b600>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x106864050>
                     └ <function get_request_handler.<locals>.app at 0x10601ee80>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x1033c7920>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x10679be10>, 'obj': AssignCardRequest(card_ids=[6, 5, 4]), 're...
                 │         └ <function set_cards at 0x105f61c60>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/Users/kathayatnk/Desktop/swipewise/src/backend/user/routes.py", line 24, in set_cards
    await user_service.assign_cards(db, request, obj)
          │            │            │   │        └ AssignCardRequest(card_ids=[6, 5, 4])
          │            │            │   └ <starlette.requests.Request object at 0x106864050>
          │            │            └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x10679be10>
          │            └ <function UserService.assign_cards at 0x105f618a0>
          └ <src.backend.user.service.UserService object at 0x105f64ad0>

  File "/Users/kathayatnk/Desktop/swipewise/src/backend/user/service.py", line 83, in assign_cards
    raise e

  File "/Users/kathayatnk/Desktop/swipewise/src/backend/user/service.py", line 72, in assign_cards
    current_card_ids = {card.id for card in user.cards}
                                            │    └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x105edae80>
                                            └ <unprintable User object>

  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/orm/attributes.py", line 566, in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
           │    │        │      └ {'_sa_instance_state': <sqlalchemy.orm.state.InstanceState object at 0x106b5d310>}
           │    │        └ <sqlalchemy.orm.state.InstanceState object at 0x106b5d310>
           │    └ <member 'impl' of 'QueryableAttribute' objects>
           └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x105edae80>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/orm/attributes.py", line 1086, in get
    value = self._fire_loader_callables(state, key, passive)
            │    │                      │      │    └ symbol('PASSIVE_OFF')
            │    │                      │      └ 'cards'
            │    │                      └ <sqlalchemy.orm.state.InstanceState object at 0x106b5d310>
            │    └ <function AttributeImpl._fire_loader_callables at 0x10599d440>
            └ <sqlalchemy.orm.attributes.CollectionAttributeImpl object at 0x1062ace00>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/orm/attributes.py", line 1121, in _fire_loader_callables
    return self.callable_(state, passive)
           │    │         │      └ symbol('PASSIVE_OFF')
           │    │         └ <sqlalchemy.orm.state.InstanceState object at 0x106b5d310>
           │    └ <member 'callable_' of 'AttributeImpl' objects>
           └ <sqlalchemy.orm.attributes.CollectionAttributeImpl object at 0x1062ace00>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/orm/strategies.py", line 978, in _load_for_state
    return self._emit_lazyload(
           │    └ <function LazyLoader._emit_lazyload at 0x105cfa520>
           └ <sqlalchemy.orm.strategies.LazyLoader object at 0x1067534c0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/orm/strategies.py", line 1141, in _emit_lazyload
    result = session.execute(
             │       └ <function Session.execute at 0x105c8bb00>
             └ <sqlalchemy.orm.session.Session object at 0x106b70050>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x105c8b7e0>
           └ <sqlalchemy.orm.session.Session object at 0x106b70050>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x1059efd80>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x104a1d300>
             └ <sqlalchemy.engine.base.Connection object at 0x10680a8d0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x106b7c500>>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x104a1d620>
           └ <sqlalchemy.engine.base.Connection object at 0x10680a8d0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x104a1d800>
          └ <sqlalchemy.engine.base.Connection object at 0x10680a8d0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x104a1d8a0>
           └ <sqlalchemy.engine.base.Connection object at 0x10680a8d0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x104a1db20>
    └ <sqlalchemy.engine.base.Connection object at 0x10680a8d0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2354, in _handle_dbapi_exception
    raise exc_info[1].with_traceback(exc_info[2])
          │                          └ (<class 'sqlalchemy.exc.MissingGreenlet'>, MissingGreenlet("greenlet_spawn has not been called; can't call await_only() here....
          └ (<class 'sqlalchemy.exc.MissingGreenlet'>, MissingGreenlet("greenlet_spawn has not been called; can't call await_only() here....
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x105874900>
    │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x1060da3c0>
    └ <sqlalchemy.engine.base.Connection object at 0x10680a8d0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ (7,)
    │      │       └ 'SELECT card.id AS card_id, card.bank_id AS card_bank_id, card.name AS card_name, card.description AS card_description, card....
    │      └ <function AsyncAdapt_asyncpg_cursor.execute at 0x105e96700>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x106b5db40>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x106b5db40>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 123, in await_only
    raise exc.MissingGreenlet(
          │   └ <class 'sqlalchemy.exc.MissingGreenlet'>
          └ <module 'sqlalchemy.exc' from '/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/sqlalchemy/exc.py'>

sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 5
               │     └ 8
               └ <function _main at 0x101bff6a0>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 5
           │    └ <function BaseProcess._bootstrap at 0x101bd6200>
           └ <SpawnProcess name='SpawnProcess-1' parent=26429 started>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x101bd5760>
    └ <SpawnProcess name='SpawnProcess-1' parent=26429 started>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x101f99a90>, 'target': <bound method Server.run of <uvicorn.server.Server object...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=26429 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=26429 started>
    │    └ <function subprocess_started at 0x101e85b20>
    └ <SpawnProcess name='SpawnProcess-1' parent=26429 started>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=2, type=1, proto=0, laddr=('127.0.0.1', 8080)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x101f99be0>>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=4, family=2, type=1, proto=0, laddr=('127.0.0.1', 8080)>]
           │       │   │    └ <function Server.serve at 0x101e84ae0>
           │       │   └ <uvicorn.server.Server object at 0x101f99be0>
           │       └ <function run at 0x101bd4720>
           └ <module 'asyncio' from '/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/__init__.py'>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x101e6e340>
           │      └ <function Runner.run at 0x101d18720>
           └ <asyncio.runners.Runner object at 0x101f9a510>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-pac...
           │    │     └ <cyfunction Loop.run_until_complete at 0x102221be0>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x101f9a510>
> File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x105f67380>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x106b6c850>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x106b6c8...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x105f656a0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x105f67380>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x106b6c850>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x106b6c8...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x106b6c850>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x106b6c8...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x1060d81a0>
          └ <fastapi.applications.FastAPI object at 0x105f656a0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 177, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x1062afee0>
                     │    └ <function ExceptionHandler.register.<locals>.cors_custom_code_500_exception_handler at 0x1060bbd80>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x1060d81a0>

  File "/Users/kathayatnk/Desktop/swipewise/src/common/exception/exception_handler.py", line 226, in cors_custom_code_500_exception_handler
    status_code = StandardResponseCode.HTTP_500.value
                  │                    └ 500
                  └ <class 'src.common.response.response_code.StandardResponseCode'>

AttributeError: 'int' object has no attribute 'value'
2025-06-04 22:13:47.037 | ERROR    |  -  | ❌ Redis database connection exception Error 1 connecting to singapore-keyvalue.render.com:6379. [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable to get local issuer certificate (_ssl.c:1028).
2025-06-04 22:13:47.058 | ERROR    |  -  | Traceback (most recent call last):
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/redis/asyncio/connection.py", line 302, in connect_check_health
    await self.retry.call_with_retry(
        lambda: self._connect(), lambda error: self.disconnect()
    )
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/redis/asyncio/retry.py", line 71, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/redis/asyncio/connection.py", line 755, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        **self._connection_arguments()
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        lambda: protocol, host, port, **kwds)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "uvloop/loop.pyx", line 2088, in create_connection
  File "uvloop/loop.pyx", line 2083, in uvloop.loop.Loop.create_connection
  File "uvloop/sslproto.pyx", line 517, in uvloop.loop.SSLProtocol._on_handshake_complete
  File "uvloop/sslproto.pyx", line 499, in uvloop.loop.SSLProtocol._do_handshake
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ssl.py", line 951, in do_handshake
    self._sslobj.do_handshake()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
ssl.SSLCertVerificationError: [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable to get local issuer certificate (_ssl.c:1028)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/kathayatnk/Desktop/swipewise/src/database/redis.py", line 25, in open
    await self.ping()
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/redis/asyncio/client.py", line 672, in execute_command
    conn = self.connection or await pool.get_connection()
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/redis/asyncio/connection.py", line 1141, in get_connection
    await self.ensure_connection(connection)
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/redis/asyncio/connection.py", line 1174, in ensure_connection
    await connection.connect()
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/redis/asyncio/connection.py", line 296, in connect
    await self.connect_check_health(check_health=True)
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/redis/asyncio/connection.py", line 310, in connect_check_health
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 1 connecting to singapore-keyvalue.render.com:6379. [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable to get local issuer certificate (_ssl.c:1028).

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 692, in lifespan
    async with self.lifespan_context(app) as maybe_state:
               ~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 214, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi_pagination/api.py", line 347, in lifespan
    async with _original_lifespan_context(app) as maybe_state:
               ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 214, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 133, in merged_lifespan
    async with original_context(app) as maybe_original_state:
               ~~~~~~~~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 214, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 133, in merged_lifespan
    async with original_context(app) as maybe_original_state:
               ~~~~~~~~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 214, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kathayatnk/Desktop/swipewise/src/core/registrar.py", line 28, in lifespan
    await redis.open()
  File "/Users/kathayatnk/Desktop/swipewise/src/database/redis.py", line 34, in open
    sys.exit()
    ~~~~~~~~^^
SystemExit

2025-06-04 22:13:47.059 | ERROR    |  -  | Application startup failed. Exiting.
2025-06-04 22:14:08.829 | ERROR    |  -  | Traceback (most recent call last):
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/redis/asyncio/connection.py", line 302, in connect_check_health
    await self.retry.call_with_retry(
        lambda: self._connect(), lambda error: self.disconnect()
    )
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/redis/asyncio/retry.py", line 71, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/redis/asyncio/connection.py", line 755, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        **self._connection_arguments()
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        lambda: protocol, host, port, **kwds)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "uvloop/loop.pyx", line 2088, in create_connection
  File "uvloop/loop.pyx", line 2083, in uvloop.loop.Loop.create_connection
  File "uvloop/sslproto.pyx", line 517, in uvloop.loop.SSLProtocol._on_handshake_complete
  File "uvloop/sslproto.pyx", line 499, in uvloop.loop.SSLProtocol._do_handshake
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ssl.py", line 951, in do_handshake
    self._sslobj.do_handshake()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
ssl.SSLCertVerificationError: [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable to get local issuer certificate (_ssl.c:1028)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 692, in lifespan
    async with self.lifespan_context(app) as maybe_state:
               ~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 214, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi_pagination/api.py", line 347, in lifespan
    async with _original_lifespan_context(app) as maybe_state:
               ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 214, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 133, in merged_lifespan
    async with original_context(app) as maybe_original_state:
               ~~~~~~~~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 214, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 133, in merged_lifespan
    async with original_context(app) as maybe_original_state:
               ~~~~~~~~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 214, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kathayatnk/Desktop/swipewise/src/core/registrar.py", line 31, in lifespan
    await FastAPILimiter.init(redis=redis,prefix=settings.REQUEST_LIMITER_REDIS_PREFIX,http_callback=http_limit_callback)
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi_limiter/__init__.py", line 85, in init
    cls.lua_sha = await redis.script_load(cls.lua_script)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/redis/asyncio/client.py", line 672, in execute_command
    conn = self.connection or await pool.get_connection()
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/redis/asyncio/connection.py", line 1141, in get_connection
    await self.ensure_connection(connection)
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/redis/asyncio/connection.py", line 1174, in ensure_connection
    await connection.connect()
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/redis/asyncio/connection.py", line 296, in connect
    await self.connect_check_health(check_health=True)
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/redis/asyncio/connection.py", line 310, in connect_check_health
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 1 connecting to singapore-keyvalue.render.com:6379. [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable to get local issuer certificate (_ssl.c:1028).

2025-06-04 22:14:08.830 | ERROR    |  -  | Application startup failed. Exiting.
2025-06-04 22:14:22.065 | ERROR    |  -  | Traceback (most recent call last):
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/redis/asyncio/connection.py", line 302, in connect_check_health
    await self.retry.call_with_retry(
        lambda: self._connect(), lambda error: self.disconnect()
    )
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/redis/asyncio/retry.py", line 71, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/redis/asyncio/connection.py", line 755, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        **self._connection_arguments()
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        lambda: protocol, host, port, **kwds)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "uvloop/loop.pyx", line 2088, in create_connection
  File "uvloop/loop.pyx", line 2083, in uvloop.loop.Loop.create_connection
  File "uvloop/sslproto.pyx", line 517, in uvloop.loop.SSLProtocol._on_handshake_complete
  File "uvloop/sslproto.pyx", line 499, in uvloop.loop.SSLProtocol._do_handshake
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ssl.py", line 951, in do_handshake
    self._sslobj.do_handshake()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
ssl.SSLCertVerificationError: [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable to get local issuer certificate (_ssl.c:1028)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 692, in lifespan
    async with self.lifespan_context(app) as maybe_state:
               ~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 214, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi_pagination/api.py", line 347, in lifespan
    async with _original_lifespan_context(app) as maybe_state:
               ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 214, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 133, in merged_lifespan
    async with original_context(app) as maybe_original_state:
               ~~~~~~~~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 214, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 133, in merged_lifespan
    async with original_context(app) as maybe_original_state:
               ~~~~~~~~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 214, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kathayatnk/Desktop/swipewise/src/core/registrar.py", line 31, in lifespan
    await FastAPILimiter.init(redis=redis,prefix=settings.REQUEST_LIMITER_REDIS_PREFIX,http_callback=http_limit_callback)
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi_limiter/__init__.py", line 85, in init
    cls.lua_sha = await redis.script_load(cls.lua_script)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/redis/asyncio/client.py", line 672, in execute_command
    conn = self.connection or await pool.get_connection()
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/redis/asyncio/connection.py", line 1141, in get_connection
    await self.ensure_connection(connection)
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/redis/asyncio/connection.py", line 1174, in ensure_connection
    await connection.connect()
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/redis/asyncio/connection.py", line 296, in connect
    await self.connect_check_health(check_health=True)
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/redis/asyncio/connection.py", line 310, in connect_check_health
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 1 connecting to singapore-keyvalue.render.com:6379. [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable to get local issuer certificate (_ssl.c:1028).

2025-06-04 22:14:22.067 | ERROR    |  -  | Application startup failed. Exiting.
2025-06-04 22:14:42.143 | ERROR    |  -  | ❌ Redis database connection exception Error 1 connecting to singapore-keyvalue.render.com:6379. [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable to get local issuer certificate (_ssl.c:1028).
2025-06-04 22:14:42.149 | ERROR    |  -  | Traceback (most recent call last):
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/redis/asyncio/connection.py", line 302, in connect_check_health
    await self.retry.call_with_retry(
        lambda: self._connect(), lambda error: self.disconnect()
    )
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/redis/asyncio/retry.py", line 71, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/redis/asyncio/connection.py", line 755, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        **self._connection_arguments()
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        lambda: protocol, host, port, **kwds)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "uvloop/loop.pyx", line 2088, in create_connection
  File "uvloop/loop.pyx", line 2083, in uvloop.loop.Loop.create_connection
  File "uvloop/sslproto.pyx", line 517, in uvloop.loop.SSLProtocol._on_handshake_complete
  File "uvloop/sslproto.pyx", line 499, in uvloop.loop.SSLProtocol._do_handshake
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ssl.py", line 951, in do_handshake
    self._sslobj.do_handshake()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
ssl.SSLCertVerificationError: [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable to get local issuer certificate (_ssl.c:1028)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/kathayatnk/Desktop/swipewise/src/database/redis.py", line 25, in open
    await self.ping()
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/redis/asyncio/client.py", line 672, in execute_command
    conn = self.connection or await pool.get_connection()
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/redis/asyncio/connection.py", line 1141, in get_connection
    await self.ensure_connection(connection)
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/redis/asyncio/connection.py", line 1174, in ensure_connection
    await connection.connect()
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/redis/asyncio/connection.py", line 296, in connect
    await self.connect_check_health(check_health=True)
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/redis/asyncio/connection.py", line 310, in connect_check_health
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 1 connecting to singapore-keyvalue.render.com:6379. [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable to get local issuer certificate (_ssl.c:1028).

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 692, in lifespan
    async with self.lifespan_context(app) as maybe_state:
               ~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 214, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi_pagination/api.py", line 347, in lifespan
    async with _original_lifespan_context(app) as maybe_state:
               ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 214, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 133, in merged_lifespan
    async with original_context(app) as maybe_original_state:
               ~~~~~~~~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 214, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 133, in merged_lifespan
    async with original_context(app) as maybe_original_state:
               ~~~~~~~~~~~~~~~~^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 214, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kathayatnk/Desktop/swipewise/src/core/registrar.py", line 28, in lifespan
    await redis.open()
  File "/Users/kathayatnk/Desktop/swipewise/src/database/redis.py", line 34, in open
    sys.exit()
    ~~~~~~~~^^
SystemExit

2025-06-04 22:14:42.150 | ERROR    |  -  | Application startup failed. Exiting.
2025-06-06 07:42:35.365 | ERROR    |  140a10b05307434f870d5678dc78649f  | Exception in ASGI application

  + Exception Group Traceback (most recent call last):
  |
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                │     │                      └ <anyio._backends._asyncio.TaskGroup object at 0x10a6f4d70>
  |                │     └ <function create_task_group at 0x106b36fc0>
  |                └ <module 'anyio' from '/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/anyio/__init__.py'>
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  |
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |           │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x10a6d3b00>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10a48b4...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.cors.CORSMiddleware object at 0x10a488050>
    |           └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x10a4881a0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x10a6d3b00>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10a48b4...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x10a30fcb0>, header_name='X-Request-I...
    |           └ <starlette.middleware.cors.CORSMiddleware object at 0x10a488050>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/asgi_correlation_id/middleware.py", line 90, in __call__
    |     await self.app(scope, receive, handle_outgoing_request)
    |           │    │   │      │        └ <function CorrelationIdMiddleware.__call__.<locals>.handle_outgoing_request at 0x10a471080>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10a48b4...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <src.middleware.state_middleware.StateMiddleware object at 0x10a30fcb0>
    |           └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x10a30fcb0>, header_name='X-Request-I...
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |          │            │            └ <function collapse_excgroups at 0x107ba9a80>
    |          │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
    |          └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
    |   File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 162, in __exit__
    |     self.gen.throw(value)
    |     │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [TokenError(status_code=401, detail='Not Authenticated')])
    |     │    │   └ <method 'throw' of 'generator' objects>
    |     │    └ <generator object collapse_excgroups at 0x10ac08790>
    |     └ <contextlib._GeneratorContextManager object at 0x10a6e5a20>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                      │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x10a471300>
    |                      │    │             └ <starlette.middleware.base._CachedRequest object at 0x10a488d70>
    |                      │    └ <bound method StateMiddleware.dispatch of <src.middleware.state_middleware.StateMiddleware object at 0x10a30fcb0>>
    |                      └ <src.middleware.state_middleware.StateMiddleware object at 0x10a30fcb0>
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/src/middleware/state_middleware.py", line 24, in dispatch
    |     response = await call_next(request)
    |                      │         └ <starlette.middleware.base._CachedRequest object at 0x10a488d70>
    |                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x10a471300>
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 156, in call_next
    |     raise app_exc
    |           └ TokenError(status_code=401, detail='Not Authenticated')
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |           │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x10a6dc0e0>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10a6dc040>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x10a30fb60>
    |           └ <src.middleware.state_middleware.StateMiddleware object at 0x10a30fcb0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/authentication.py", line 36, in __call__
    |     auth_result = await self.backend.authenticate(conn)
    |                         │    │       │            └ <starlette.requests.HTTPConnection object at 0x10a48b8c0>
    |                         │    │       └ <function JwtAuthMiddleware.authenticate at 0x108311c60>
    |                         │    └ <src.middleware.jwt_auth_middleware.JwtAuthMiddleware object at 0x10a30dd30>
    |                         └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x10a30fb60>
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/src/middleware/jwt_auth_middleware.py", line 60, in authenticate
    |     raise TokenError(msg='Not Authenticated')
    |           └ <class 'src.common.exception.errors.TokenError'>
    |
    | src.common.exception.errors.TokenError: 401: Not Authenticated
    +------------------------------------


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x10a6d3b00>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10a48b4...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x10a488050>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x10a4881a0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x10a6d3b00>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10a48b4...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x10a30fcb0>, header_name='X-Request-I...
          └ <starlette.middleware.cors.CORSMiddleware object at 0x10a488050>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/asgi_correlation_id/middleware.py", line 90, in __call__
    await self.app(scope, receive, handle_outgoing_request)
          │    │   │      │        └ <function CorrelationIdMiddleware.__call__.<locals>.handle_outgoing_request at 0x10a471080>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10a48b4...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <src.middleware.state_middleware.StateMiddleware object at 0x10a30fcb0>
          └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x10a30fcb0>, header_name='X-Request-I...
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
         │            │            └ <function collapse_excgroups at 0x107ba9a80>
         │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
         └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [TokenError(status_code=401, detail='Not Authenticated')])
    │    │   └ <method 'throw' of 'generator' objects>
    │    └ <generator object collapse_excgroups at 0x10ac08790>
    └ <contextlib._GeneratorContextManager object at 0x10a6e5a20>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    raise exc
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x10a471300>
                     │    │             └ <starlette.middleware.base._CachedRequest object at 0x10a488d70>
                     │    └ <bound method StateMiddleware.dispatch of <src.middleware.state_middleware.StateMiddleware object at 0x10a30fcb0>>
                     └ <src.middleware.state_middleware.StateMiddleware object at 0x10a30fcb0>

  File "/Users/kathayatnk/Desktop/swipewise/src/middleware/state_middleware.py", line 24, in dispatch
    response = await call_next(request)
                     │         └ <starlette.middleware.base._CachedRequest object at 0x10a488d70>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x10a471300>

  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 156, in call_next
    raise app_exc
          └ TokenError(status_code=401, detail='Not Authenticated')
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x10a6dc0e0>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10a6dc040>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x10a30fb60>
          └ <src.middleware.state_middleware.StateMiddleware object at 0x10a30fcb0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/authentication.py", line 36, in __call__
    auth_result = await self.backend.authenticate(conn)
                        │    │       │            └ <starlette.requests.HTTPConnection object at 0x10a48b8c0>
                        │    │       └ <function JwtAuthMiddleware.authenticate at 0x108311c60>
                        │    └ <src.middleware.jwt_auth_middleware.JwtAuthMiddleware object at 0x10a30dd30>
                        └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x10a30fb60>

  File "/Users/kathayatnk/Desktop/swipewise/src/middleware/jwt_auth_middleware.py", line 60, in authenticate
    raise TokenError(msg='Not Authenticated')
          └ <class 'src.common.exception.errors.TokenError'>

src.common.exception.errors.TokenError: 401: Not Authenticated


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 5
               │     └ 8
               └ <function _main at 0x1067b36a0>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 5
           │    └ <function BaseProcess._bootstrap at 0x10678a200>
           └ <SpawnProcess name='SpawnProcess-1' parent=78595 started>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x106789760>
    └ <SpawnProcess name='SpawnProcess-1' parent=78595 started>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x106b4da90>, 'target': <bound method Server.run of <uvicorn.server.Server object...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=78595 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=78595 started>
    │    └ <function subprocess_started at 0x106a39b20>
    └ <SpawnProcess name='SpawnProcess-1' parent=78595 started>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=2, type=1, proto=0, laddr=('127.0.0.1', 8080)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x106b4dbe0>>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=4, family=2, type=1, proto=0, laddr=('127.0.0.1', 8080)>]
           │       │   │    └ <function Server.serve at 0x106a38ae0>
           │       │   └ <uvicorn.server.Server object at 0x106b4dbe0>
           │       └ <function run at 0x106788720>
           └ <module 'asyncio' from '/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/__init__.py'>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x106a22340>
           │      └ <function Runner.run at 0x1068c8720>
           └ <asyncio.runners.Runner object at 0x106b4e510>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-pac...
           │    │     └ <cyfunction Loop.run_until_complete at 0x106dd5be0>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x106b4e510>
> File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x10a30f380>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10a48b4d0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10a48b4...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x10a30d6a0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x10a30f380>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10a48b4d0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10a48b4...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10a48b4d0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10a48b4...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x10a4881a0>
          └ <fastapi.applications.FastAPI object at 0x10a30d6a0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 177, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x10a6f5160>
                     │    └ <function ExceptionHandler.register.<locals>.cors_custom_code_500_exception_handler at 0x10a470c20>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x10a4881a0>

  File "/Users/kathayatnk/Desktop/swipewise/src/common/exception/exception_handler.py", line 226, in cors_custom_code_500_exception_handler
    status_code = StandardResponseCode.HTTP_500.value
                  │                    └ 500
                  └ <class 'src.common.response.response_code.StandardResponseCode'>

AttributeError: 'int' object has no attribute 'value'
2025-06-06 07:42:44.941 | ERROR    |  b7ca25e96f64430dbd44384ac6b41b96  | Exception in ASGI application

  + Exception Group Traceback (most recent call last):
  |
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                │     │                      └ <anyio._backends._asyncio.TaskGroup object at 0x10ac8ca50>
  |                │     └ <function create_task_group at 0x106b36fc0>
  |                └ <module 'anyio' from '/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/anyio/__init__.py'>
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  |
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |           │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x10acd9da0>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10ac8c6...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.cors.CORSMiddleware object at 0x10a488050>
    |           └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x10a4881a0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x10acd9da0>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10ac8c6...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x10a30fcb0>, header_name='X-Request-I...
    |           └ <starlette.middleware.cors.CORSMiddleware object at 0x10a488050>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/asgi_correlation_id/middleware.py", line 90, in __call__
    |     await self.app(scope, receive, handle_outgoing_request)
    |           │    │   │      │        └ <function CorrelationIdMiddleware.__call__.<locals>.handle_outgoing_request at 0x10acda200>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10ac8c6...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <src.middleware.state_middleware.StateMiddleware object at 0x10a30fcb0>
    |           └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x10a30fcb0>, header_name='X-Request-I...
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |          │            │            └ <function collapse_excgroups at 0x107ba9a80>
    |          │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
    |          └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
    |   File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 162, in __exit__
    |     self.gen.throw(value)
    |     │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [TokenError(status_code=401, detail='Not Authenticated')])
    |     │    │   └ <method 'throw' of 'generator' objects>
    |     │    └ <generator object collapse_excgroups at 0x10ac0bd30>
    |     └ <contextlib._GeneratorContextManager object at 0x10a6e4e50>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                      │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x10acda660>
    |                      │    │             └ <starlette.middleware.base._CachedRequest object at 0x10a47ed50>
    |                      │    └ <bound method StateMiddleware.dispatch of <src.middleware.state_middleware.StateMiddleware object at 0x10a30fcb0>>
    |                      └ <src.middleware.state_middleware.StateMiddleware object at 0x10a30fcb0>
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/src/middleware/state_middleware.py", line 24, in dispatch
    |     response = await call_next(request)
    |                      │         └ <starlette.middleware.base._CachedRequest object at 0x10a47ed50>
    |                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x10acda660>
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 156, in call_next
    |     raise app_exc
    |           └ TokenError(status_code=401, detail='Not Authenticated')
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |           │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x10ad40ea0>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10ad40e00>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x10a30fb60>
    |           └ <src.middleware.state_middleware.StateMiddleware object at 0x10a30fcb0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/authentication.py", line 36, in __call__
    |     auth_result = await self.backend.authenticate(conn)
    |                         │    │       │            └ <starlette.requests.HTTPConnection object at 0x10ac8cf50>
    |                         │    │       └ <function JwtAuthMiddleware.authenticate at 0x108311c60>
    |                         │    └ <src.middleware.jwt_auth_middleware.JwtAuthMiddleware object at 0x10a30dd30>
    |                         └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x10a30fb60>
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/src/middleware/jwt_auth_middleware.py", line 60, in authenticate
    |     raise TokenError(msg='Not Authenticated')
    |           └ <class 'src.common.exception.errors.TokenError'>
    |
    | src.common.exception.errors.TokenError: 401: Not Authenticated
    +------------------------------------


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x10acd9da0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10ac8c6...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x10a488050>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x10a4881a0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x10acd9da0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10ac8c6...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x10a30fcb0>, header_name='X-Request-I...
          └ <starlette.middleware.cors.CORSMiddleware object at 0x10a488050>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/asgi_correlation_id/middleware.py", line 90, in __call__
    await self.app(scope, receive, handle_outgoing_request)
          │    │   │      │        └ <function CorrelationIdMiddleware.__call__.<locals>.handle_outgoing_request at 0x10acda200>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10ac8c6...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <src.middleware.state_middleware.StateMiddleware object at 0x10a30fcb0>
          └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x10a30fcb0>, header_name='X-Request-I...
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
         │            │            └ <function collapse_excgroups at 0x107ba9a80>
         │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
         └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [TokenError(status_code=401, detail='Not Authenticated')])
    │    │   └ <method 'throw' of 'generator' objects>
    │    └ <generator object collapse_excgroups at 0x10ac0bd30>
    └ <contextlib._GeneratorContextManager object at 0x10a6e4e50>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    raise exc
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x10acda660>
                     │    │             └ <starlette.middleware.base._CachedRequest object at 0x10a47ed50>
                     │    └ <bound method StateMiddleware.dispatch of <src.middleware.state_middleware.StateMiddleware object at 0x10a30fcb0>>
                     └ <src.middleware.state_middleware.StateMiddleware object at 0x10a30fcb0>

  File "/Users/kathayatnk/Desktop/swipewise/src/middleware/state_middleware.py", line 24, in dispatch
    response = await call_next(request)
                     │         └ <starlette.middleware.base._CachedRequest object at 0x10a47ed50>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x10acda660>

  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 156, in call_next
    raise app_exc
          └ TokenError(status_code=401, detail='Not Authenticated')
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x10ad40ea0>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10ad40e00>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x10a30fb60>
          └ <src.middleware.state_middleware.StateMiddleware object at 0x10a30fcb0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/authentication.py", line 36, in __call__
    auth_result = await self.backend.authenticate(conn)
                        │    │       │            └ <starlette.requests.HTTPConnection object at 0x10ac8cf50>
                        │    │       └ <function JwtAuthMiddleware.authenticate at 0x108311c60>
                        │    └ <src.middleware.jwt_auth_middleware.JwtAuthMiddleware object at 0x10a30dd30>
                        └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x10a30fb60>

  File "/Users/kathayatnk/Desktop/swipewise/src/middleware/jwt_auth_middleware.py", line 60, in authenticate
    raise TokenError(msg='Not Authenticated')
          └ <class 'src.common.exception.errors.TokenError'>

src.common.exception.errors.TokenError: 401: Not Authenticated


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 5
               │     └ 8
               └ <function _main at 0x1067b36a0>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 5
           │    └ <function BaseProcess._bootstrap at 0x10678a200>
           └ <SpawnProcess name='SpawnProcess-1' parent=78595 started>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x106789760>
    └ <SpawnProcess name='SpawnProcess-1' parent=78595 started>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x106b4da90>, 'target': <bound method Server.run of <uvicorn.server.Server object...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=78595 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=78595 started>
    │    └ <function subprocess_started at 0x106a39b20>
    └ <SpawnProcess name='SpawnProcess-1' parent=78595 started>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=2, type=1, proto=0, laddr=('127.0.0.1', 8080)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x106b4dbe0>>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=4, family=2, type=1, proto=0, laddr=('127.0.0.1', 8080)>]
           │       │   │    └ <function Server.serve at 0x106a38ae0>
           │       │   └ <uvicorn.server.Server object at 0x106b4dbe0>
           │       └ <function run at 0x106788720>
           └ <module 'asyncio' from '/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/__init__.py'>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x106a22340>
           │      └ <function Runner.run at 0x1068c8720>
           └ <asyncio.runners.Runner object at 0x106b4e510>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-pac...
           │    │     └ <cyfunction Loop.run_until_complete at 0x106dd5be0>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x106b4e510>
> File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x10a30f380>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10ac8c690>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10ac8c6...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x10a30d6a0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x10a30f380>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10ac8c690>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10ac8c6...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10ac8c690>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10ac8c6...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x10a4881a0>
          └ <fastapi.applications.FastAPI object at 0x10a30d6a0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 177, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x10ac8d450>
                     │    └ <function ExceptionHandler.register.<locals>.cors_custom_code_500_exception_handler at 0x10a470c20>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x10a4881a0>

  File "/Users/kathayatnk/Desktop/swipewise/src/common/exception/exception_handler.py", line 226, in cors_custom_code_500_exception_handler
    status_code = StandardResponseCode.HTTP_500.value
                  │                    └ 500
                  └ <class 'src.common.response.response_code.StandardResponseCode'>

AttributeError: 'int' object has no attribute 'value'
2025-06-06 07:43:33.881 | ERROR    |  fa3c7cf2deee4b64b72eb4c0694df042  | Exception in ASGI application

  + Exception Group Traceback (most recent call last):
  |
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                │     │                      └ <anyio._backends._asyncio.TaskGroup object at 0x108fb5a90>
  |                │     └ <function create_task_group at 0x1049307c0>
  |                └ <module 'anyio' from '/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/anyio/__init__.py'>
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  |
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |           │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x108fac540>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x108fb40...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.cors.CORSMiddleware object at 0x108bc8830>
    |           └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x108bc8980>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x108fac540>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x108fb40...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x108bc8590>, header_name='X-Request-I...
    |           └ <starlette.middleware.cors.CORSMiddleware object at 0x108bc8830>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/asgi_correlation_id/middleware.py", line 90, in __call__
    |     await self.app(scope, receive, handle_outgoing_request)
    |           │    │   │      │        └ <function CorrelationIdMiddleware.__call__.<locals>.handle_outgoing_request at 0x108fac720>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x108fb40...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <src.middleware.state_middleware.StateMiddleware object at 0x108bc8590>
    |           └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x108bc8590>, header_name='X-Request-I...
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |          │            │            └ <function collapse_excgroups at 0x105c76c00>
    |          │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
    |          └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
    |   File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 162, in __exit__
    |     self.gen.throw(value)
    |     │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [TokenError(status_code=401, detail='Not Authenticated')])
    |     │    │   └ <method 'throw' of 'generator' objects>
    |     │    └ <generator object collapse_excgroups at 0x108f16740>
    |     └ <contextlib._GeneratorContextManager object at 0x108fd1780>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                      │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x109007380>
    |                      │    │             └ <starlette.middleware.base._CachedRequest object at 0x108fb42f0>
    |                      │    └ <bound method StateMiddleware.dispatch of <src.middleware.state_middleware.StateMiddleware object at 0x108bc8590>>
    |                      └ <src.middleware.state_middleware.StateMiddleware object at 0x108bc8590>
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/src/middleware/state_middleware.py", line 24, in dispatch
    |     response = await call_next(request)
    |                      │         └ <starlette.middleware.base._CachedRequest object at 0x108fb42f0>
    |                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x109007380>
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 156, in call_next
    |     raise app_exc
    |           └ TokenError(status_code=401, detail='Not Authenticated')
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |           │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x109018a40>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1090189a0>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x108bc8440>
    |           └ <src.middleware.state_middleware.StateMiddleware object at 0x108bc8590>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/authentication.py", line 36, in __call__
    |     auth_result = await self.backend.authenticate(conn)
    |                         │    │       │            └ <starlette.requests.HTTPConnection object at 0x108fb6120>
    |                         │    │       └ <function JwtAuthMiddleware.authenticate at 0x1066e0900>
    |                         │    └ <src.middleware.jwt_auth_middleware.JwtAuthMiddleware object at 0x1089f63c0>
    |                         └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x108bc8440>
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/src/middleware/jwt_auth_middleware.py", line 60, in authenticate
    |     raise TokenError(msg='Not Authenticated')
    |           └ <class 'src.common.exception.errors.TokenError'>
    |
    | src.common.exception.errors.TokenError: 401: Not Authenticated
    +------------------------------------


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x108fac540>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x108fb40...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x108bc8830>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x108bc8980>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x108fac540>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x108fb40...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x108bc8590>, header_name='X-Request-I...
          └ <starlette.middleware.cors.CORSMiddleware object at 0x108bc8830>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/asgi_correlation_id/middleware.py", line 90, in __call__
    await self.app(scope, receive, handle_outgoing_request)
          │    │   │      │        └ <function CorrelationIdMiddleware.__call__.<locals>.handle_outgoing_request at 0x108fac720>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x108fb40...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <src.middleware.state_middleware.StateMiddleware object at 0x108bc8590>
          └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x108bc8590>, header_name='X-Request-I...
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
         │            │            └ <function collapse_excgroups at 0x105c76c00>
         │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
         └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [TokenError(status_code=401, detail='Not Authenticated')])
    │    │   └ <method 'throw' of 'generator' objects>
    │    └ <generator object collapse_excgroups at 0x108f16740>
    └ <contextlib._GeneratorContextManager object at 0x108fd1780>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    raise exc
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x109007380>
                     │    │             └ <starlette.middleware.base._CachedRequest object at 0x108fb42f0>
                     │    └ <bound method StateMiddleware.dispatch of <src.middleware.state_middleware.StateMiddleware object at 0x108bc8590>>
                     └ <src.middleware.state_middleware.StateMiddleware object at 0x108bc8590>

  File "/Users/kathayatnk/Desktop/swipewise/src/middleware/state_middleware.py", line 24, in dispatch
    response = await call_next(request)
                     │         └ <starlette.middleware.base._CachedRequest object at 0x108fb42f0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x109007380>

  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 156, in call_next
    raise app_exc
          └ TokenError(status_code=401, detail='Not Authenticated')
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x109018a40>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1090189a0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x108bc8440>
          └ <src.middleware.state_middleware.StateMiddleware object at 0x108bc8590>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/authentication.py", line 36, in __call__
    auth_result = await self.backend.authenticate(conn)
                        │    │       │            └ <starlette.requests.HTTPConnection object at 0x108fb6120>
                        │    │       └ <function JwtAuthMiddleware.authenticate at 0x1066e0900>
                        │    └ <src.middleware.jwt_auth_middleware.JwtAuthMiddleware object at 0x1089f63c0>
                        └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x108bc8440>

  File "/Users/kathayatnk/Desktop/swipewise/src/middleware/jwt_auth_middleware.py", line 60, in authenticate
    raise TokenError(msg='Not Authenticated')
          └ <class 'src.common.exception.errors.TokenError'>

src.common.exception.errors.TokenError: 401: Not Authenticated


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 5
               │     └ 8
               └ <function _main at 0x10442a700>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 5
           │    └ <function BaseProcess._bootstrap at 0x104410180>
           └ <SpawnProcess name='SpawnProcess-1' parent=79052 started>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x1043d36a0>
    └ <SpawnProcess name='SpawnProcess-1' parent=79052 started>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x104985160>, 'target': <bound method Server.run of <uvicorn.server.Server object...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=79052 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=79052 started>
    │    └ <function subprocess_started at 0x10479f100>
    └ <SpawnProcess name='SpawnProcess-1' parent=79052 started>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=2, type=1, proto=0, laddr=('127.0.0.1', 8080)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x1049852b0>>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=4, family=2, type=1, proto=0, laddr=('127.0.0.1', 8080)>]
           │       │   │    └ <function Server.serve at 0x10479dd00>
           │       │   └ <uvicorn.server.Server object at 0x1049852b0>
           │       └ <function run at 0x10456dee0>
           └ <module 'asyncio' from '/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/__init__.py'>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x104796960>
           │      └ <function Runner.run at 0x1045b44a0>
           └ <asyncio.runners.Runner object at 0x104985be0>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-pac...
           │    │     └ <cyfunction Loop.run_until_complete at 0x104c28930>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x104985be0>
> File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x1089f7b60>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x108fb4050>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x108fb40...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x1089f5fd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x1089f7b60>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x108fb4050>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x108fb40...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x108fb4050>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x108fb40...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x108bc8980>
          └ <fastapi.applications.FastAPI object at 0x1089f5fd0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 177, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x108fb6a50>
                     │    └ <function ExceptionHandler.register.<locals>.cors_custom_code_500_exception_handler at 0x108b974c0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x108bc8980>

  File "/Users/kathayatnk/Desktop/swipewise/src/common/exception/exception_handler.py", line 226, in cors_custom_code_500_exception_handler
    status_code = StandardResponseCode.HTTP_500.value
                  │                    └ 500
                  └ <class 'src.common.response.response_code.StandardResponseCode'>

AttributeError: 'int' object has no attribute 'value'
2025-06-06 07:59:48.866 | ERROR    |  196306823f794238b56f799feb54c651  | Exception in ASGI application

  + Exception Group Traceback (most recent call last):
  |
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                │     │                      └ <anyio._backends._asyncio.TaskGroup object at 0x1143a9d30>
  |                │     └ <function create_task_group at 0x104eec5e0>
  |                └ <module 'anyio' from '/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/anyio/__init__.py'>
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  |
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |           │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x1143c44a0>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1143a82...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.cors.CORSMiddleware object at 0x113fe0ad0>
    |           └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x113fe0c20>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x1143c44a0>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1143a82...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x113fe0830>, header_name='X-Request-I...
    |           └ <starlette.middleware.cors.CORSMiddleware object at 0x113fe0ad0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/asgi_correlation_id/middleware.py", line 90, in __call__
    |     await self.app(scope, receive, handle_outgoing_request)
    |           │    │   │      │        └ <function CorrelationIdMiddleware.__call__.<locals>.handle_outgoing_request at 0x1143c4680>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1143a82...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <src.middleware.state_middleware.StateMiddleware object at 0x113fe0830>
    |           └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x113fe0830>, header_name='X-Request-I...
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |          │            │            └ <function collapse_excgroups at 0x106dd6a20>
    |          │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
    |          └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
    |   File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 162, in __exit__
    |     self.gen.throw(value)
    |     │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [AttributeError("'int' object has no attribute 'code'")])
    |     │    │   └ <method 'throw' of 'generator' objects>
    |     │    └ <generator object collapse_excgroups at 0x113f364d0>
    |     └ <contextlib._GeneratorContextManager object at 0x1143e19b0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                      │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x11441b2e0>
    |                      │    │             └ <starlette.middleware.base._CachedRequest object at 0x1143a8590>
    |                      │    └ <bound method StateMiddleware.dispatch of <src.middleware.state_middleware.StateMiddleware object at 0x113fe0830>>
    |                      └ <src.middleware.state_middleware.StateMiddleware object at 0x113fe0830>
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/src/middleware/state_middleware.py", line 24, in dispatch
    |     response = await call_next(request)
    |                      │         └ <starlette.middleware.base._CachedRequest object at 0x1143a8590>
    |                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x11441b2e0>
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 156, in call_next
    |     raise app_exc
    |           └ AttributeError("'int' object has no attribute 'code'")
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |           │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x1144309a0>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x114430900>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x113fe06e0>
    |           └ <src.middleware.state_middleware.StateMiddleware object at 0x113fe0830>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/authentication.py", line 48, in __call__
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x1144309a0>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x114430900>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x113fe0590>
    |           └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x113fe06e0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |           │                            │    │    │     │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x1144309a0>
    |           │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x114430900>
    |           │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │                            │    │    └ <starlette.requests.Request object at 0x1143aa660>
    |           │                            │    └ <fastapi.routing.APIRouter object at 0x113dd2150>
    |           │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x113fe0590>
    |           └ <function wrap_app_handling_exceptions at 0x1108c8400>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |           │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x114430fe0>
    |           │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x114430900>
    |           │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           └ <fastapi.routing.APIRouter object at 0x113dd2150>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |           │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x114430fe0>
    |           │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x114430900>
    |           │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x113dd2150>>
    |           └ <fastapi.routing.APIRouter object at 0x113dd2150>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |           │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x114430fe0>
    |           │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x114430900>
    |           │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │     └ <function Route.handle at 0x1108ca200>
    |           └ APIRoute(path='/api/v1/user/me', name='me', methods=['GET'])
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x114430fe0>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x114430900>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <function request_response.<locals>.app at 0x113f0f2e0>
    |           └ APIRoute(path='/api/v1/user/me', name='me', methods=['GET'])
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |           │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x114430fe0>
    |           │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x114430900>
    |           │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │                            │    └ <starlette.requests.Request object at 0x11401f890>
    |           │                            └ <function request_response.<locals>.app.<locals>.app at 0x1144311c0>
    |           └ <function wrap_app_handling_exceptions at 0x1108c8400>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 59, in wrapped_app
    |     response = await handler(conn, exc)
    |                      │       └ <starlette.requests.Request object at 0x11401f890>
    |                      └ <function ExceptionHandler.register.<locals>.http_exception_handler at 0x113fab060>
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/src/common/exception/exception_handler.py", line 132, in http_exception_handler
    |     content = self_instance._prepare_error_content(
    |               │             └ <function ExceptionHandler._prepare_error_content at 0x110b59940>
    |               └ <src.common.exception.exception_handler.ExceptionHandler object at 0x110a7ee40>
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/src/common/exception/exception_handler.py", line 61, in _prepare_error_content
    |     res = response_base.fail(res=response_code)
    |           │             │        └ 403
    |           │             └ <function ResponseBase.fail at 0x110a5fec0>
    |           └ <src.common.response.response_schema.ResponseBase object at 0x110a7c440>
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/src/common/response/response_schema.py", line 112, in fail
    |     return self.__response(res=res, data=data)
    |            │                   │         └ None
    |            │                   └ 403
    |            └ <src.common.response.response_schema.ResponseBase object at 0x110a7c440>
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/src/common/response/response_schema.py", line 82, in __response
    |     return ResponseModel(code=res.code, msg=res.msg, data=data)
    |            │                  │             │             └ None
    |            │                  │             └ 403
    |            │                  └ 403
    |            └ <class 'src.common.response.response_schema.ResponseModel'>
    |
    | AttributeError: 'int' object has no attribute 'code'
    +------------------------------------


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x1143c44a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1143a82...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x113fe0ad0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x113fe0c20>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x1143c44a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1143a82...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x113fe0830>, header_name='X-Request-I...
          └ <starlette.middleware.cors.CORSMiddleware object at 0x113fe0ad0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/asgi_correlation_id/middleware.py", line 90, in __call__
    await self.app(scope, receive, handle_outgoing_request)
          │    │   │      │        └ <function CorrelationIdMiddleware.__call__.<locals>.handle_outgoing_request at 0x1143c4680>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1143a82...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <src.middleware.state_middleware.StateMiddleware object at 0x113fe0830>
          └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x113fe0830>, header_name='X-Request-I...
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
         │            │            └ <function collapse_excgroups at 0x106dd6a20>
         │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
         └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [AttributeError("'int' object has no attribute 'code'")])
    │    │   └ <method 'throw' of 'generator' objects>
    │    └ <generator object collapse_excgroups at 0x113f364d0>
    └ <contextlib._GeneratorContextManager object at 0x1143e19b0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    raise exc
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x11441b2e0>
                     │    │             └ <starlette.middleware.base._CachedRequest object at 0x1143a8590>
                     │    └ <bound method StateMiddleware.dispatch of <src.middleware.state_middleware.StateMiddleware object at 0x113fe0830>>
                     └ <src.middleware.state_middleware.StateMiddleware object at 0x113fe0830>

  File "/Users/kathayatnk/Desktop/swipewise/src/middleware/state_middleware.py", line 24, in dispatch
    response = await call_next(request)
                     │         └ <starlette.middleware.base._CachedRequest object at 0x1143a8590>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x11441b2e0>

  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 156, in call_next
    raise app_exc
          └ AttributeError("'int' object has no attribute 'code'")
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x1144309a0>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x114430900>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x113fe06e0>
          └ <src.middleware.state_middleware.StateMiddleware object at 0x113fe0830>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/authentication.py", line 48, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x1144309a0>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x114430900>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x113fe0590>
          └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x113fe06e0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x1144309a0>
          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x114430900>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x1143aa660>
          │                            │    └ <fastapi.routing.APIRouter object at 0x113dd2150>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x113fe0590>
          └ <function wrap_app_handling_exceptions at 0x1108c8400>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x114430fe0>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x114430900>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          └ <fastapi.routing.APIRouter object at 0x113dd2150>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x114430fe0>
          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x114430900>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x113dd2150>>
          └ <fastapi.routing.APIRouter object at 0x113dd2150>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x114430fe0>
          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x114430900>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │     └ <function Route.handle at 0x1108ca200>
          └ APIRoute(path='/api/v1/user/me', name='me', methods=['GET'])
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x114430fe0>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x114430900>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <function request_response.<locals>.app at 0x113f0f2e0>
          └ APIRoute(path='/api/v1/user/me', name='me', methods=['GET'])
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x114430fe0>
          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x114430900>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x11401f890>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x1144311c0>
          └ <function wrap_app_handling_exceptions at 0x1108c8400>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 59, in wrapped_app
    response = await handler(conn, exc)
                     │       └ <starlette.requests.Request object at 0x11401f890>
                     └ <function ExceptionHandler.register.<locals>.http_exception_handler at 0x113fab060>

  File "/Users/kathayatnk/Desktop/swipewise/src/common/exception/exception_handler.py", line 132, in http_exception_handler
    content = self_instance._prepare_error_content(
              │             └ <function ExceptionHandler._prepare_error_content at 0x110b59940>
              └ <src.common.exception.exception_handler.ExceptionHandler object at 0x110a7ee40>

  File "/Users/kathayatnk/Desktop/swipewise/src/common/exception/exception_handler.py", line 61, in _prepare_error_content
    res = response_base.fail(res=response_code)
          │             │        └ 403
          │             └ <function ResponseBase.fail at 0x110a5fec0>
          └ <src.common.response.response_schema.ResponseBase object at 0x110a7c440>

  File "/Users/kathayatnk/Desktop/swipewise/src/common/response/response_schema.py", line 112, in fail
    return self.__response(res=res, data=data)
           │                   │         └ None
           │                   └ 403
           └ <src.common.response.response_schema.ResponseBase object at 0x110a7c440>

  File "/Users/kathayatnk/Desktop/swipewise/src/common/response/response_schema.py", line 82, in __response
    return ResponseModel(code=res.code, msg=res.msg, data=data)
           │                  │             │             └ None
           │                  │             └ 403
           │                  └ 403
           └ <class 'src.common.response.response_schema.ResponseModel'>

AttributeError: 'int' object has no attribute 'code'


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 5
               │     └ 9
               └ <function _main at 0x10484e520>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 5
           │    └ <function BaseProcess._bootstrap at 0x10453bf60>
           └ <SpawnProcess name='SpawnProcess-6' parent=79052 started>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x10453b4c0>
    └ <SpawnProcess name='SpawnProcess-6' parent=79052 started>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x104f41160>, 'target': <bound method Server.run of <uvicorn.server.Server object...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-6' parent=79052 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-6' parent=79052 started>
    │    └ <function subprocess_started at 0x104d96f20>
    └ <SpawnProcess name='SpawnProcess-6' parent=79052 started>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=2, type=1, proto=0, laddr=('127.0.0.1', 8080)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x104f412b0>>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=4, family=2, type=1, proto=0, laddr=('127.0.0.1', 8080)>]
           │       │   │    └ <function Server.serve at 0x104d95b20>
           │       │   └ <uvicorn.server.Server object at 0x104f412b0>
           │       └ <function run at 0x104b75d00>
           └ <module 'asyncio' from '/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/__init__.py'>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x104d8a880>
           │      └ <function Runner.run at 0x104bc42c0>
           └ <asyncio.runners.Runner object at 0x104f41be0>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-pac...
           │    │     └ <cyfunction Loop.run_until_complete at 0x1059e0930>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x104f41be0>
> File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x113d03e00>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1143a82f0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1143a82...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x113d02270>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x113d03e00>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1143a82f0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1143a82...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1143a82f0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1143a82...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x113fe0c20>
          └ <fastapi.applications.FastAPI object at 0x113d02270>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 177, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x11401fd90>
                     │    └ <function ExceptionHandler.register.<locals>.cors_custom_code_500_exception_handler at 0x113fab4c0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x113fe0c20>

  File "/Users/kathayatnk/Desktop/swipewise/src/common/exception/exception_handler.py", line 230, in cors_custom_code_500_exception_handler
    content = self_instance._prepare_error_content(
              │             └ <function ExceptionHandler._prepare_error_content at 0x110b59940>
              └ <src.common.exception.exception_handler.ExceptionHandler object at 0x110a7ee40>

  File "/Users/kathayatnk/Desktop/swipewise/src/common/exception/exception_handler.py", line 61, in _prepare_error_content
    res = response_base.fail(res=response_code)
          │             │        └ 500
          │             └ <function ResponseBase.fail at 0x110a5fec0>
          └ <src.common.response.response_schema.ResponseBase object at 0x110a7c440>

  File "/Users/kathayatnk/Desktop/swipewise/src/common/response/response_schema.py", line 112, in fail
    return self.__response(res=res, data=data)
           │                   │         └ None
           │                   └ 500
           └ <src.common.response.response_schema.ResponseBase object at 0x110a7c440>

  File "/Users/kathayatnk/Desktop/swipewise/src/common/response/response_schema.py", line 82, in __response
    return ResponseModel(code=res.code, msg=res.msg, data=data)
           │                  │             │             └ None
           │                  │             └ 500
           │                  └ 500
           └ <class 'src.common.response.response_schema.ResponseModel'>

AttributeError: 'int' object has no attribute 'code'
2025-06-06 08:04:15.539 | ERROR    |  31afbe5e91fe4578acff24b843dc42f4  | Exception in ASGI application

  + Exception Group Traceback (most recent call last):
  |
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                │     │                      └ <anyio._backends._asyncio.TaskGroup object at 0x1144587d0>
  |                │     └ <function create_task_group at 0x104eec5e0>
  |                └ <module 'anyio' from '/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/anyio/__init__.py'>
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  |
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |           │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x1147b0860>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1144582...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.cors.CORSMiddleware object at 0x113fe0ad0>
    |           └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x113fe0c20>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x1147b0860>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1144582...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x113fe0830>, header_name='X-Request-I...
    |           └ <starlette.middleware.cors.CORSMiddleware object at 0x113fe0ad0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/asgi_correlation_id/middleware.py", line 90, in __call__
    |     await self.app(scope, receive, handle_outgoing_request)
    |           │    │   │      │        └ <function CorrelationIdMiddleware.__call__.<locals>.handle_outgoing_request at 0x1147b07c0>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1144582...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <src.middleware.state_middleware.StateMiddleware object at 0x113fe0830>
    |           └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x113fe0830>, header_name='X-Request-I...
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |          │            │            └ <function collapse_excgroups at 0x106dd6a20>
    |          │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
    |          └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
    |   File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 162, in __exit__
    |     self.gen.throw(value)
    |     │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [AttributeError("'int' object has no attribute 'code'")])
    |     │    │   └ <method 'throw' of 'generator' objects>
    |     │    └ <generator object collapse_excgroups at 0x11476e740>
    |     └ <contextlib._GeneratorContextManager object at 0x1147aa7b0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                      │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x1147b09a0>
    |                      │    │             └ <starlette.middleware.base._CachedRequest object at 0x114458690>
    |                      │    └ <bound method StateMiddleware.dispatch of <src.middleware.state_middleware.StateMiddleware object at 0x113fe0830>>
    |                      └ <src.middleware.state_middleware.StateMiddleware object at 0x113fe0830>
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/src/middleware/state_middleware.py", line 24, in dispatch
    |     response = await call_next(request)
    |                      │         └ <starlette.middleware.base._CachedRequest object at 0x114458690>
    |                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x1147b09a0>
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 156, in call_next
    |     raise app_exc
    |           └ AttributeError("'int' object has no attribute 'code'")
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |           │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x1147b0680>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1147b0cc0>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x113fe06e0>
    |           └ <src.middleware.state_middleware.StateMiddleware object at 0x113fe0830>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/authentication.py", line 48, in __call__
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x1147b0680>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1147b0cc0>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x113fe0590>
    |           └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x113fe06e0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |           │                            │    │    │     │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x1147b0680>
    |           │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1147b0cc0>
    |           │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │                            │    │    └ <starlette.requests.Request object at 0x114390b00>
    |           │                            │    └ <fastapi.routing.APIRouter object at 0x113dd2150>
    |           │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x113fe0590>
    |           └ <function wrap_app_handling_exceptions at 0x1108c8400>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |           │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1147b0fe0>
    |           │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1147b0cc0>
    |           │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           └ <fastapi.routing.APIRouter object at 0x113dd2150>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |           │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1147b0fe0>
    |           │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1147b0cc0>
    |           │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x113dd2150>>
    |           └ <fastapi.routing.APIRouter object at 0x113dd2150>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |           │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1147b0fe0>
    |           │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1147b0cc0>
    |           │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │     └ <function Route.handle at 0x1108ca200>
    |           └ APIRoute(path='/api/v1/user/me', name='me', methods=['GET'])
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1147b0fe0>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1147b0cc0>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <function request_response.<locals>.app at 0x113f0f2e0>
    |           └ APIRoute(path='/api/v1/user/me', name='me', methods=['GET'])
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |           │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1147b0fe0>
    |           │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1147b0cc0>
    |           │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │                            │    └ <starlette.requests.Request object at 0x114392650>
    |           │                            └ <function request_response.<locals>.app.<locals>.app at 0x1147b1080>
    |           └ <function wrap_app_handling_exceptions at 0x1108c8400>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 59, in wrapped_app
    |     response = await handler(conn, exc)
    |                      │       └ <starlette.requests.Request object at 0x114392650>
    |                      └ <function ExceptionHandler.register.<locals>.http_exception_handler at 0x113fab060>
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/src/common/exception/exception_handler.py", line 132, in http_exception_handler
    |     content=content,
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/src/common/exception/exception_handler.py", line 61, in _prepare_error_content
    |     response_code = CustomResponseCode.HTTP_500 if code >= 500 else CustomResponseCode.HTTP_400
    |                     │                  │           │                │                  └ <CustomResponseCode.HTTP_400: (400, 'Bad request')>
    |                     │                  │           │                └ <enum 'CustomResponseCode'>
    |                     │                  │           └ 403
    |                     │                  └ <CustomResponseCode.HTTP_500: (500, 'Internal server error')>
    |                     └ <enum 'CustomResponseCode'>
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/src/common/response/response_schema.py", line 112, in fail
    |     return self.__response(res=res, data=data)
    |            │                   │         └ None
    |            │                   └ 403
    |            └ <src.common.response.response_schema.ResponseBase object at 0x110a7c440>
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/src/common/response/response_schema.py", line 82, in __response
    |     return ResponseModel(code=res.code, msg=res.msg, data=data)
    |            │                  │             │             └ None
    |            │                  │             └ 403
    |            │                  └ 403
    |            └ <class 'src.common.response.response_schema.ResponseModel'>
    |
    | AttributeError: 'int' object has no attribute 'code'
    +------------------------------------


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x1147b0860>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1144582...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x113fe0ad0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x113fe0c20>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x1147b0860>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1144582...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x113fe0830>, header_name='X-Request-I...
          └ <starlette.middleware.cors.CORSMiddleware object at 0x113fe0ad0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/asgi_correlation_id/middleware.py", line 90, in __call__
    await self.app(scope, receive, handle_outgoing_request)
          │    │   │      │        └ <function CorrelationIdMiddleware.__call__.<locals>.handle_outgoing_request at 0x1147b07c0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1144582...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <src.middleware.state_middleware.StateMiddleware object at 0x113fe0830>
          └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x113fe0830>, header_name='X-Request-I...
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
         │            │            └ <function collapse_excgroups at 0x106dd6a20>
         │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
         └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [AttributeError("'int' object has no attribute 'code'")])
    │    │   └ <method 'throw' of 'generator' objects>
    │    └ <generator object collapse_excgroups at 0x11476e740>
    └ <contextlib._GeneratorContextManager object at 0x1147aa7b0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    raise exc
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x1147b09a0>
                     │    │             └ <starlette.middleware.base._CachedRequest object at 0x114458690>
                     │    └ <bound method StateMiddleware.dispatch of <src.middleware.state_middleware.StateMiddleware object at 0x113fe0830>>
                     └ <src.middleware.state_middleware.StateMiddleware object at 0x113fe0830>

  File "/Users/kathayatnk/Desktop/swipewise/src/middleware/state_middleware.py", line 24, in dispatch
    response = await call_next(request)
                     │         └ <starlette.middleware.base._CachedRequest object at 0x114458690>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x1147b09a0>

  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 156, in call_next
    raise app_exc
          └ AttributeError("'int' object has no attribute 'code'")
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x1147b0680>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1147b0cc0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x113fe06e0>
          └ <src.middleware.state_middleware.StateMiddleware object at 0x113fe0830>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/authentication.py", line 48, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x1147b0680>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1147b0cc0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x113fe0590>
          └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x113fe06e0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x1147b0680>
          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1147b0cc0>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x114390b00>
          │                            │    └ <fastapi.routing.APIRouter object at 0x113dd2150>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x113fe0590>
          └ <function wrap_app_handling_exceptions at 0x1108c8400>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1147b0fe0>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1147b0cc0>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          └ <fastapi.routing.APIRouter object at 0x113dd2150>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1147b0fe0>
          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1147b0cc0>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x113dd2150>>
          └ <fastapi.routing.APIRouter object at 0x113dd2150>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1147b0fe0>
          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1147b0cc0>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │     └ <function Route.handle at 0x1108ca200>
          └ APIRoute(path='/api/v1/user/me', name='me', methods=['GET'])
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1147b0fe0>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1147b0cc0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <function request_response.<locals>.app at 0x113f0f2e0>
          └ APIRoute(path='/api/v1/user/me', name='me', methods=['GET'])
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1147b0fe0>
          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1147b0cc0>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x114392650>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x1147b1080>
          └ <function wrap_app_handling_exceptions at 0x1108c8400>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 59, in wrapped_app
    response = await handler(conn, exc)
                     │       └ <starlette.requests.Request object at 0x114392650>
                     └ <function ExceptionHandler.register.<locals>.http_exception_handler at 0x113fab060>

  File "/Users/kathayatnk/Desktop/swipewise/src/common/exception/exception_handler.py", line 132, in http_exception_handler
    content=content,

  File "/Users/kathayatnk/Desktop/swipewise/src/common/exception/exception_handler.py", line 61, in _prepare_error_content
    response_code = CustomResponseCode.HTTP_500 if code >= 500 else CustomResponseCode.HTTP_400
                    │                  │           │                │                  └ <CustomResponseCode.HTTP_400: (400, 'Bad request')>
                    │                  │           │                └ <enum 'CustomResponseCode'>
                    │                  │           └ 403
                    │                  └ <CustomResponseCode.HTTP_500: (500, 'Internal server error')>
                    └ <enum 'CustomResponseCode'>

  File "/Users/kathayatnk/Desktop/swipewise/src/common/response/response_schema.py", line 112, in fail
    return self.__response(res=res, data=data)
           │                   │         └ None
           │                   └ 403
           └ <src.common.response.response_schema.ResponseBase object at 0x110a7c440>

  File "/Users/kathayatnk/Desktop/swipewise/src/common/response/response_schema.py", line 82, in __response
    return ResponseModel(code=res.code, msg=res.msg, data=data)
           │                  │             │             └ None
           │                  │             └ 403
           │                  └ 403
           └ <class 'src.common.response.response_schema.ResponseModel'>

AttributeError: 'int' object has no attribute 'code'


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 5
               │     └ 9
               └ <function _main at 0x10484e520>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 5
           │    └ <function BaseProcess._bootstrap at 0x10453bf60>
           └ <SpawnProcess name='SpawnProcess-6' parent=79052 started>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x10453b4c0>
    └ <SpawnProcess name='SpawnProcess-6' parent=79052 started>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x104f41160>, 'target': <bound method Server.run of <uvicorn.server.Server object...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-6' parent=79052 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-6' parent=79052 started>
    │    └ <function subprocess_started at 0x104d96f20>
    └ <SpawnProcess name='SpawnProcess-6' parent=79052 started>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket [closed] fd=-1, family=2, type=1, proto=0>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x104f412b0>>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket [closed] fd=-1, family=2, type=1, proto=0>]
           │       │   │    └ <function Server.serve at 0x104d95b20>
           │       │   └ <uvicorn.server.Server object at 0x104f412b0>
           │       └ <function run at 0x104b75d00>
           └ <module 'asyncio' from '/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/__init__.py'>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x104d8a880>
           │      └ <function Runner.run at 0x104bc42c0>
           └ <asyncio.runners.Runner object at 0x104f41be0>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-pac...
           │    │     └ <cyfunction Loop.run_until_complete at 0x1059e0930>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x104f41be0>
> File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x113d03e00>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1144582d0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1144582...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x113d02270>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x113d03e00>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1144582d0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1144582...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1144582d0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1144582...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x113fe0c20>
          └ <fastapi.applications.FastAPI object at 0x113d02270>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 177, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x114447d10>
                     │    └ <function ExceptionHandler.register.<locals>.cors_custom_code_500_exception_handler at 0x113fab4c0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x113fe0c20>

  File "/Users/kathayatnk/Desktop/swipewise/src/common/exception/exception_handler.py", line 230, in cors_custom_code_500_exception_handler
    content.update(trace_id=get_request_trace_id(request))
                            │                    └ <starlette.requests.Request object at 0x114447d10>
                            └ <function get_request_trace_id at 0x110b59800>

  File "/Users/kathayatnk/Desktop/swipewise/src/common/exception/exception_handler.py", line 61, in _prepare_error_content
    response_code = CustomResponseCode.HTTP_500 if code >= 500 else CustomResponseCode.HTTP_400
                    │                  │           │                │                  └ <CustomResponseCode.HTTP_400: (400, 'Bad request')>
                    │                  │           │                └ <enum 'CustomResponseCode'>
                    │                  │           └ 500
                    │                  └ <CustomResponseCode.HTTP_500: (500, 'Internal server error')>
                    └ <enum 'CustomResponseCode'>

  File "/Users/kathayatnk/Desktop/swipewise/src/common/response/response_schema.py", line 112, in fail
    return self.__response(res=res, data=data)
           │                   │         └ None
           │                   └ 500
           └ <src.common.response.response_schema.ResponseBase object at 0x110a7c440>

  File "/Users/kathayatnk/Desktop/swipewise/src/common/response/response_schema.py", line 82, in __response
    return ResponseModel(code=res.code, msg=res.msg, data=data)
           │                  │             │             └ None
           │                  │             └ 500
           │                  └ 500
           └ <class 'src.common.response.response_schema.ResponseModel'>

AttributeError: 'int' object has no attribute 'code'
2025-06-06 08:47:54.513 | ERROR    |  5fc93e8cd71144c192d24ea790684282  | Exception in ASGI application

  + Exception Group Traceback (most recent call last):
  |
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                │     │                      └ <anyio._backends._asyncio.TaskGroup object at 0x1120188d0>
  |                │     └ <function create_task_group at 0x1041ec5e0>
  |                └ <module 'anyio' from '/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/anyio/__init__.py'>
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  |
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |           │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x111d2eb60>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111c457...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.cors.CORSMiddleware object at 0x1118e0ad0>
    |           └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x1118e0c20>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x111d2eb60>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111c457...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x1118e0830>, header_name='X-Request-I...
    |           └ <starlette.middleware.cors.CORSMiddleware object at 0x1118e0ad0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/asgi_correlation_id/middleware.py", line 90, in __call__
    |     await self.app(scope, receive, handle_outgoing_request)
    |           │    │   │      │        └ <function CorrelationIdMiddleware.__call__.<locals>.handle_outgoing_request at 0x1121af920>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111c457...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <src.middleware.state_middleware.StateMiddleware object at 0x1118e0830>
    |           └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x1118e0830>, header_name='X-Request-I...
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |          │            │            └ <function collapse_excgroups at 0x105ed6a20>
    |          │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
    |          └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
    |   File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 162, in __exit__
    |     self.gen.throw(value)
    |     │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [ResponseValidationError()])
    |     │    │   └ <method 'throw' of 'generator' objects>
    |     │    └ <generator object collapse_excgroups at 0x112177030>
    |     └ <contextlib._GeneratorContextManager object at 0x1121e3ee0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                      │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x1121afa60>
    |                      │    │             └ <starlette.middleware.base._CachedRequest object at 0x112018c00>
    |                      │    └ <bound method StateMiddleware.dispatch of <src.middleware.state_middleware.StateMiddleware object at 0x1118e0830>>
    |                      └ <src.middleware.state_middleware.StateMiddleware object at 0x1118e0830>
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/src/middleware/state_middleware.py", line 24, in dispatch
    |     response = await call_next(request)
    |                      │         └ <starlette.middleware.base._CachedRequest object at 0x112018c00>
    |                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x1121afa60>
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 156, in call_next
    |     raise app_exc
    |           └ ResponseValidationError()
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |           │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x1121afba0>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1121afe20>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x1118e06e0>
    |           └ <src.middleware.state_middleware.StateMiddleware object at 0x1118e0830>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/authentication.py", line 48, in __call__
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x1121afba0>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1121afe20>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x1118e0590>
    |           └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x1118e06e0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |           │                            │    │    │     │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x1121afba0>
    |           │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1121afe20>
    |           │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │                            │    │    └ <starlette.requests.Request object at 0x112019ae0>
    |           │                            │    └ <fastapi.routing.APIRouter object at 0x1115d2150>
    |           │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x1118e0590>
    |           └ <function wrap_app_handling_exceptions at 0x1060c8400>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |           │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1121af880>
    |           │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1121afe20>
    |           │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           └ <fastapi.routing.APIRouter object at 0x1115d2150>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |           │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1121af880>
    |           │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1121afe20>
    |           │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x1115d2150>>
    |           └ <fastapi.routing.APIRouter object at 0x1115d2150>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |           │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1121af880>
    |           │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1121afe20>
    |           │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │     └ <function Route.handle at 0x1060ca200>
    |           └ APIRoute(path='/api/v1/auth/refresh_token', name='refresh_token', methods=['POST'])
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1121af880>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1121afe20>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <function request_response.<locals>.app at 0x11180e980>
    |           └ APIRoute(path='/api/v1/auth/refresh_token', name='refresh_token', methods=['POST'])
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |           │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1121af880>
    |           │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1121afe20>
    |           │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │                            │    └ <starlette.requests.Request object at 0x11220ae50>
    |           │                            └ <function request_response.<locals>.app.<locals>.app at 0x1121afec0>
    |           └ <function wrap_app_handling_exceptions at 0x1060c8400>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |           │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x112230040>
    |           │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1121afe20>
    |           │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           └ <function request_response.<locals>.app.<locals>.app at 0x1121afec0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    |     response = await f(request)
    |                      │ └ <starlette.requests.Request object at 0x11220ae50>
    |                      └ <function get_request_handler.<locals>.app at 0x11180e8e0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    |     content = await serialize_response(
    |                     └ <function serialize_response at 0x1054bf880>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    |     raise ResponseValidationError(
    |           └ <class 'fastapi.exceptions.ResponseValidationError'>
    |
    | fastapi.exceptions.ResponseValidationError: 2 validation errors:
    |   {'type': 'model_attributes_type', 'loc': ('response', 'data', 'access_token'), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzZXNzaW9uX3V1aWQiOiJmNGM3YWMxMS00YzJhLTQ4NmItOTg5NC1kNDQ3YzhhZTZjODQiLCJleHAiOjE3NDkyNjUzNzQsInN1YiI6OH0.6-kIbc3--m603t_GrxKCq69g1-6euVjzwf_CPSNQGTs'}
    |   {'type': 'missing', 'loc': ('response', 'data', 'refresh_token'), 'msg': 'Field required', 'input': AccessToken(access_token='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzZXNzaW9uX3V1aWQiOiJmNGM3YWMxMS00YzJhLTQ4NmItOTg5NC1kNDQ3YzhhZTZjODQiLCJleHAiOjE3NDkyNjUzNzQsInN1YiI6OH0.6-kIbc3--m603t_GrxKCq69g1-6euVjzwf_CPSNQGTs', access_token_expire_time=datetime.datetime(2025, 6, 7, 8, 47, 54, 507456, tzinfo=zoneinfo.ZoneInfo(key='Asia/Kathmandu')), session_uuid='f4c7ac11-4c2a-486b-9894-d447c8ae6c84')}
    |
    +------------------------------------


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x111d2eb60>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111c457...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x1118e0ad0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x1118e0c20>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x111d2eb60>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111c457...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x1118e0830>, header_name='X-Request-I...
          └ <starlette.middleware.cors.CORSMiddleware object at 0x1118e0ad0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/asgi_correlation_id/middleware.py", line 90, in __call__
    await self.app(scope, receive, handle_outgoing_request)
          │    │   │      │        └ <function CorrelationIdMiddleware.__call__.<locals>.handle_outgoing_request at 0x1121af920>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111c457...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <src.middleware.state_middleware.StateMiddleware object at 0x1118e0830>
          └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x1118e0830>, header_name='X-Request-I...
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
         │            │            └ <function collapse_excgroups at 0x105ed6a20>
         │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
         └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [ResponseValidationError()])
    │    │   └ <method 'throw' of 'generator' objects>
    │    └ <generator object collapse_excgroups at 0x112177030>
    └ <contextlib._GeneratorContextManager object at 0x1121e3ee0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    raise exc
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x1121afa60>
                     │    │             └ <starlette.middleware.base._CachedRequest object at 0x112018c00>
                     │    └ <bound method StateMiddleware.dispatch of <src.middleware.state_middleware.StateMiddleware object at 0x1118e0830>>
                     └ <src.middleware.state_middleware.StateMiddleware object at 0x1118e0830>

  File "/Users/kathayatnk/Desktop/swipewise/src/middleware/state_middleware.py", line 24, in dispatch
    response = await call_next(request)
                     │         └ <starlette.middleware.base._CachedRequest object at 0x112018c00>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x1121afa60>

  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 156, in call_next
    raise app_exc
          └ ResponseValidationError()
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x1121afba0>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1121afe20>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x1118e06e0>
          └ <src.middleware.state_middleware.StateMiddleware object at 0x1118e0830>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/authentication.py", line 48, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x1121afba0>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1121afe20>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x1118e0590>
          └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x1118e06e0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x1121afba0>
          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1121afe20>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x112019ae0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x1115d2150>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x1118e0590>
          └ <function wrap_app_handling_exceptions at 0x1060c8400>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1121af880>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1121afe20>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          └ <fastapi.routing.APIRouter object at 0x1115d2150>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1121af880>
          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1121afe20>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x1115d2150>>
          └ <fastapi.routing.APIRouter object at 0x1115d2150>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1121af880>
          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1121afe20>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │     └ <function Route.handle at 0x1060ca200>
          └ APIRoute(path='/api/v1/auth/refresh_token', name='refresh_token', methods=['POST'])
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1121af880>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1121afe20>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <function request_response.<locals>.app at 0x11180e980>
          └ APIRoute(path='/api/v1/auth/refresh_token', name='refresh_token', methods=['POST'])
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1121af880>
          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1121afe20>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x11220ae50>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x1121afec0>
          └ <function wrap_app_handling_exceptions at 0x1060c8400>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x112230040>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1121afe20>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x1121afec0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x11220ae50>
                     └ <function get_request_handler.<locals>.app at 0x11180e8e0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    content = await serialize_response(
                    └ <function serialize_response at 0x1054bf880>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    raise ResponseValidationError(
          └ <class 'fastapi.exceptions.ResponseValidationError'>

fastapi.exceptions.ResponseValidationError: 2 validation errors:
  {'type': 'model_attributes_type', 'loc': ('response', 'data', 'access_token'), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzZXNzaW9uX3V1aWQiOiJmNGM3YWMxMS00YzJhLTQ4NmItOTg5NC1kNDQ3YzhhZTZjODQiLCJleHAiOjE3NDkyNjUzNzQsInN1YiI6OH0.6-kIbc3--m603t_GrxKCq69g1-6euVjzwf_CPSNQGTs'}
  {'type': 'missing', 'loc': ('response', 'data', 'refresh_token'), 'msg': 'Field required', 'input': AccessToken(access_token='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzZXNzaW9uX3V1aWQiOiJmNGM3YWMxMS00YzJhLTQ4NmItOTg5NC1kNDQ3YzhhZTZjODQiLCJleHAiOjE3NDkyNjUzNzQsInN1YiI6OH0.6-kIbc3--m603t_GrxKCq69g1-6euVjzwf_CPSNQGTs', access_token_expire_time=datetime.datetime(2025, 6, 7, 8, 47, 54, 507456, tzinfo=zoneinfo.ZoneInfo(key='Asia/Kathmandu')), session_uuid='f4c7ac11-4c2a-486b-9894-d447c8ae6c84')}



During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 5
               │     └ 12
               └ <function _main at 0x102c4e520>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 5
           │    └ <function BaseProcess._bootstrap at 0x102bf7f60>
           └ <SpawnProcess name='SpawnProcess-7' parent=79052 started>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x102bf74c0>
    └ <SpawnProcess name='SpawnProcess-7' parent=79052 started>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x104241160>, 'target': <bound method Server.run of <uvicorn.server.Server object...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-7' parent=79052 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-7' parent=79052 started>
    │    └ <function subprocess_started at 0x104096f20>
    └ <SpawnProcess name='SpawnProcess-7' parent=79052 started>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=2, type=1, proto=0, laddr=('127.0.0.1', 8080)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x1042412b0>>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=4, family=2, type=1, proto=0, laddr=('127.0.0.1', 8080)>]
           │       │   │    └ <function Server.serve at 0x104095b20>
           │       │   └ <uvicorn.server.Server object at 0x1042412b0>
           │       └ <function run at 0x102d71d00>
           └ <module 'asyncio' from '/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/__init__.py'>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x10408a880>
           │      └ <function Runner.run at 0x102dc42c0>
           └ <asyncio.runners.Runner object at 0x104241be0>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-pac...
           │    │     └ <cyfunction Loop.run_until_complete at 0x1046c0930>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x104241be0>
> File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x111503e00>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111c457b0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111c457...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x111502270>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x111503e00>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111c457b0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111c457...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111c457b0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111c457...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x1118e0c20>
          └ <fastapi.applications.FastAPI object at 0x111502270>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 177, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x11220a350>
                     │    └ <function ExceptionHandler.register.<locals>.cors_custom_code_500_exception_handler at 0x1118ab420>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x1118e0c20>

  File "/Users/kathayatnk/Desktop/swipewise/src/common/exception/exception_handler.py", line 226, in cors_custom_code_500_exception_handler
    status_code = StandardResponseCode.HTTP_500.value
                  │                    └ 500
                  └ <class 'src.common.response.response_code.StandardResponseCode'>

AttributeError: 'int' object has no attribute 'value'
2025-06-06 08:48:16.737 | ERROR    |  72ce8e8f59b348aca83b24ebaf56bc96  | Exception in ASGI application

  + Exception Group Traceback (most recent call last):
  |
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                │     │                      └ <anyio._backends._asyncio.TaskGroup object at 0x111d1cc80>
  |                │     └ <function create_task_group at 0x1041ec5e0>
  |                └ <module 'anyio' from '/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/anyio/__init__.py'>
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  |
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |           │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x112230220>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11220bc...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.cors.CORSMiddleware object at 0x1118e0ad0>
    |           └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x1118e0c20>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x112230220>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11220bc...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x1118e0830>, header_name='X-Request-I...
    |           └ <starlette.middleware.cors.CORSMiddleware object at 0x1118e0ad0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/asgi_correlation_id/middleware.py", line 90, in __call__
    |     await self.app(scope, receive, handle_outgoing_request)
    |           │    │   │      │        └ <function CorrelationIdMiddleware.__call__.<locals>.handle_outgoing_request at 0x11226c220>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11220bc...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <src.middleware.state_middleware.StateMiddleware object at 0x1118e0830>
    |           └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x1118e0830>, header_name='X-Request-I...
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |          │            │            └ <function collapse_excgroups at 0x105ed6a20>
    |          │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
    |          └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
    |   File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 162, in __exit__
    |     self.gen.throw(value)
    |     │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [ResponseValidationError()])
    |     │    │   └ <method 'throw' of 'generator' objects>
    |     │    └ <generator object collapse_excgroups at 0x1122a60c0>
    |     └ <contextlib._GeneratorContextManager object at 0x1122629e0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                      │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x11226df80>
    |                      │    │             └ <starlette.middleware.base._CachedRequest object at 0x112208750>
    |                      │    └ <bound method StateMiddleware.dispatch of <src.middleware.state_middleware.StateMiddleware object at 0x1118e0830>>
    |                      └ <src.middleware.state_middleware.StateMiddleware object at 0x1118e0830>
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/src/middleware/state_middleware.py", line 24, in dispatch
    |     response = await call_next(request)
    |                      │         └ <starlette.middleware.base._CachedRequest object at 0x112208750>
    |                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x11226df80>
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 156, in call_next
    |     raise app_exc
    |           └ ResponseValidationError()
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |           │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x1121aeac0>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x111d2f600>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x1118e06e0>
    |           └ <src.middleware.state_middleware.StateMiddleware object at 0x1118e0830>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/authentication.py", line 48, in __call__
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x1121aeac0>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x111d2f600>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x1118e0590>
    |           └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x1118e06e0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |           │                            │    │    │     │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x1121aeac0>
    |           │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x111d2f600>
    |           │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │                            │    │    └ <starlette.requests.Request object at 0x111c9f200>
    |           │                            │    └ <fastapi.routing.APIRouter object at 0x1115d2150>
    |           │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x1118e0590>
    |           └ <function wrap_app_handling_exceptions at 0x1060c8400>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |           │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1121aef20>
    |           │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x111d2f600>
    |           │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           └ <fastapi.routing.APIRouter object at 0x1115d2150>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |           │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1121aef20>
    |           │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x111d2f600>
    |           │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x1115d2150>>
    |           └ <fastapi.routing.APIRouter object at 0x1115d2150>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |           │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1121aef20>
    |           │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x111d2f600>
    |           │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │     └ <function Route.handle at 0x1060ca200>
    |           └ APIRoute(path='/api/v1/auth/refresh_token', name='refresh_token', methods=['POST'])
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1121aef20>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x111d2f600>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <function request_response.<locals>.app at 0x11180e980>
    |           └ APIRoute(path='/api/v1/auth/refresh_token', name='refresh_token', methods=['POST'])
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |           │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1121aef20>
    |           │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x111d2f600>
    |           │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │                            │    └ <starlette.requests.Request object at 0x11221a210>
    |           │                            └ <function request_response.<locals>.app.<locals>.app at 0x1121aee80>
    |           └ <function wrap_app_handling_exceptions at 0x1060c8400>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |           │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1121ae980>
    |           │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x111d2f600>
    |           │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           └ <function request_response.<locals>.app.<locals>.app at 0x1121aee80>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    |     response = await f(request)
    |                      │ └ <starlette.requests.Request object at 0x11221a210>
    |                      └ <function get_request_handler.<locals>.app at 0x11180e8e0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    |     content = await serialize_response(
    |                     └ <function serialize_response at 0x1054bf880>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    |     raise ResponseValidationError(
    |           └ <class 'fastapi.exceptions.ResponseValidationError'>
    |
    | fastapi.exceptions.ResponseValidationError: 2 validation errors:
    |   {'type': 'model_attributes_type', 'loc': ('response', 'data', 'access_token'), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzZXNzaW9uX3V1aWQiOiI4NWNkZGI2NC01Mjg5LTQ2NWItOGIxNi0xOTdkMTM3ZDc4YTkiLCJleHAiOjE3NDkyNjUzOTYsInN1YiI6OH0.eQZp5so8bRwP13KxVrpoosFZIRgO-OuGXMrVrfnZVGE'}
    |   {'type': 'missing', 'loc': ('response', 'data', 'refresh_token'), 'msg': 'Field required', 'input': AccessToken(access_token='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzZXNzaW9uX3V1aWQiOiI4NWNkZGI2NC01Mjg5LTQ2NWItOGIxNi0xOTdkMTM3ZDc4YTkiLCJleHAiOjE3NDkyNjUzOTYsInN1YiI6OH0.eQZp5so8bRwP13KxVrpoosFZIRgO-OuGXMrVrfnZVGE', access_token_expire_time=datetime.datetime(2025, 6, 7, 8, 48, 16, 734387, tzinfo=zoneinfo.ZoneInfo(key='Asia/Kathmandu')), session_uuid='85cddb64-5289-465b-8b16-197d137d78a9')}
    |
    +------------------------------------


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x112230220>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11220bc...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x1118e0ad0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x1118e0c20>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x112230220>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11220bc...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x1118e0830>, header_name='X-Request-I...
          └ <starlette.middleware.cors.CORSMiddleware object at 0x1118e0ad0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/asgi_correlation_id/middleware.py", line 90, in __call__
    await self.app(scope, receive, handle_outgoing_request)
          │    │   │      │        └ <function CorrelationIdMiddleware.__call__.<locals>.handle_outgoing_request at 0x11226c220>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11220bc...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <src.middleware.state_middleware.StateMiddleware object at 0x1118e0830>
          └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x1118e0830>, header_name='X-Request-I...
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
         │            │            └ <function collapse_excgroups at 0x105ed6a20>
         │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
         └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [ResponseValidationError()])
    │    │   └ <method 'throw' of 'generator' objects>
    │    └ <generator object collapse_excgroups at 0x1122a60c0>
    └ <contextlib._GeneratorContextManager object at 0x1122629e0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    raise exc
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x11226df80>
                     │    │             └ <starlette.middleware.base._CachedRequest object at 0x112208750>
                     │    └ <bound method StateMiddleware.dispatch of <src.middleware.state_middleware.StateMiddleware object at 0x1118e0830>>
                     └ <src.middleware.state_middleware.StateMiddleware object at 0x1118e0830>

  File "/Users/kathayatnk/Desktop/swipewise/src/middleware/state_middleware.py", line 24, in dispatch
    response = await call_next(request)
                     │         └ <starlette.middleware.base._CachedRequest object at 0x112208750>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x11226df80>

  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 156, in call_next
    raise app_exc
          └ ResponseValidationError()
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x1121aeac0>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x111d2f600>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x1118e06e0>
          └ <src.middleware.state_middleware.StateMiddleware object at 0x1118e0830>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/authentication.py", line 48, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x1121aeac0>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x111d2f600>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x1118e0590>
          └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x1118e06e0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x1121aeac0>
          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x111d2f600>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x111c9f200>
          │                            │    └ <fastapi.routing.APIRouter object at 0x1115d2150>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x1118e0590>
          └ <function wrap_app_handling_exceptions at 0x1060c8400>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1121aef20>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x111d2f600>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          └ <fastapi.routing.APIRouter object at 0x1115d2150>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1121aef20>
          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x111d2f600>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x1115d2150>>
          └ <fastapi.routing.APIRouter object at 0x1115d2150>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1121aef20>
          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x111d2f600>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │     └ <function Route.handle at 0x1060ca200>
          └ APIRoute(path='/api/v1/auth/refresh_token', name='refresh_token', methods=['POST'])
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1121aef20>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x111d2f600>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <function request_response.<locals>.app at 0x11180e980>
          └ APIRoute(path='/api/v1/auth/refresh_token', name='refresh_token', methods=['POST'])
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1121aef20>
          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x111d2f600>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x11221a210>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x1121aee80>
          └ <function wrap_app_handling_exceptions at 0x1060c8400>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1121ae980>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x111d2f600>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x1121aee80>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x11221a210>
                     └ <function get_request_handler.<locals>.app at 0x11180e8e0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    content = await serialize_response(
                    └ <function serialize_response at 0x1054bf880>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    raise ResponseValidationError(
          └ <class 'fastapi.exceptions.ResponseValidationError'>

fastapi.exceptions.ResponseValidationError: 2 validation errors:
  {'type': 'model_attributes_type', 'loc': ('response', 'data', 'access_token'), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzZXNzaW9uX3V1aWQiOiI4NWNkZGI2NC01Mjg5LTQ2NWItOGIxNi0xOTdkMTM3ZDc4YTkiLCJleHAiOjE3NDkyNjUzOTYsInN1YiI6OH0.eQZp5so8bRwP13KxVrpoosFZIRgO-OuGXMrVrfnZVGE'}
  {'type': 'missing', 'loc': ('response', 'data', 'refresh_token'), 'msg': 'Field required', 'input': AccessToken(access_token='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzZXNzaW9uX3V1aWQiOiI4NWNkZGI2NC01Mjg5LTQ2NWItOGIxNi0xOTdkMTM3ZDc4YTkiLCJleHAiOjE3NDkyNjUzOTYsInN1YiI6OH0.eQZp5so8bRwP13KxVrpoosFZIRgO-OuGXMrVrfnZVGE', access_token_expire_time=datetime.datetime(2025, 6, 7, 8, 48, 16, 734387, tzinfo=zoneinfo.ZoneInfo(key='Asia/Kathmandu')), session_uuid='85cddb64-5289-465b-8b16-197d137d78a9')}



During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 5
               │     └ 12
               └ <function _main at 0x102c4e520>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 5
           │    └ <function BaseProcess._bootstrap at 0x102bf7f60>
           └ <SpawnProcess name='SpawnProcess-7' parent=79052 started>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x102bf74c0>
    └ <SpawnProcess name='SpawnProcess-7' parent=79052 started>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x104241160>, 'target': <bound method Server.run of <uvicorn.server.Server object...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-7' parent=79052 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-7' parent=79052 started>
    │    └ <function subprocess_started at 0x104096f20>
    └ <SpawnProcess name='SpawnProcess-7' parent=79052 started>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=2, type=1, proto=0, laddr=('127.0.0.1', 8080)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x1042412b0>>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=4, family=2, type=1, proto=0, laddr=('127.0.0.1', 8080)>]
           │       │   │    └ <function Server.serve at 0x104095b20>
           │       │   └ <uvicorn.server.Server object at 0x1042412b0>
           │       └ <function run at 0x102d71d00>
           └ <module 'asyncio' from '/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/__init__.py'>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x10408a880>
           │      └ <function Runner.run at 0x102dc42c0>
           └ <asyncio.runners.Runner object at 0x104241be0>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-pac...
           │    │     └ <cyfunction Loop.run_until_complete at 0x1046c0930>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x104241be0>
> File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x111503e00>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11220bc50>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11220bc...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x111502270>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x111503e00>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11220bc50>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11220bc...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11220bc50>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11220bc...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x1118e0c20>
          └ <fastapi.applications.FastAPI object at 0x111502270>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 177, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x112136190>
                     │    └ <function ExceptionHandler.register.<locals>.cors_custom_code_500_exception_handler at 0x1118ab420>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x1118e0c20>

  File "/Users/kathayatnk/Desktop/swipewise/src/common/exception/exception_handler.py", line 226, in cors_custom_code_500_exception_handler
    status_code = StandardResponseCode.HTTP_500.value
                  │                    └ 500
                  └ <class 'src.common.response.response_code.StandardResponseCode'>

AttributeError: 'int' object has no attribute 'value'
2025-06-06 08:49:42.107 | ERROR    |  f719b26ab5ef498da84bd84843b134b6  | Exception in ASGI application

  + Exception Group Traceback (most recent call last):
  |
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                │     │                      └ <anyio._backends._asyncio.TaskGroup object at 0x1122e98d0>
  |                │     └ <function create_task_group at 0x1041ec5e0>
  |                └ <module 'anyio' from '/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/anyio/__init__.py'>
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  |
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |           │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x11230ce00>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111d4d4...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.cors.CORSMiddleware object at 0x1118e0ad0>
    |           └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x1118e0c20>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x11230ce00>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111d4d4...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x1118e0830>, header_name='X-Request-I...
    |           └ <starlette.middleware.cors.CORSMiddleware object at 0x1118e0ad0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/asgi_correlation_id/middleware.py", line 90, in __call__
    |     await self.app(scope, receive, handle_outgoing_request)
    |           │    │   │      │        └ <function CorrelationIdMiddleware.__call__.<locals>.handle_outgoing_request at 0x11230c860>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111d4d4...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <src.middleware.state_middleware.StateMiddleware object at 0x1118e0830>
    |           └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x1118e0830>, header_name='X-Request-I...
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |          │            │            └ <function collapse_excgroups at 0x105ed6a20>
    |          │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
    |          └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
    |   File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 162, in __exit__
    |     self.gen.throw(value)
    |     │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [ResponseValidationError()])
    |     │    │   └ <method 'throw' of 'generator' objects>
    |     │    └ <generator object collapse_excgroups at 0x1121772a0>
    |     └ <contextlib._GeneratorContextManager object at 0x11220c3d0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                      │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x11230c9a0>
    |                      │    │             └ <starlette.middleware.base._CachedRequest object at 0x1119cac60>
    |                      │    └ <bound method StateMiddleware.dispatch of <src.middleware.state_middleware.StateMiddleware object at 0x1118e0830>>
    |                      └ <src.middleware.state_middleware.StateMiddleware object at 0x1118e0830>
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/src/middleware/state_middleware.py", line 24, in dispatch
    |     response = await call_next(request)
    |                      │         └ <starlette.middleware.base._CachedRequest object at 0x1119cac60>
    |                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x11230c9a0>
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 156, in call_next
    |     raise app_exc
    |           └ ResponseValidationError()
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |           │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x11230c720>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x111d2cfe0>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x1118e06e0>
    |           └ <src.middleware.state_middleware.StateMiddleware object at 0x1118e0830>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/authentication.py", line 48, in __call__
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x11230c720>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x111d2cfe0>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x1118e0590>
    |           └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x1118e06e0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |           │                            │    │    │     │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x11230c720>
    |           │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x111d2cfe0>
    |           │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │                            │    │    └ <starlette.requests.Request object at 0x1122e97f0>
    |           │                            │    └ <fastapi.routing.APIRouter object at 0x1115d2150>
    |           │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x1118e0590>
    |           └ <function wrap_app_handling_exceptions at 0x1060c8400>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |           │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11230d120>
    |           │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x111d2cfe0>
    |           │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           └ <fastapi.routing.APIRouter object at 0x1115d2150>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |           │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11230d120>
    |           │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x111d2cfe0>
    |           │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x1115d2150>>
    |           └ <fastapi.routing.APIRouter object at 0x1115d2150>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |           │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11230d120>
    |           │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x111d2cfe0>
    |           │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │     └ <function Route.handle at 0x1060ca200>
    |           └ APIRoute(path='/api/v1/auth/refresh_token', name='refresh_token', methods=['POST'])
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11230d120>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x111d2cfe0>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <function request_response.<locals>.app at 0x11180e980>
    |           └ APIRoute(path='/api/v1/auth/refresh_token', name='refresh_token', methods=['POST'])
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |           │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11230d120>
    |           │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x111d2cfe0>
    |           │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │                            │    └ <starlette.requests.Request object at 0x112175640>
    |           │                            └ <function request_response.<locals>.app.<locals>.app at 0x11230d1c0>
    |           └ <function wrap_app_handling_exceptions at 0x1060c8400>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |           │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11230d300>
    |           │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x111d2cfe0>
    |           │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           └ <function request_response.<locals>.app.<locals>.app at 0x11230d1c0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    |     response = await f(request)
    |                      │ └ <starlette.requests.Request object at 0x112175640>
    |                      └ <function get_request_handler.<locals>.app at 0x11180e8e0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    |     content = await serialize_response(
    |                     └ <function serialize_response at 0x1054bf880>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    |     raise ResponseValidationError(
    |           └ <class 'fastapi.exceptions.ResponseValidationError'>
    |
    | fastapi.exceptions.ResponseValidationError: 2 validation errors:
    |   {'type': 'model_attributes_type', 'loc': ('response', 'data', 'access_token'), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzZXNzaW9uX3V1aWQiOiIzMDIyMjRhYi1iZWJlLTQwODEtOTczMS0xNWVkMDFmYmI2NDgiLCJleHAiOjE3NDkyNjU0MTAsInN1YiI6OH0.TYVyhfstfRr3jScTxTaNlaa5lwDgSPeYqDcafPoPB3A'}
    |   {'type': 'missing', 'loc': ('response', 'data', 'refresh_token'), 'msg': 'Field required', 'input': AccessToken(access_token='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzZXNzaW9uX3V1aWQiOiIzMDIyMjRhYi1iZWJlLTQwODEtOTczMS0xNWVkMDFmYmI2NDgiLCJleHAiOjE3NDkyNjU0MTAsInN1YiI6OH0.TYVyhfstfRr3jScTxTaNlaa5lwDgSPeYqDcafPoPB3A', access_token_expire_time=datetime.datetime(2025, 6, 7, 8, 48, 30, 995495, tzinfo=zoneinfo.ZoneInfo(key='Asia/Kathmandu')), session_uuid='302224ab-bebe-4081-9731-15ed01fbb648')}
    |
    +------------------------------------


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x11230ce00>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111d4d4...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x1118e0ad0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x1118e0c20>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x11230ce00>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111d4d4...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x1118e0830>, header_name='X-Request-I...
          └ <starlette.middleware.cors.CORSMiddleware object at 0x1118e0ad0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/asgi_correlation_id/middleware.py", line 90, in __call__
    await self.app(scope, receive, handle_outgoing_request)
          │    │   │      │        └ <function CorrelationIdMiddleware.__call__.<locals>.handle_outgoing_request at 0x11230c860>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111d4d4...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <src.middleware.state_middleware.StateMiddleware object at 0x1118e0830>
          └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x1118e0830>, header_name='X-Request-I...
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
         │            │            └ <function collapse_excgroups at 0x105ed6a20>
         │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
         └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [ResponseValidationError()])
    │    │   └ <method 'throw' of 'generator' objects>
    │    └ <generator object collapse_excgroups at 0x1121772a0>
    └ <contextlib._GeneratorContextManager object at 0x11220c3d0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    raise exc
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x11230c9a0>
                     │    │             └ <starlette.middleware.base._CachedRequest object at 0x1119cac60>
                     │    └ <bound method StateMiddleware.dispatch of <src.middleware.state_middleware.StateMiddleware object at 0x1118e0830>>
                     └ <src.middleware.state_middleware.StateMiddleware object at 0x1118e0830>

  File "/Users/kathayatnk/Desktop/swipewise/src/middleware/state_middleware.py", line 24, in dispatch
    response = await call_next(request)
                     │         └ <starlette.middleware.base._CachedRequest object at 0x1119cac60>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x11230c9a0>

  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 156, in call_next
    raise app_exc
          └ ResponseValidationError()
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x11230c720>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x111d2cfe0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x1118e06e0>
          └ <src.middleware.state_middleware.StateMiddleware object at 0x1118e0830>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/authentication.py", line 48, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x11230c720>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x111d2cfe0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x1118e0590>
          └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x1118e06e0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x11230c720>
          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x111d2cfe0>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x1122e97f0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x1115d2150>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x1118e0590>
          └ <function wrap_app_handling_exceptions at 0x1060c8400>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11230d120>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x111d2cfe0>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          └ <fastapi.routing.APIRouter object at 0x1115d2150>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11230d120>
          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x111d2cfe0>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x1115d2150>>
          └ <fastapi.routing.APIRouter object at 0x1115d2150>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11230d120>
          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x111d2cfe0>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │     └ <function Route.handle at 0x1060ca200>
          └ APIRoute(path='/api/v1/auth/refresh_token', name='refresh_token', methods=['POST'])
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11230d120>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x111d2cfe0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <function request_response.<locals>.app at 0x11180e980>
          └ APIRoute(path='/api/v1/auth/refresh_token', name='refresh_token', methods=['POST'])
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11230d120>
          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x111d2cfe0>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x112175640>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x11230d1c0>
          └ <function wrap_app_handling_exceptions at 0x1060c8400>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11230d300>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x111d2cfe0>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x11230d1c0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x112175640>
                     └ <function get_request_handler.<locals>.app at 0x11180e8e0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    content = await serialize_response(
                    └ <function serialize_response at 0x1054bf880>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    raise ResponseValidationError(
          └ <class 'fastapi.exceptions.ResponseValidationError'>

fastapi.exceptions.ResponseValidationError: 2 validation errors:
  {'type': 'model_attributes_type', 'loc': ('response', 'data', 'access_token'), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzZXNzaW9uX3V1aWQiOiIzMDIyMjRhYi1iZWJlLTQwODEtOTczMS0xNWVkMDFmYmI2NDgiLCJleHAiOjE3NDkyNjU0MTAsInN1YiI6OH0.TYVyhfstfRr3jScTxTaNlaa5lwDgSPeYqDcafPoPB3A'}
  {'type': 'missing', 'loc': ('response', 'data', 'refresh_token'), 'msg': 'Field required', 'input': AccessToken(access_token='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzZXNzaW9uX3V1aWQiOiIzMDIyMjRhYi1iZWJlLTQwODEtOTczMS0xNWVkMDFmYmI2NDgiLCJleHAiOjE3NDkyNjU0MTAsInN1YiI6OH0.TYVyhfstfRr3jScTxTaNlaa5lwDgSPeYqDcafPoPB3A', access_token_expire_time=datetime.datetime(2025, 6, 7, 8, 48, 30, 995495, tzinfo=zoneinfo.ZoneInfo(key='Asia/Kathmandu')), session_uuid='302224ab-bebe-4081-9731-15ed01fbb648')}



During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 5
               │     └ 12
               └ <function _main at 0x102c4e520>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 5
           │    └ <function BaseProcess._bootstrap at 0x102bf7f60>
           └ <SpawnProcess name='SpawnProcess-7' parent=79052 started>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x102bf74c0>
    └ <SpawnProcess name='SpawnProcess-7' parent=79052 started>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x104241160>, 'target': <bound method Server.run of <uvicorn.server.Server object...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-7' parent=79052 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-7' parent=79052 started>
    │    └ <function subprocess_started at 0x104096f20>
    └ <SpawnProcess name='SpawnProcess-7' parent=79052 started>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=2, type=1, proto=0, laddr=('127.0.0.1', 8080)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x1042412b0>>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=4, family=2, type=1, proto=0, laddr=('127.0.0.1', 8080)>]
           │       │   │    └ <function Server.serve at 0x104095b20>
           │       │   └ <uvicorn.server.Server object at 0x1042412b0>
           │       └ <function run at 0x102d71d00>
           └ <module 'asyncio' from '/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/__init__.py'>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x10408a880>
           │      └ <function Runner.run at 0x102dc42c0>
           └ <asyncio.runners.Runner object at 0x104241be0>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-pac...
           │    │     └ <cyfunction Loop.run_until_complete at 0x1046c0930>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x104241be0>
> File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x111503e00>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111d4d400>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111d4d4...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x111502270>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x111503e00>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111d4d400>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111d4d4...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111d4d400>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111d4d4...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x1118e0c20>
          └ <fastapi.applications.FastAPI object at 0x111502270>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 177, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x1114e2bd0>
                     │    └ <function ExceptionHandler.register.<locals>.cors_custom_code_500_exception_handler at 0x1118ab420>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x1118e0c20>

  File "/Users/kathayatnk/Desktop/swipewise/src/common/exception/exception_handler.py", line 226, in cors_custom_code_500_exception_handler
    status_code = StandardResponseCode.HTTP_500.value
                  │                    └ 500
                  └ <class 'src.common.response.response_code.StandardResponseCode'>

AttributeError: 'int' object has no attribute 'value'
2025-06-06 08:50:48.692 | ERROR    |  06185e29111145e8a31f0a3d2da97a4a  | Exception in ASGI application

  + Exception Group Traceback (most recent call last):
  |
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                │     │                      └ <anyio._backends._asyncio.TaskGroup object at 0x11229ebd0>
  |                │     └ <function create_task_group at 0x1041ec5e0>
  |                └ <module 'anyio' from '/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/anyio/__init__.py'>
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  |
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |           │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x11230c5e0>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111d4ce...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.cors.CORSMiddleware object at 0x1118e0ad0>
    |           └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x1118e0c20>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x11230c5e0>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111d4ce...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x1118e0830>, header_name='X-Request-I...
    |           └ <starlette.middleware.cors.CORSMiddleware object at 0x1118e0ad0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/asgi_correlation_id/middleware.py", line 90, in __call__
    |     await self.app(scope, receive, handle_outgoing_request)
    |           │    │   │      │        └ <function CorrelationIdMiddleware.__call__.<locals>.handle_outgoing_request at 0x11230cfe0>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111d4ce...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <src.middleware.state_middleware.StateMiddleware object at 0x1118e0830>
    |           └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x1118e0830>, header_name='X-Request-I...
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |          │            │            └ <function collapse_excgroups at 0x105ed6a20>
    |          │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
    |          └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
    |   File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 162, in __exit__
    |     self.gen.throw(value)
    |     │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [ResponseValidationError()])
    |     │    │   └ <method 'throw' of 'generator' objects>
    |     │    └ <generator object collapse_excgroups at 0x1122f9700>
    |     └ <contextlib._GeneratorContextManager object at 0x1121e3770>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                      │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x11230e700>
    |                      │    │             └ <starlette.middleware.base._CachedRequest object at 0x112221010>
    |                      │    └ <bound method StateMiddleware.dispatch of <src.middleware.state_middleware.StateMiddleware object at 0x1118e0830>>
    |                      └ <src.middleware.state_middleware.StateMiddleware object at 0x1118e0830>
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/src/middleware/state_middleware.py", line 24, in dispatch
    |     response = await call_next(request)
    |                      │         └ <starlette.middleware.base._CachedRequest object at 0x112221010>
    |                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x11230e700>
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 156, in call_next
    |     raise app_exc
    |           └ ResponseValidationError()
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |           │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x11230ca40>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11230e660>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x1118e06e0>
    |           └ <src.middleware.state_middleware.StateMiddleware object at 0x1118e0830>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/authentication.py", line 48, in __call__
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x11230ca40>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11230e660>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x1118e0590>
    |           └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x1118e06e0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |           │                            │    │    │     │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x11230ca40>
    |           │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11230e660>
    |           │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │                            │    │    └ <starlette.requests.Request object at 0x11229cdd0>
    |           │                            │    └ <fastapi.routing.APIRouter object at 0x1115d2150>
    |           │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x1118e0590>
    |           └ <function wrap_app_handling_exceptions at 0x1060c8400>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |           │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11230ed40>
    |           │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11230e660>
    |           │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           └ <fastapi.routing.APIRouter object at 0x1115d2150>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |           │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11230ed40>
    |           │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11230e660>
    |           │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x1115d2150>>
    |           └ <fastapi.routing.APIRouter object at 0x1115d2150>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |           │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11230ed40>
    |           │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11230e660>
    |           │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │     └ <function Route.handle at 0x1060ca200>
    |           └ APIRoute(path='/api/v1/auth/refresh_token', name='refresh_token', methods=['POST'])
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11230ed40>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11230e660>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <function request_response.<locals>.app at 0x11180e980>
    |           └ APIRoute(path='/api/v1/auth/refresh_token', name='refresh_token', methods=['POST'])
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |           │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11230ed40>
    |           │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11230e660>
    |           │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │                            │    └ <starlette.requests.Request object at 0x11222fa10>
    |           │                            └ <function request_response.<locals>.app.<locals>.app at 0x11230ede0>
    |           └ <function wrap_app_handling_exceptions at 0x1060c8400>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |           │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11230ef20>
    |           │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11230e660>
    |           │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           └ <function request_response.<locals>.app.<locals>.app at 0x11230ede0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    |     response = await f(request)
    |                      │ └ <starlette.requests.Request object at 0x11222fa10>
    |                      └ <function get_request_handler.<locals>.app at 0x11180e8e0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    |     content = await serialize_response(
    |                     └ <function serialize_response at 0x1054bf880>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    |     raise ResponseValidationError(
    |           └ <class 'fastapi.exceptions.ResponseValidationError'>
    |
    | fastapi.exceptions.ResponseValidationError: 2 validation errors:
    |   {'type': 'model_attributes_type', 'loc': ('response', 'data', 'access_token'), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzZXNzaW9uX3V1aWQiOiI2ODk5Yzk4Yy05MjU3LTRhMTEtYjRmZS05NTJhZDlhYWRiODIiLCJleHAiOjE3NDkyNjU1MzEsInN1YiI6OH0.oKk3Pa-iCEWvejjzUJsr6kXOOhwOuQokVTTd4922kSA'}
    |   {'type': 'missing', 'loc': ('response', 'data', 'refresh_token'), 'msg': 'Field required', 'input': AccessToken(access_token='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzZXNzaW9uX3V1aWQiOiI2ODk5Yzk4Yy05MjU3LTRhMTEtYjRmZS05NTJhZDlhYWRiODIiLCJleHAiOjE3NDkyNjU1MzEsInN1YiI6OH0.oKk3Pa-iCEWvejjzUJsr6kXOOhwOuQokVTTd4922kSA', access_token_expire_time=datetime.datetime(2025, 6, 7, 8, 50, 31, 84057, tzinfo=zoneinfo.ZoneInfo(key='Asia/Kathmandu')), session_uuid='6899c98c-9257-4a11-b4fe-952ad9aadb82')}
    |
    +------------------------------------


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x11230c5e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111d4ce...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x1118e0ad0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x1118e0c20>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x11230c5e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111d4ce...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x1118e0830>, header_name='X-Request-I...
          └ <starlette.middleware.cors.CORSMiddleware object at 0x1118e0ad0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/asgi_correlation_id/middleware.py", line 90, in __call__
    await self.app(scope, receive, handle_outgoing_request)
          │    │   │      │        └ <function CorrelationIdMiddleware.__call__.<locals>.handle_outgoing_request at 0x11230cfe0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111d4ce...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <src.middleware.state_middleware.StateMiddleware object at 0x1118e0830>
          └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x1118e0830>, header_name='X-Request-I...
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
         │            │            └ <function collapse_excgroups at 0x105ed6a20>
         │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
         └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [ResponseValidationError()])
    │    │   └ <method 'throw' of 'generator' objects>
    │    └ <generator object collapse_excgroups at 0x1122f9700>
    └ <contextlib._GeneratorContextManager object at 0x1121e3770>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    raise exc
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x11230e700>
                     │    │             └ <starlette.middleware.base._CachedRequest object at 0x112221010>
                     │    └ <bound method StateMiddleware.dispatch of <src.middleware.state_middleware.StateMiddleware object at 0x1118e0830>>
                     └ <src.middleware.state_middleware.StateMiddleware object at 0x1118e0830>

  File "/Users/kathayatnk/Desktop/swipewise/src/middleware/state_middleware.py", line 24, in dispatch
    response = await call_next(request)
                     │         └ <starlette.middleware.base._CachedRequest object at 0x112221010>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x11230e700>

  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 156, in call_next
    raise app_exc
          └ ResponseValidationError()
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x11230ca40>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11230e660>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x1118e06e0>
          └ <src.middleware.state_middleware.StateMiddleware object at 0x1118e0830>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/authentication.py", line 48, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x11230ca40>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11230e660>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x1118e0590>
          └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x1118e06e0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x11230ca40>
          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11230e660>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x11229cdd0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x1115d2150>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x1118e0590>
          └ <function wrap_app_handling_exceptions at 0x1060c8400>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11230ed40>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11230e660>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          └ <fastapi.routing.APIRouter object at 0x1115d2150>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11230ed40>
          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11230e660>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x1115d2150>>
          └ <fastapi.routing.APIRouter object at 0x1115d2150>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11230ed40>
          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11230e660>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │     └ <function Route.handle at 0x1060ca200>
          └ APIRoute(path='/api/v1/auth/refresh_token', name='refresh_token', methods=['POST'])
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11230ed40>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11230e660>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <function request_response.<locals>.app at 0x11180e980>
          └ APIRoute(path='/api/v1/auth/refresh_token', name='refresh_token', methods=['POST'])
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11230ed40>
          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11230e660>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x11222fa10>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x11230ede0>
          └ <function wrap_app_handling_exceptions at 0x1060c8400>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11230ef20>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11230e660>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x11230ede0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x11222fa10>
                     └ <function get_request_handler.<locals>.app at 0x11180e8e0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    content = await serialize_response(
                    └ <function serialize_response at 0x1054bf880>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    raise ResponseValidationError(
          └ <class 'fastapi.exceptions.ResponseValidationError'>

fastapi.exceptions.ResponseValidationError: 2 validation errors:
  {'type': 'model_attributes_type', 'loc': ('response', 'data', 'access_token'), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzZXNzaW9uX3V1aWQiOiI2ODk5Yzk4Yy05MjU3LTRhMTEtYjRmZS05NTJhZDlhYWRiODIiLCJleHAiOjE3NDkyNjU1MzEsInN1YiI6OH0.oKk3Pa-iCEWvejjzUJsr6kXOOhwOuQokVTTd4922kSA'}
  {'type': 'missing', 'loc': ('response', 'data', 'refresh_token'), 'msg': 'Field required', 'input': AccessToken(access_token='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzZXNzaW9uX3V1aWQiOiI2ODk5Yzk4Yy05MjU3LTRhMTEtYjRmZS05NTJhZDlhYWRiODIiLCJleHAiOjE3NDkyNjU1MzEsInN1YiI6OH0.oKk3Pa-iCEWvejjzUJsr6kXOOhwOuQokVTTd4922kSA', access_token_expire_time=datetime.datetime(2025, 6, 7, 8, 50, 31, 84057, tzinfo=zoneinfo.ZoneInfo(key='Asia/Kathmandu')), session_uuid='6899c98c-9257-4a11-b4fe-952ad9aadb82')}



During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 5
               │     └ 12
               └ <function _main at 0x102c4e520>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 5
           │    └ <function BaseProcess._bootstrap at 0x102bf7f60>
           └ <SpawnProcess name='SpawnProcess-7' parent=79052 started>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x102bf74c0>
    └ <SpawnProcess name='SpawnProcess-7' parent=79052 started>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x104241160>, 'target': <bound method Server.run of <uvicorn.server.Server object...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-7' parent=79052 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-7' parent=79052 started>
    │    └ <function subprocess_started at 0x104096f20>
    └ <SpawnProcess name='SpawnProcess-7' parent=79052 started>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=2, type=1, proto=0, laddr=('127.0.0.1', 8080)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x1042412b0>>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=4, family=2, type=1, proto=0, laddr=('127.0.0.1', 8080)>]
           │       │   │    └ <function Server.serve at 0x104095b20>
           │       │   └ <uvicorn.server.Server object at 0x1042412b0>
           │       └ <function run at 0x102d71d00>
           └ <module 'asyncio' from '/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/__init__.py'>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x10408a880>
           │      └ <function Runner.run at 0x102dc42c0>
           └ <asyncio.runners.Runner object at 0x104241be0>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-pac...
           │    │     └ <cyfunction Loop.run_until_complete at 0x1046c0930>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x104241be0>
> File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x111503e00>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111d4ce60>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111d4ce...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x111502270>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x111503e00>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111d4ce60>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111d4ce...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111d4ce60>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111d4ce...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x1118e0c20>
          └ <fastapi.applications.FastAPI object at 0x111502270>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 177, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x11222f6a0>
                     │    └ <function ExceptionHandler.register.<locals>.cors_custom_code_500_exception_handler at 0x1118ab420>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x1118e0c20>

  File "/Users/kathayatnk/Desktop/swipewise/src/common/exception/exception_handler.py", line 226, in cors_custom_code_500_exception_handler
    status_code = StandardResponseCode.HTTP_500.value
                  │                    └ 500
                  └ <class 'src.common.response.response_code.StandardResponseCode'>

AttributeError: 'int' object has no attribute 'value'
2025-06-06 08:51:20.725 | ERROR    |  1a12a81d0a1c4e92972463e7b54342f5  | Exception in ASGI application

  + Exception Group Traceback (most recent call last):
  |
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                │     │                      └ <anyio._backends._asyncio.TaskGroup object at 0x10a33c410>
  |                │     └ <function create_task_group at 0x1048d85e0>
  |                └ <module 'anyio' from '/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/anyio/__init__.py'>
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  |
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |           │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x10a3351c0>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x109d1fe...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.cors.CORSMiddleware object at 0x109ce06e0>
    |           └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x109ce0830>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x10a3351c0>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x109d1fe...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x109ce0440>, header_name='X-Request-I...
    |           └ <starlette.middleware.cors.CORSMiddleware object at 0x109ce06e0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/asgi_correlation_id/middleware.py", line 90, in __call__
    |     await self.app(scope, receive, handle_outgoing_request)
    |           │    │   │      │        └ <function CorrelationIdMiddleware.__call__.<locals>.handle_outgoing_request at 0x10a30c040>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x109d1fe...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <src.middleware.state_middleware.StateMiddleware object at 0x109ce0440>
    |           └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x109ce0440>, header_name='X-Request-I...
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |          │            │            └ <function collapse_excgroups at 0x105c1ea20>
    |          │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
    |          └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
    |   File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 162, in __exit__
    |     self.gen.throw(value)
    |     │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [ResponseValidationError()])
    |     │    │   └ <method 'throw' of 'generator' objects>
    |     │    └ <generator object collapse_excgroups at 0x10a01bed0>
    |     └ <contextlib._GeneratorContextManager object at 0x10a0e3310>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                      │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x10a30c900>
    |                      │    │             └ <starlette.middleware.base._CachedRequest object at 0x109c3f750>
    |                      │    └ <bound method StateMiddleware.dispatch of <src.middleware.state_middleware.StateMiddleware object at 0x109ce0440>>
    |                      └ <src.middleware.state_middleware.StateMiddleware object at 0x109ce0440>
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/src/middleware/state_middleware.py", line 24, in dispatch
    |     response = await call_next(request)
    |                      │         └ <starlette.middleware.base._CachedRequest object at 0x109c3f750>
    |                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x10a30c900>
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 156, in call_next
    |     raise app_exc
    |           └ ResponseValidationError()
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |           │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x10a30c860>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10a30c9a0>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x109ce02f0>
    |           └ <src.middleware.state_middleware.StateMiddleware object at 0x109ce0440>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/authentication.py", line 48, in __call__
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x10a30c860>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10a30c9a0>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x109ce01a0>
    |           └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x109ce02f0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |           │                            │    │    │     │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x10a30c860>
    |           │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10a30c9a0>
    |           │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │                            │    │    └ <starlette.requests.Request object at 0x10a0c57f0>
    |           │                            │    └ <fastapi.routing.APIRouter object at 0x109bc6550>
    |           │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x109ce01a0>
    |           └ <function wrap_app_handling_exceptions at 0x105d10400>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |           │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10a3354e0>
    |           │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10a30c9a0>
    |           │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           └ <fastapi.routing.APIRouter object at 0x109bc6550>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |           │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10a3354e0>
    |           │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10a30c9a0>
    |           │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x109bc6550>>
    |           └ <fastapi.routing.APIRouter object at 0x109bc6550>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |           │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10a3354e0>
    |           │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10a30c9a0>
    |           │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │     └ <function Route.handle at 0x105d12200>
    |           └ APIRoute(path='/api/v1/auth/refresh_token', name='refresh_token', methods=['POST'])
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10a3354e0>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10a30c9a0>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <function request_response.<locals>.app at 0x109c02980>
    |           └ APIRoute(path='/api/v1/auth/refresh_token', name='refresh_token', methods=['POST'])
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |           │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10a3354e0>
    |           │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10a30c9a0>
    |           │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │                            │    └ <starlette.requests.Request object at 0x10a33ccd0>
    |           │                            └ <function request_response.<locals>.app.<locals>.app at 0x10a3356c0>
    |           └ <function wrap_app_handling_exceptions at 0x105d10400>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |           │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10a335800>
    |           │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10a30c9a0>
    |           │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           └ <function request_response.<locals>.app.<locals>.app at 0x10a3356c0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    |     response = await f(request)
    |                      │ └ <starlette.requests.Request object at 0x10a33ccd0>
    |                      └ <function get_request_handler.<locals>.app at 0x109c028e0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    |     content = await serialize_response(
    |                     └ <function serialize_response at 0x105317880>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    |     raise ResponseValidationError(
    |           └ <class 'fastapi.exceptions.ResponseValidationError'>
    |
    | fastapi.exceptions.ResponseValidationError: 2 validation errors:
    |   {'type': 'model_attributes_type', 'loc': ('response', 'data', 'access_token'), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzZXNzaW9uX3V1aWQiOiIzZjhlN2QyYi02ZDUyLTQzOWQtOWYzYS0xYzc2MzlmNDAyZTQiLCJleHAiOjE3NDkyNjU1NzksInN1YiI6OH0.4CvvtAIrdxCbOJALcI_m52YI_L3v24fyzmR_1zp8sHA'}
    |   {'type': 'missing', 'loc': ('response', 'data', 'refresh_token'), 'msg': 'Field required', 'input': AccessToken(access_token='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzZXNzaW9uX3V1aWQiOiIzZjhlN2QyYi02ZDUyLTQzOWQtOWYzYS0xYzc2MzlmNDAyZTQiLCJleHAiOjE3NDkyNjU1NzksInN1YiI6OH0.4CvvtAIrdxCbOJALcI_m52YI_L3v24fyzmR_1zp8sHA', access_token_expire_time=datetime.datetime(2025, 6, 7, 8, 51, 19, 936917, tzinfo=zoneinfo.ZoneInfo(key='Asia/Kathmandu')), session_uuid='3f8e7d2b-6d52-439d-9f3a-1c7639f402e4')}
    |
    +------------------------------------


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x10a3351c0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x109d1fe...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x109ce06e0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x109ce0830>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x10a3351c0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x109d1fe...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x109ce0440>, header_name='X-Request-I...
          └ <starlette.middleware.cors.CORSMiddleware object at 0x109ce06e0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/asgi_correlation_id/middleware.py", line 90, in __call__
    await self.app(scope, receive, handle_outgoing_request)
          │    │   │      │        └ <function CorrelationIdMiddleware.__call__.<locals>.handle_outgoing_request at 0x10a30c040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x109d1fe...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <src.middleware.state_middleware.StateMiddleware object at 0x109ce0440>
          └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x109ce0440>, header_name='X-Request-I...
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
         │            │            └ <function collapse_excgroups at 0x105c1ea20>
         │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
         └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [ResponseValidationError()])
    │    │   └ <method 'throw' of 'generator' objects>
    │    └ <generator object collapse_excgroups at 0x10a01bed0>
    └ <contextlib._GeneratorContextManager object at 0x10a0e3310>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    raise exc
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x10a30c900>
                     │    │             └ <starlette.middleware.base._CachedRequest object at 0x109c3f750>
                     │    └ <bound method StateMiddleware.dispatch of <src.middleware.state_middleware.StateMiddleware object at 0x109ce0440>>
                     └ <src.middleware.state_middleware.StateMiddleware object at 0x109ce0440>

  File "/Users/kathayatnk/Desktop/swipewise/src/middleware/state_middleware.py", line 24, in dispatch
    response = await call_next(request)
                     │         └ <starlette.middleware.base._CachedRequest object at 0x109c3f750>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x10a30c900>

  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 156, in call_next
    raise app_exc
          └ ResponseValidationError()
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x10a30c860>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10a30c9a0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x109ce02f0>
          └ <src.middleware.state_middleware.StateMiddleware object at 0x109ce0440>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/authentication.py", line 48, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x10a30c860>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10a30c9a0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x109ce01a0>
          └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x109ce02f0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x10a30c860>
          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10a30c9a0>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x10a0c57f0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x109bc6550>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x109ce01a0>
          └ <function wrap_app_handling_exceptions at 0x105d10400>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10a3354e0>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10a30c9a0>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          └ <fastapi.routing.APIRouter object at 0x109bc6550>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10a3354e0>
          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10a30c9a0>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x109bc6550>>
          └ <fastapi.routing.APIRouter object at 0x109bc6550>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10a3354e0>
          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10a30c9a0>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │     └ <function Route.handle at 0x105d12200>
          └ APIRoute(path='/api/v1/auth/refresh_token', name='refresh_token', methods=['POST'])
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10a3354e0>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10a30c9a0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <function request_response.<locals>.app at 0x109c02980>
          └ APIRoute(path='/api/v1/auth/refresh_token', name='refresh_token', methods=['POST'])
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10a3354e0>
          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10a30c9a0>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x10a33ccd0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x10a3356c0>
          └ <function wrap_app_handling_exceptions at 0x105d10400>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10a335800>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10a30c9a0>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x10a3356c0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x10a33ccd0>
                     └ <function get_request_handler.<locals>.app at 0x109c028e0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    content = await serialize_response(
                    └ <function serialize_response at 0x105317880>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    raise ResponseValidationError(
          └ <class 'fastapi.exceptions.ResponseValidationError'>

fastapi.exceptions.ResponseValidationError: 2 validation errors:
  {'type': 'model_attributes_type', 'loc': ('response', 'data', 'access_token'), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzZXNzaW9uX3V1aWQiOiIzZjhlN2QyYi02ZDUyLTQzOWQtOWYzYS0xYzc2MzlmNDAyZTQiLCJleHAiOjE3NDkyNjU1NzksInN1YiI6OH0.4CvvtAIrdxCbOJALcI_m52YI_L3v24fyzmR_1zp8sHA'}
  {'type': 'missing', 'loc': ('response', 'data', 'refresh_token'), 'msg': 'Field required', 'input': AccessToken(access_token='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzZXNzaW9uX3V1aWQiOiIzZjhlN2QyYi02ZDUyLTQzOWQtOWYzYS0xYzc2MzlmNDAyZTQiLCJleHAiOjE3NDkyNjU1NzksInN1YiI6OH0.4CvvtAIrdxCbOJALcI_m52YI_L3v24fyzmR_1zp8sHA', access_token_expire_time=datetime.datetime(2025, 6, 7, 8, 51, 19, 936917, tzinfo=zoneinfo.ZoneInfo(key='Asia/Kathmandu')), session_uuid='3f8e7d2b-6d52-439d-9f3a-1c7639f402e4')}



During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 5
               │     └ 8
               └ <function _main at 0x1043da520>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 5
           │    └ <function BaseProcess._bootstrap at 0x104383ec0>
           └ <SpawnProcess name='SpawnProcess-8' parent=79052 started>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x104383420>
    └ <SpawnProcess name='SpawnProcess-8' parent=79052 started>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x10494cec0>, 'target': <bound method Server.run of <uvicorn.server.Server object...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-8' parent=79052 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-8' parent=79052 started>
    │    └ <function subprocess_started at 0x10474af20>
    └ <SpawnProcess name='SpawnProcess-8' parent=79052 started>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=2, type=1, proto=0, laddr=('127.0.0.1', 8080)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x10494d010>>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=4, family=2, type=1, proto=0, laddr=('127.0.0.1', 8080)>]
           │       │   │    └ <function Server.serve at 0x104749b20>
           │       │   └ <uvicorn.server.Server object at 0x10494d010>
           │       └ <function run at 0x104515d00>
           └ <module 'asyncio' from '/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/__init__.py'>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x1048caf80>
           │      └ <function Runner.run at 0x1045642c0>
           └ <asyncio.runners.Runner object at 0x10494d940>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-pac...
           │    │     └ <cyfunction Loop.run_until_complete at 0x104bcc790>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x10494d940>
> File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x109b13a10>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x109d1fed0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x109d1fe...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x109b11e80>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x109b13a10>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x109d1fed0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x109d1fe...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x109d1fed0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x109d1fe...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x109ce0830>
          └ <fastapi.applications.FastAPI object at 0x109b11e80>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 177, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x10a33cf50>
                     │    └ <function ExceptionHandler.register.<locals>.cors_custom_code_500_exception_handler at 0x109caf4c0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x109ce0830>

  File "/Users/kathayatnk/Desktop/swipewise/src/common/exception/exception_handler.py", line 226, in cors_custom_code_500_exception_handler
    status_code = StandardResponseCode.HTTP_500.value
                  │                    └ 500
                  └ <class 'src.common.response.response_code.StandardResponseCode'>

AttributeError: 'int' object has no attribute 'value'
2025-06-06 08:51:31.885 | ERROR    |  ce930018cc224db6ad6b15998425685c  | Exception in ASGI application

  + Exception Group Traceback (most recent call last):
  |
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                │     │                      └ <anyio._backends._asyncio.TaskGroup object at 0x10a431810>
  |                │     └ <function create_task_group at 0x1048d85e0>
  |                └ <module 'anyio' from '/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/anyio/__init__.py'>
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  |
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |           │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x10a4ed120>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10a0962...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.cors.CORSMiddleware object at 0x109ce06e0>
    |           └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x109ce0830>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x10a4ed120>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10a0962...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x109ce0440>, header_name='X-Request-I...
    |           └ <starlette.middleware.cors.CORSMiddleware object at 0x109ce06e0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/asgi_correlation_id/middleware.py", line 90, in __call__
    |     await self.app(scope, receive, handle_outgoing_request)
    |           │    │   │      │        └ <function CorrelationIdMiddleware.__call__.<locals>.handle_outgoing_request at 0x10a303a60>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10a0962...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <src.middleware.state_middleware.StateMiddleware object at 0x109ce0440>
    |           └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x109ce0440>, header_name='X-Request-I...
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |          │            │            └ <function collapse_excgroups at 0x105c1ea20>
    |          │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
    |          └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
    |   File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 162, in __exit__
    |     self.gen.throw(value)
    |     │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [ResponseValidationError()])
    |     │    │   └ <method 'throw' of 'generator' objects>
    |     │    └ <generator object collapse_excgroups at 0x10a32f850>
    |     └ <contextlib._GeneratorContextManager object at 0x10a0e34d0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                      │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x10a4efc40>
    |                      │    │             └ <starlette.middleware.base._CachedRequest object at 0x10a097e10>
    |                      │    └ <bound method StateMiddleware.dispatch of <src.middleware.state_middleware.StateMiddleware object at 0x109ce0440>>
    |                      └ <src.middleware.state_middleware.StateMiddleware object at 0x109ce0440>
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/src/middleware/state_middleware.py", line 24, in dispatch
    |     response = await call_next(request)
    |                      │         └ <starlette.middleware.base._CachedRequest object at 0x10a097e10>
    |                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x10a4efc40>
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 156, in call_next
    |     raise app_exc
    |           └ ResponseValidationError()
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |           │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x10a4ed300>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10a4ed080>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x109ce02f0>
    |           └ <src.middleware.state_middleware.StateMiddleware object at 0x109ce0440>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/authentication.py", line 48, in __call__
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x10a4ed300>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10a4ed080>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x109ce01a0>
    |           └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x109ce02f0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |           │                            │    │    │     │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x10a4ed300>
    |           │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10a4ed080>
    |           │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │                            │    │    └ <starlette.requests.Request object at 0x10a431940>
    |           │                            │    └ <fastapi.routing.APIRouter object at 0x109bc6550>
    |           │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x109ce01a0>
    |           └ <function wrap_app_handling_exceptions at 0x105d10400>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |           │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10a4efce0>
    |           │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10a4ed080>
    |           │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           └ <fastapi.routing.APIRouter object at 0x109bc6550>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |           │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10a4efce0>
    |           │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10a4ed080>
    |           │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x109bc6550>>
    |           └ <fastapi.routing.APIRouter object at 0x109bc6550>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |           │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10a4efce0>
    |           │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10a4ed080>
    |           │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │     └ <function Route.handle at 0x105d12200>
    |           └ APIRoute(path='/api/v1/auth/refresh_token', name='refresh_token', methods=['POST'])
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10a4efce0>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10a4ed080>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <function request_response.<locals>.app at 0x109c02980>
    |           └ APIRoute(path='/api/v1/auth/refresh_token', name='refresh_token', methods=['POST'])
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |           │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10a4efce0>
    |           │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10a4ed080>
    |           │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │                            │    └ <starlette.requests.Request object at 0x10a4303e0>
    |           │                            └ <function request_response.<locals>.app.<locals>.app at 0x10a4efd80>
    |           └ <function wrap_app_handling_exceptions at 0x105d10400>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |           │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10a4efec0>
    |           │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10a4ed080>
    |           │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           └ <function request_response.<locals>.app.<locals>.app at 0x10a4efd80>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    |     response = await f(request)
    |                      │ └ <starlette.requests.Request object at 0x10a4303e0>
    |                      └ <function get_request_handler.<locals>.app at 0x109c028e0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    |     content = await serialize_response(
    |                     └ <function serialize_response at 0x105317880>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    |     raise ResponseValidationError(
    |           └ <class 'fastapi.exceptions.ResponseValidationError'>
    |
    | fastapi.exceptions.ResponseValidationError: 2 validation errors:
    |   {'type': 'model_attributes_type', 'loc': ('response', 'data', 'access_token'), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzZXNzaW9uX3V1aWQiOiI1YzY4YzA4NC1jMzdjLTQ2YTAtYmJiMS05Nzc1ZWJkZDZiOTUiLCJleHAiOjE3NDkyNjU1OTAsInN1YiI6OH0.AoZ1zYPlnWm3N_8UdOPFlwBBKUl4JXF0ohx9yQtY1Wk'}
    |   {'type': 'missing', 'loc': ('response', 'data', 'refresh_token'), 'msg': 'Field required', 'input': AccessToken(access_token='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzZXNzaW9uX3V1aWQiOiI1YzY4YzA4NC1jMzdjLTQ2YTAtYmJiMS05Nzc1ZWJkZDZiOTUiLCJleHAiOjE3NDkyNjU1OTAsInN1YiI6OH0.AoZ1zYPlnWm3N_8UdOPFlwBBKUl4JXF0ohx9yQtY1Wk', access_token_expire_time=datetime.datetime(2025, 6, 7, 8, 51, 30, 897831, tzinfo=zoneinfo.ZoneInfo(key='Asia/Kathmandu')), session_uuid='5c68c084-c37c-46a0-bbb1-9775ebdd6b95')}
    |
    +------------------------------------


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x10a4ed120>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10a0962...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x109ce06e0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x109ce0830>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x10a4ed120>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10a0962...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x109ce0440>, header_name='X-Request-I...
          └ <starlette.middleware.cors.CORSMiddleware object at 0x109ce06e0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/asgi_correlation_id/middleware.py", line 90, in __call__
    await self.app(scope, receive, handle_outgoing_request)
          │    │   │      │        └ <function CorrelationIdMiddleware.__call__.<locals>.handle_outgoing_request at 0x10a303a60>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10a0962...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <src.middleware.state_middleware.StateMiddleware object at 0x109ce0440>
          └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x109ce0440>, header_name='X-Request-I...
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
         │            │            └ <function collapse_excgroups at 0x105c1ea20>
         │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
         └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [ResponseValidationError()])
    │    │   └ <method 'throw' of 'generator' objects>
    │    └ <generator object collapse_excgroups at 0x10a32f850>
    └ <contextlib._GeneratorContextManager object at 0x10a0e34d0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    raise exc
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x10a4efc40>
                     │    │             └ <starlette.middleware.base._CachedRequest object at 0x10a097e10>
                     │    └ <bound method StateMiddleware.dispatch of <src.middleware.state_middleware.StateMiddleware object at 0x109ce0440>>
                     └ <src.middleware.state_middleware.StateMiddleware object at 0x109ce0440>

  File "/Users/kathayatnk/Desktop/swipewise/src/middleware/state_middleware.py", line 24, in dispatch
    response = await call_next(request)
                     │         └ <starlette.middleware.base._CachedRequest object at 0x10a097e10>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x10a4efc40>

  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 156, in call_next
    raise app_exc
          └ ResponseValidationError()
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x10a4ed300>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10a4ed080>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x109ce02f0>
          └ <src.middleware.state_middleware.StateMiddleware object at 0x109ce0440>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/authentication.py", line 48, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x10a4ed300>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10a4ed080>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x109ce01a0>
          └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x109ce02f0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x10a4ed300>
          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10a4ed080>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x10a431940>
          │                            │    └ <fastapi.routing.APIRouter object at 0x109bc6550>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x109ce01a0>
          └ <function wrap_app_handling_exceptions at 0x105d10400>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10a4efce0>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10a4ed080>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          └ <fastapi.routing.APIRouter object at 0x109bc6550>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10a4efce0>
          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10a4ed080>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x109bc6550>>
          └ <fastapi.routing.APIRouter object at 0x109bc6550>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10a4efce0>
          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10a4ed080>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │     └ <function Route.handle at 0x105d12200>
          └ APIRoute(path='/api/v1/auth/refresh_token', name='refresh_token', methods=['POST'])
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10a4efce0>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10a4ed080>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <function request_response.<locals>.app at 0x109c02980>
          └ APIRoute(path='/api/v1/auth/refresh_token', name='refresh_token', methods=['POST'])
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10a4efce0>
          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10a4ed080>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x10a4303e0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x10a4efd80>
          └ <function wrap_app_handling_exceptions at 0x105d10400>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10a4efec0>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10a4ed080>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x10a4efd80>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x10a4303e0>
                     └ <function get_request_handler.<locals>.app at 0x109c028e0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    content = await serialize_response(
                    └ <function serialize_response at 0x105317880>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    raise ResponseValidationError(
          └ <class 'fastapi.exceptions.ResponseValidationError'>

fastapi.exceptions.ResponseValidationError: 2 validation errors:
  {'type': 'model_attributes_type', 'loc': ('response', 'data', 'access_token'), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzZXNzaW9uX3V1aWQiOiI1YzY4YzA4NC1jMzdjLTQ2YTAtYmJiMS05Nzc1ZWJkZDZiOTUiLCJleHAiOjE3NDkyNjU1OTAsInN1YiI6OH0.AoZ1zYPlnWm3N_8UdOPFlwBBKUl4JXF0ohx9yQtY1Wk'}
  {'type': 'missing', 'loc': ('response', 'data', 'refresh_token'), 'msg': 'Field required', 'input': AccessToken(access_token='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzZXNzaW9uX3V1aWQiOiI1YzY4YzA4NC1jMzdjLTQ2YTAtYmJiMS05Nzc1ZWJkZDZiOTUiLCJleHAiOjE3NDkyNjU1OTAsInN1YiI6OH0.AoZ1zYPlnWm3N_8UdOPFlwBBKUl4JXF0ohx9yQtY1Wk', access_token_expire_time=datetime.datetime(2025, 6, 7, 8, 51, 30, 897831, tzinfo=zoneinfo.ZoneInfo(key='Asia/Kathmandu')), session_uuid='5c68c084-c37c-46a0-bbb1-9775ebdd6b95')}



During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 5
               │     └ 8
               └ <function _main at 0x1043da520>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 5
           │    └ <function BaseProcess._bootstrap at 0x104383ec0>
           └ <SpawnProcess name='SpawnProcess-8' parent=79052 started>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x104383420>
    └ <SpawnProcess name='SpawnProcess-8' parent=79052 started>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x10494cec0>, 'target': <bound method Server.run of <uvicorn.server.Server object...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-8' parent=79052 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-8' parent=79052 started>
    │    └ <function subprocess_started at 0x10474af20>
    └ <SpawnProcess name='SpawnProcess-8' parent=79052 started>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=2, type=1, proto=0, laddr=('127.0.0.1', 8080)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x10494d010>>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=4, family=2, type=1, proto=0, laddr=('127.0.0.1', 8080)>]
           │       │   │    └ <function Server.serve at 0x104749b20>
           │       │   └ <uvicorn.server.Server object at 0x10494d010>
           │       └ <function run at 0x104515d00>
           └ <module 'asyncio' from '/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/__init__.py'>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x1048caf80>
           │      └ <function Runner.run at 0x1045642c0>
           └ <asyncio.runners.Runner object at 0x10494d940>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-pac...
           │    │     └ <cyfunction Loop.run_until_complete at 0x104bcc790>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x10494d940>
> File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x109b13a10>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10a0962c0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10a0962...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x109b11e80>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x109b13a10>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10a0962c0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10a0962...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10a0962c0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10a0962...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x109ce0830>
          └ <fastapi.applications.FastAPI object at 0x109b11e80>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 177, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x10a42e210>
                     │    └ <function ExceptionHandler.register.<locals>.cors_custom_code_500_exception_handler at 0x109caf4c0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x109ce0830>

  File "/Users/kathayatnk/Desktop/swipewise/src/common/exception/exception_handler.py", line 226, in cors_custom_code_500_exception_handler
    status_code = StandardResponseCode.HTTP_500.value
                  │                    └ 500
                  └ <class 'src.common.response.response_code.StandardResponseCode'>

AttributeError: 'int' object has no attribute 'value'
2025-06-06 08:52:01.825 | ERROR    |  1c4c45f259404acbb39de67e174d036f  | Exception in ASGI application

  + Exception Group Traceback (most recent call last):
  |
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                │     │                      └ <anyio._backends._asyncio.TaskGroup object at 0x11be8c2d0>
  |                │     └ <function create_task_group at 0x1060e85e0>
  |                └ <module 'anyio' from '/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/anyio/__init__.py'>
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  |
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |           │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x11bdc0540>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11ba1fd...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.cors.CORSMiddleware object at 0x11b8e06e0>
    |           └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x11b8e0830>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x11bdc0540>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11ba1fd...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x11b8e0440>, header_name='X-Request-I...
    |           └ <starlette.middleware.cors.CORSMiddleware object at 0x11b8e06e0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/asgi_correlation_id/middleware.py", line 90, in __call__
    |     await self.app(scope, receive, handle_outgoing_request)
    |           │    │   │      │        └ <function CorrelationIdMiddleware.__call__.<locals>.handle_outgoing_request at 0x11be2c7c0>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11ba1fd...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <src.middleware.state_middleware.StateMiddleware object at 0x11b8e0440>
    |           └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x11b8e0440>, header_name='X-Request-I...
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |          │            │            └ <function collapse_excgroups at 0x1076d2a20>
    |          │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
    |          └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
    |   File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 162, in __exit__
    |     self.gen.throw(value)
    |     │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [ResponseValidationError()])
    |     │    │   └ <method 'throw' of 'generator' objects>
    |     │    └ <generator object collapse_excgroups at 0x11b86a9b0>
    |     └ <contextlib._GeneratorContextManager object at 0x11bde72a0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                      │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x11be2c720>
    |                      │    │             └ <starlette.middleware.base._CachedRequest object at 0x11ba1f390>
    |                      │    └ <bound method StateMiddleware.dispatch of <src.middleware.state_middleware.StateMiddleware object at 0x11b8e0440>>
    |                      └ <src.middleware.state_middleware.StateMiddleware object at 0x11b8e0440>
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/src/middleware/state_middleware.py", line 24, in dispatch
    |     response = await call_next(request)
    |                      │         └ <starlette.middleware.base._CachedRequest object at 0x11ba1f390>
    |                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x11be2c720>
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 156, in call_next
    |     raise app_exc
    |           └ ResponseValidationError()
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |           │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x11be2c860>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11be1b1a0>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x11b8e02f0>
    |           └ <src.middleware.state_middleware.StateMiddleware object at 0x11b8e0440>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/authentication.py", line 48, in __call__
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x11be2c860>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11be1b1a0>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x11b8e01a0>
    |           └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x11b8e02f0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |           │                            │    │    │     │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x11be2c860>
    |           │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11be1b1a0>
    |           │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │                            │    │    └ <starlette.requests.Request object at 0x11bdcd550>
    |           │                            │    └ <fastapi.routing.APIRouter object at 0x11b7c6150>
    |           │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x11b8e01a0>
    |           └ <function wrap_app_handling_exceptions at 0x1079c8400>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |           │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11be7d300>
    |           │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11be1b1a0>
    |           │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           └ <fastapi.routing.APIRouter object at 0x11b7c6150>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |           │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11be7d300>
    |           │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11be1b1a0>
    |           │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x11b7c6150>>
    |           └ <fastapi.routing.APIRouter object at 0x11b7c6150>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |           │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11be7d300>
    |           │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11be1b1a0>
    |           │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │     └ <function Route.handle at 0x1079ca200>
    |           └ APIRoute(path='/api/v1/auth/refresh_token', name='refresh_token', methods=['POST'])
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11be7d300>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11be1b1a0>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <function request_response.<locals>.app at 0x11b8068e0>
    |           └ APIRoute(path='/api/v1/auth/refresh_token', name='refresh_token', methods=['POST'])
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |           │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11be7d300>
    |           │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11be1b1a0>
    |           │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │                            │    └ <starlette.requests.Request object at 0x11be8cb90>
    |           │                            └ <function request_response.<locals>.app.<locals>.app at 0x11be7d4e0>
    |           └ <function wrap_app_handling_exceptions at 0x1079c8400>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |           │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11be7d620>
    |           │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11be1b1a0>
    |           │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           └ <function request_response.<locals>.app.<locals>.app at 0x11be7d4e0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    |     response = await f(request)
    |                      │ └ <starlette.requests.Request object at 0x11be8cb90>
    |                      └ <function get_request_handler.<locals>.app at 0x11b806840>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    |     content = await serialize_response(
    |                     └ <function serialize_response at 0x106c2b880>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    |     raise ResponseValidationError(
    |           └ <class 'fastapi.exceptions.ResponseValidationError'>
    |
    | fastapi.exceptions.ResponseValidationError: 2 validation errors:
    |   {'type': 'model_attributes_type', 'loc': ('response', 'data', 'access_token'), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzZXNzaW9uX3V1aWQiOiI5OGVjZDIxNC01ZmExLTRjZmQtYjc3ZS0wZjJlNDVmMzc0ZGIiLCJleHAiOjE3NDkyNjU2MjEsInN1YiI6OH0.Krjrtp6gLy1sqkSoDZR1QWmUv1KuUeyHmyvJvckhbow'}
    |   {'type': 'missing', 'loc': ('response', 'data', 'refresh_token'), 'msg': 'Field required', 'input': AccessToken(access_token='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzZXNzaW9uX3V1aWQiOiI5OGVjZDIxNC01ZmExLTRjZmQtYjc3ZS0wZjJlNDVmMzc0ZGIiLCJleHAiOjE3NDkyNjU2MjEsInN1YiI6OH0.Krjrtp6gLy1sqkSoDZR1QWmUv1KuUeyHmyvJvckhbow', access_token_expire_time=datetime.datetime(2025, 6, 7, 8, 52, 1, 819991, tzinfo=zoneinfo.ZoneInfo(key='Asia/Kathmandu')), session_uuid='98ecd214-5fa1-4cfd-b77e-0f2e45f374db')}
    |
    +------------------------------------


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x11bdc0540>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11ba1fd...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x11b8e06e0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x11b8e0830>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x11bdc0540>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11ba1fd...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x11b8e0440>, header_name='X-Request-I...
          └ <starlette.middleware.cors.CORSMiddleware object at 0x11b8e06e0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/asgi_correlation_id/middleware.py", line 90, in __call__
    await self.app(scope, receive, handle_outgoing_request)
          │    │   │      │        └ <function CorrelationIdMiddleware.__call__.<locals>.handle_outgoing_request at 0x11be2c7c0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11ba1fd...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <src.middleware.state_middleware.StateMiddleware object at 0x11b8e0440>
          └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x11b8e0440>, header_name='X-Request-I...
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
         │            │            └ <function collapse_excgroups at 0x1076d2a20>
         │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
         └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [ResponseValidationError()])
    │    │   └ <method 'throw' of 'generator' objects>
    │    └ <generator object collapse_excgroups at 0x11b86a9b0>
    └ <contextlib._GeneratorContextManager object at 0x11bde72a0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    raise exc
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x11be2c720>
                     │    │             └ <starlette.middleware.base._CachedRequest object at 0x11ba1f390>
                     │    └ <bound method StateMiddleware.dispatch of <src.middleware.state_middleware.StateMiddleware object at 0x11b8e0440>>
                     └ <src.middleware.state_middleware.StateMiddleware object at 0x11b8e0440>

  File "/Users/kathayatnk/Desktop/swipewise/src/middleware/state_middleware.py", line 24, in dispatch
    response = await call_next(request)
                     │         └ <starlette.middleware.base._CachedRequest object at 0x11ba1f390>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x11be2c720>

  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 156, in call_next
    raise app_exc
          └ ResponseValidationError()
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x11be2c860>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11be1b1a0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x11b8e02f0>
          └ <src.middleware.state_middleware.StateMiddleware object at 0x11b8e0440>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/authentication.py", line 48, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x11be2c860>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11be1b1a0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x11b8e01a0>
          └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x11b8e02f0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x11be2c860>
          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11be1b1a0>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x11bdcd550>
          │                            │    └ <fastapi.routing.APIRouter object at 0x11b7c6150>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x11b8e01a0>
          └ <function wrap_app_handling_exceptions at 0x1079c8400>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11be7d300>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11be1b1a0>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          └ <fastapi.routing.APIRouter object at 0x11b7c6150>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11be7d300>
          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11be1b1a0>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x11b7c6150>>
          └ <fastapi.routing.APIRouter object at 0x11b7c6150>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11be7d300>
          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11be1b1a0>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │     └ <function Route.handle at 0x1079ca200>
          └ APIRoute(path='/api/v1/auth/refresh_token', name='refresh_token', methods=['POST'])
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11be7d300>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11be1b1a0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <function request_response.<locals>.app at 0x11b8068e0>
          └ APIRoute(path='/api/v1/auth/refresh_token', name='refresh_token', methods=['POST'])
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11be7d300>
          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11be1b1a0>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x11be8cb90>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x11be7d4e0>
          └ <function wrap_app_handling_exceptions at 0x1079c8400>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11be7d620>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11be1b1a0>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x11be7d4e0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x11be8cb90>
                     └ <function get_request_handler.<locals>.app at 0x11b806840>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    content = await serialize_response(
                    └ <function serialize_response at 0x106c2b880>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    raise ResponseValidationError(
          └ <class 'fastapi.exceptions.ResponseValidationError'>

fastapi.exceptions.ResponseValidationError: 2 validation errors:
  {'type': 'model_attributes_type', 'loc': ('response', 'data', 'access_token'), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzZXNzaW9uX3V1aWQiOiI5OGVjZDIxNC01ZmExLTRjZmQtYjc3ZS0wZjJlNDVmMzc0ZGIiLCJleHAiOjE3NDkyNjU2MjEsInN1YiI6OH0.Krjrtp6gLy1sqkSoDZR1QWmUv1KuUeyHmyvJvckhbow'}
  {'type': 'missing', 'loc': ('response', 'data', 'refresh_token'), 'msg': 'Field required', 'input': AccessToken(access_token='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzZXNzaW9uX3V1aWQiOiI5OGVjZDIxNC01ZmExLTRjZmQtYjc3ZS0wZjJlNDVmMzc0ZGIiLCJleHAiOjE3NDkyNjU2MjEsInN1YiI6OH0.Krjrtp6gLy1sqkSoDZR1QWmUv1KuUeyHmyvJvckhbow', access_token_expire_time=datetime.datetime(2025, 6, 7, 8, 52, 1, 819991, tzinfo=zoneinfo.ZoneInfo(key='Asia/Kathmandu')), session_uuid='98ecd214-5fa1-4cfd-b77e-0f2e45f374db')}



During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 5
               │     └ 10
               └ <function _main at 0x10414e520>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 5
           │    └ <function BaseProcess._bootstrap at 0x1040f7ec0>
           └ <SpawnProcess name='SpawnProcess-9' parent=79052 started>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x1040f7420>
    └ <SpawnProcess name='SpawnProcess-9' parent=79052 started>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x106160ec0>, 'target': <bound method Server.run of <uvicorn.server.Server object...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-9' parent=79052 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-9' parent=79052 started>
    │    └ <function subprocess_started at 0x104696f20>
    └ <SpawnProcess name='SpawnProcess-9' parent=79052 started>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=2, type=1, proto=0, laddr=('127.0.0.1', 8080)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x106161010>>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=4, family=2, type=1, proto=0, laddr=('127.0.0.1', 8080)>]
           │       │   │    └ <function Server.serve at 0x104695b20>
           │       │   └ <uvicorn.server.Server object at 0x106161010>
           │       └ <function run at 0x104371d00>
           └ <module 'asyncio' from '/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/__init__.py'>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x1041b4d60>
           │      └ <function Runner.run at 0x1043c02c0>
           └ <asyncio.runners.Runner object at 0x106161940>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-pac...
           │    │     └ <cyfunction Loop.run_until_complete at 0x1063e06c0>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x106161940>
> File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x11b713a10>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11ba1fd90>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11ba1fd...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x11b711e80>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x11b713a10>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11ba1fd90>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11ba1fd...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11ba1fd90>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11ba1fd...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x11b8e0830>
          └ <fastapi.applications.FastAPI object at 0x11b711e80>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 177, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x11be8ce10>
                     │    └ <function ExceptionHandler.register.<locals>.cors_custom_code_500_exception_handler at 0x11b8af420>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x11b8e0830>

  File "/Users/kathayatnk/Desktop/swipewise/src/common/exception/exception_handler.py", line 226, in cors_custom_code_500_exception_handler
    status_code = StandardResponseCode.HTTP_500.value
                  │                    └ 500
                  └ <class 'src.common.response.response_code.StandardResponseCode'>

AttributeError: 'int' object has no attribute 'value'
2025-06-06 08:52:21.602 | ERROR    |  1f42313f152141c2bee17a954edfe146  | Exception in ASGI application

  + Exception Group Traceback (most recent call last):
  |
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                │     │                      └ <anyio._backends._asyncio.TaskGroup object at 0x11c021220>
  |                │     └ <function create_task_group at 0x1060e85e0>
  |                └ <module 'anyio' from '/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/anyio/__init__.py'>
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  |
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |           │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x11c11b600>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11bd962...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.cors.CORSMiddleware object at 0x11b8e06e0>
    |           └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x11b8e0830>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x11c11b600>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11bd962...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x11b8e0440>, header_name='X-Request-I...
    |           └ <starlette.middleware.cors.CORSMiddleware object at 0x11b8e06e0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/asgi_correlation_id/middleware.py", line 90, in __call__
    |     await self.app(scope, receive, handle_outgoing_request)
    |           │    │   │      │        └ <function CorrelationIdMiddleware.__call__.<locals>.handle_outgoing_request at 0x11be1b920>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11bd962...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <src.middleware.state_middleware.StateMiddleware object at 0x11b8e0440>
    |           └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x11b8e0440>, header_name='X-Request-I...
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |          │            │            └ <function collapse_excgroups at 0x1076d2a20>
    |          │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
    |          └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
    |   File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 162, in __exit__
    |     self.gen.throw(value)
    |     │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [ResponseValidationError()])
    |     │    │   └ <method 'throw' of 'generator' objects>
    |     │    └ <generator object collapse_excgroups at 0x11bfc3b90>
    |     └ <contextlib._GeneratorContextManager object at 0x11c0b1550>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                      │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x11c11b7e0>
    |                      │    │             └ <starlette.middleware.base._CachedRequest object at 0x11bd94640>
    |                      │    └ <bound method StateMiddleware.dispatch of <src.middleware.state_middleware.StateMiddleware object at 0x11b8e0440>>
    |                      └ <src.middleware.state_middleware.StateMiddleware object at 0x11b8e0440>
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/src/middleware/state_middleware.py", line 24, in dispatch
    |     response = await call_next(request)
    |                      │         └ <starlette.middleware.base._CachedRequest object at 0x11bd94640>
    |                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x11c11b7e0>
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 156, in call_next
    |     raise app_exc
    |           └ ResponseValidationError()
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |           │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x11c1189a0>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11c11b100>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x11b8e02f0>
    |           └ <src.middleware.state_middleware.StateMiddleware object at 0x11b8e0440>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/authentication.py", line 48, in __call__
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x11c1189a0>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11c11b100>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x11b8e01a0>
    |           └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x11b8e02f0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |           │                            │    │    │     │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x11c1189a0>
    |           │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11c11b100>
    |           │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │                            │    │    └ <starlette.requests.Request object at 0x11c0210f0>
    |           │                            │    └ <fastapi.routing.APIRouter object at 0x11b7c6150>
    |           │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x11b8e01a0>
    |           └ <function wrap_app_handling_exceptions at 0x1079c8400>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |           │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11c11b6a0>
    |           │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11c11b100>
    |           │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           └ <fastapi.routing.APIRouter object at 0x11b7c6150>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |           │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11c11b6a0>
    |           │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11c11b100>
    |           │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x11b7c6150>>
    |           └ <fastapi.routing.APIRouter object at 0x11b7c6150>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |           │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11c11b6a0>
    |           │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11c11b100>
    |           │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │     └ <function Route.handle at 0x1079ca200>
    |           └ APIRoute(path='/api/v1/auth/refresh_token', name='refresh_token', methods=['POST'])
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11c11b6a0>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11c11b100>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <function request_response.<locals>.app at 0x11b8068e0>
    |           └ APIRoute(path='/api/v1/auth/refresh_token', name='refresh_token', methods=['POST'])
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |           │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11c11b6a0>
    |           │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11c11b100>
    |           │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │                            │    └ <starlette.requests.Request object at 0x11c020050>
    |           │                            └ <function request_response.<locals>.app.<locals>.app at 0x11c11b880>
    |           └ <function wrap_app_handling_exceptions at 0x1079c8400>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |           │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11c11b9c0>
    |           │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11c11b100>
    |           │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           └ <function request_response.<locals>.app.<locals>.app at 0x11c11b880>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    |     response = await f(request)
    |                      │ └ <starlette.requests.Request object at 0x11c020050>
    |                      └ <function get_request_handler.<locals>.app at 0x11b806840>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    |     content = await serialize_response(
    |                     └ <function serialize_response at 0x106c2b880>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    |     raise ResponseValidationError(
    |           └ <class 'fastapi.exceptions.ResponseValidationError'>
    |
    | fastapi.exceptions.ResponseValidationError: 2 validation errors:
    |   {'type': 'model_attributes_type', 'loc': ('response', 'data', 'access_token'), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzZXNzaW9uX3V1aWQiOiIwZDgwMjlmMS1lYzI2LTQ1NTItYjZhYi0xMDkyNWYyNGI3NWYiLCJleHAiOjE3NDkyNjU2MzgsInN1YiI6OH0.R50zbArNgZl9MKJALdqyW-9S25eerM1EVnQjBXUMrG8'}
    |   {'type': 'missing', 'loc': ('response', 'data', 'refresh_token'), 'msg': 'Field required', 'input': AccessToken(access_token='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzZXNzaW9uX3V1aWQiOiIwZDgwMjlmMS1lYzI2LTQ1NTItYjZhYi0xMDkyNWYyNGI3NWYiLCJleHAiOjE3NDkyNjU2MzgsInN1YiI6OH0.R50zbArNgZl9MKJALdqyW-9S25eerM1EVnQjBXUMrG8', access_token_expire_time=datetime.datetime(2025, 6, 7, 8, 52, 18, 682561, tzinfo=zoneinfo.ZoneInfo(key='Asia/Kathmandu')), session_uuid='0d8029f1-ec26-4552-b6ab-10925f24b75f')}
    |
    +------------------------------------


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x11c11b600>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11bd962...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x11b8e06e0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x11b8e0830>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x11c11b600>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11bd962...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x11b8e0440>, header_name='X-Request-I...
          └ <starlette.middleware.cors.CORSMiddleware object at 0x11b8e06e0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/asgi_correlation_id/middleware.py", line 90, in __call__
    await self.app(scope, receive, handle_outgoing_request)
          │    │   │      │        └ <function CorrelationIdMiddleware.__call__.<locals>.handle_outgoing_request at 0x11be1b920>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11bd962...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <src.middleware.state_middleware.StateMiddleware object at 0x11b8e0440>
          └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x11b8e0440>, header_name='X-Request-I...
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
         │            │            └ <function collapse_excgroups at 0x1076d2a20>
         │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
         └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [ResponseValidationError()])
    │    │   └ <method 'throw' of 'generator' objects>
    │    └ <generator object collapse_excgroups at 0x11bfc3b90>
    └ <contextlib._GeneratorContextManager object at 0x11c0b1550>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    raise exc
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x11c11b7e0>
                     │    │             └ <starlette.middleware.base._CachedRequest object at 0x11bd94640>
                     │    └ <bound method StateMiddleware.dispatch of <src.middleware.state_middleware.StateMiddleware object at 0x11b8e0440>>
                     └ <src.middleware.state_middleware.StateMiddleware object at 0x11b8e0440>

  File "/Users/kathayatnk/Desktop/swipewise/src/middleware/state_middleware.py", line 24, in dispatch
    response = await call_next(request)
                     │         └ <starlette.middleware.base._CachedRequest object at 0x11bd94640>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x11c11b7e0>

  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 156, in call_next
    raise app_exc
          └ ResponseValidationError()
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x11c1189a0>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11c11b100>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x11b8e02f0>
          └ <src.middleware.state_middleware.StateMiddleware object at 0x11b8e0440>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/authentication.py", line 48, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x11c1189a0>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11c11b100>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x11b8e01a0>
          └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x11b8e02f0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x11c1189a0>
          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11c11b100>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x11c0210f0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x11b7c6150>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x11b8e01a0>
          └ <function wrap_app_handling_exceptions at 0x1079c8400>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11c11b6a0>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11c11b100>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          └ <fastapi.routing.APIRouter object at 0x11b7c6150>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11c11b6a0>
          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11c11b100>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x11b7c6150>>
          └ <fastapi.routing.APIRouter object at 0x11b7c6150>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11c11b6a0>
          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11c11b100>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │     └ <function Route.handle at 0x1079ca200>
          └ APIRoute(path='/api/v1/auth/refresh_token', name='refresh_token', methods=['POST'])
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11c11b6a0>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11c11b100>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <function request_response.<locals>.app at 0x11b8068e0>
          └ APIRoute(path='/api/v1/auth/refresh_token', name='refresh_token', methods=['POST'])
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11c11b6a0>
          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11c11b100>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x11c020050>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x11c11b880>
          └ <function wrap_app_handling_exceptions at 0x1079c8400>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11c11b9c0>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11c11b100>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x11c11b880>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x11c020050>
                     └ <function get_request_handler.<locals>.app at 0x11b806840>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    content = await serialize_response(
                    └ <function serialize_response at 0x106c2b880>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    raise ResponseValidationError(
          └ <class 'fastapi.exceptions.ResponseValidationError'>

fastapi.exceptions.ResponseValidationError: 2 validation errors:
  {'type': 'model_attributes_type', 'loc': ('response', 'data', 'access_token'), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzZXNzaW9uX3V1aWQiOiIwZDgwMjlmMS1lYzI2LTQ1NTItYjZhYi0xMDkyNWYyNGI3NWYiLCJleHAiOjE3NDkyNjU2MzgsInN1YiI6OH0.R50zbArNgZl9MKJALdqyW-9S25eerM1EVnQjBXUMrG8'}
  {'type': 'missing', 'loc': ('response', 'data', 'refresh_token'), 'msg': 'Field required', 'input': AccessToken(access_token='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzZXNzaW9uX3V1aWQiOiIwZDgwMjlmMS1lYzI2LTQ1NTItYjZhYi0xMDkyNWYyNGI3NWYiLCJleHAiOjE3NDkyNjU2MzgsInN1YiI6OH0.R50zbArNgZl9MKJALdqyW-9S25eerM1EVnQjBXUMrG8', access_token_expire_time=datetime.datetime(2025, 6, 7, 8, 52, 18, 682561, tzinfo=zoneinfo.ZoneInfo(key='Asia/Kathmandu')), session_uuid='0d8029f1-ec26-4552-b6ab-10925f24b75f')}



During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 5
               │     └ 10
               └ <function _main at 0x10414e520>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 5
           │    └ <function BaseProcess._bootstrap at 0x1040f7ec0>
           └ <SpawnProcess name='SpawnProcess-9' parent=79052 started>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x1040f7420>
    └ <SpawnProcess name='SpawnProcess-9' parent=79052 started>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x106160ec0>, 'target': <bound method Server.run of <uvicorn.server.Server object...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-9' parent=79052 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-9' parent=79052 started>
    │    └ <function subprocess_started at 0x104696f20>
    └ <SpawnProcess name='SpawnProcess-9' parent=79052 started>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=2, type=1, proto=0, laddr=('127.0.0.1', 8080)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x106161010>>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=4, family=2, type=1, proto=0, laddr=('127.0.0.1', 8080)>]
           │       │   │    └ <function Server.serve at 0x104695b20>
           │       │   └ <uvicorn.server.Server object at 0x106161010>
           │       └ <function run at 0x104371d00>
           └ <module 'asyncio' from '/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/__init__.py'>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x1041b4d60>
           │      └ <function Runner.run at 0x1043c02c0>
           └ <asyncio.runners.Runner object at 0x106161940>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-pac...
           │    │     └ <cyfunction Loop.run_until_complete at 0x1063e06c0>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x106161940>
> File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x11b713a10>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11bd962c0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11bd962...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x11b711e80>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x11b713a10>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11bd962c0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11bd962...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11bd962c0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11bd962...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x11b8e0830>
          └ <fastapi.applications.FastAPI object at 0x11b711e80>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 177, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x11c014170>
                     │    └ <function ExceptionHandler.register.<locals>.cors_custom_code_500_exception_handler at 0x11b8af420>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x11b8e0830>

  File "/Users/kathayatnk/Desktop/swipewise/src/common/exception/exception_handler.py", line 226, in cors_custom_code_500_exception_handler
    status_code = StandardResponseCode.HTTP_500.value
                  │                    └ 500
                  └ <class 'src.common.response.response_code.StandardResponseCode'>

AttributeError: 'int' object has no attribute 'value'
2025-06-06 08:52:34.747 | ERROR    |  8b2af43f59934b77bbdc65c60c2c385d  | Exception in ASGI application

  + Exception Group Traceback (most recent call last):
  |
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                │     │                      └ <anyio._backends._asyncio.TaskGroup object at 0x11bf657b0>
  |                │     └ <function create_task_group at 0x1060e85e0>
  |                └ <module 'anyio' from '/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/anyio/__init__.py'>
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  |
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |           │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x11c11b740>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11c0167...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.cors.CORSMiddleware object at 0x11b8e06e0>
    |           └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x11b8e0830>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x11c11b740>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11c0167...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x11b8e0440>, header_name='X-Request-I...
    |           └ <starlette.middleware.cors.CORSMiddleware object at 0x11b8e06e0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/asgi_correlation_id/middleware.py", line 90, in __call__
    |     await self.app(scope, receive, handle_outgoing_request)
    |           │    │   │      │        └ <function CorrelationIdMiddleware.__call__.<locals>.handle_outgoing_request at 0x11c118f40>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11c0167...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <src.middleware.state_middleware.StateMiddleware object at 0x11b8e0440>
    |           └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x11b8e0440>, header_name='X-Request-I...
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |          │            │            └ <function collapse_excgroups at 0x1076d2a20>
    |          │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
    |          └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
    |   File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 162, in __exit__
    |     self.gen.throw(value)
    |     │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [ResponseValidationError()])
    |     │    │   └ <method 'throw' of 'generator' objects>
    |     │    └ <generator object collapse_excgroups at 0x11c18b030>
    |     └ <contextlib._GeneratorContextManager object at 0x11bfb9a90>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                      │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x11c11b560>
    |                      │    │             └ <starlette.middleware.base._CachedRequest object at 0x11c1f0a70>
    |                      │    └ <bound method StateMiddleware.dispatch of <src.middleware.state_middleware.StateMiddleware object at 0x11b8e0440>>
    |                      └ <src.middleware.state_middleware.StateMiddleware object at 0x11b8e0440>
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/src/middleware/state_middleware.py", line 24, in dispatch
    |     response = await call_next(request)
    |                      │         └ <starlette.middleware.base._CachedRequest object at 0x11c1f0a70>
    |                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x11c11b560>
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 156, in call_next
    |     raise app_exc
    |           └ ResponseValidationError()
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |           │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x11c1e0680>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11bfdb920>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x11b8e02f0>
    |           └ <src.middleware.state_middleware.StateMiddleware object at 0x11b8e0440>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/authentication.py", line 48, in __call__
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x11c1e0680>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11bfdb920>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x11b8e01a0>
    |           └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x11b8e02f0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |           │                            │    │    │     │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x11c1e0680>
    |           │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11bfdb920>
    |           │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │                            │    │    └ <starlette.requests.Request object at 0x11bf659d0>
    |           │                            │    └ <fastapi.routing.APIRouter object at 0x11b7c6150>
    |           │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x11b8e01a0>
    |           └ <function wrap_app_handling_exceptions at 0x1079c8400>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |           │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11c1e0040>
    |           │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11bfdb920>
    |           │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           └ <fastapi.routing.APIRouter object at 0x11b7c6150>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |           │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11c1e0040>
    |           │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11bfdb920>
    |           │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x11b7c6150>>
    |           └ <fastapi.routing.APIRouter object at 0x11b7c6150>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |           │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11c1e0040>
    |           │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11bfdb920>
    |           │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │     └ <function Route.handle at 0x1079ca200>
    |           └ APIRoute(path='/api/v1/auth/refresh_token', name='refresh_token', methods=['POST'])
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11c1e0040>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11bfdb920>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <function request_response.<locals>.app at 0x11b8068e0>
    |           └ APIRoute(path='/api/v1/auth/refresh_token', name='refresh_token', methods=['POST'])
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |           │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11c1e0040>
    |           │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11bfdb920>
    |           │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │                            │    └ <starlette.requests.Request object at 0x11bf65040>
    |           │                            └ <function request_response.<locals>.app.<locals>.app at 0x11c1e0c20>
    |           └ <function wrap_app_handling_exceptions at 0x1079c8400>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |           │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11c1e0fe0>
    |           │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11bfdb920>
    |           │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           └ <function request_response.<locals>.app.<locals>.app at 0x11c1e0c20>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    |     response = await f(request)
    |                      │ └ <starlette.requests.Request object at 0x11bf65040>
    |                      └ <function get_request_handler.<locals>.app at 0x11b806840>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    |     content = await serialize_response(
    |                     └ <function serialize_response at 0x106c2b880>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    |     raise ResponseValidationError(
    |           └ <class 'fastapi.exceptions.ResponseValidationError'>
    |
    | fastapi.exceptions.ResponseValidationError: 2 validation errors:
    |   {'type': 'model_attributes_type', 'loc': ('response', 'data', 'access_token'), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzZXNzaW9uX3V1aWQiOiIwYzlmNmMyOS0xOTc1LTRkYTEtYTRmYS0zNTZmNmJhMzk1MDYiLCJleHAiOjE3NDkyNjU2NTQsInN1YiI6OH0.ZratFJ8casbNjKRfhT7GyrPnqHJcwqQC0ZQZOQJeO-s'}
    |   {'type': 'missing', 'loc': ('response', 'data', 'refresh_token'), 'msg': 'Field required', 'input': AccessToken(access_token='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzZXNzaW9uX3V1aWQiOiIwYzlmNmMyOS0xOTc1LTRkYTEtYTRmYS0zNTZmNmJhMzk1MDYiLCJleHAiOjE3NDkyNjU2NTQsInN1YiI6OH0.ZratFJ8casbNjKRfhT7GyrPnqHJcwqQC0ZQZOQJeO-s', access_token_expire_time=datetime.datetime(2025, 6, 7, 8, 52, 34, 20384, tzinfo=zoneinfo.ZoneInfo(key='Asia/Kathmandu')), session_uuid='0c9f6c29-1975-4da1-a4fa-356f6ba39506')}
    |
    +------------------------------------


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x11c11b740>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11c0167...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x11b8e06e0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x11b8e0830>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x11c11b740>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11c0167...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x11b8e0440>, header_name='X-Request-I...
          └ <starlette.middleware.cors.CORSMiddleware object at 0x11b8e06e0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/asgi_correlation_id/middleware.py", line 90, in __call__
    await self.app(scope, receive, handle_outgoing_request)
          │    │   │      │        └ <function CorrelationIdMiddleware.__call__.<locals>.handle_outgoing_request at 0x11c118f40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11c0167...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <src.middleware.state_middleware.StateMiddleware object at 0x11b8e0440>
          └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x11b8e0440>, header_name='X-Request-I...
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
         │            │            └ <function collapse_excgroups at 0x1076d2a20>
         │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
         └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [ResponseValidationError()])
    │    │   └ <method 'throw' of 'generator' objects>
    │    └ <generator object collapse_excgroups at 0x11c18b030>
    └ <contextlib._GeneratorContextManager object at 0x11bfb9a90>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    raise exc
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x11c11b560>
                     │    │             └ <starlette.middleware.base._CachedRequest object at 0x11c1f0a70>
                     │    └ <bound method StateMiddleware.dispatch of <src.middleware.state_middleware.StateMiddleware object at 0x11b8e0440>>
                     └ <src.middleware.state_middleware.StateMiddleware object at 0x11b8e0440>

  File "/Users/kathayatnk/Desktop/swipewise/src/middleware/state_middleware.py", line 24, in dispatch
    response = await call_next(request)
                     │         └ <starlette.middleware.base._CachedRequest object at 0x11c1f0a70>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x11c11b560>

  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 156, in call_next
    raise app_exc
          └ ResponseValidationError()
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x11c1e0680>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11bfdb920>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x11b8e02f0>
          └ <src.middleware.state_middleware.StateMiddleware object at 0x11b8e0440>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/authentication.py", line 48, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x11c1e0680>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11bfdb920>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x11b8e01a0>
          └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x11b8e02f0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x11c1e0680>
          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11bfdb920>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x11bf659d0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x11b7c6150>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x11b8e01a0>
          └ <function wrap_app_handling_exceptions at 0x1079c8400>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11c1e0040>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11bfdb920>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          └ <fastapi.routing.APIRouter object at 0x11b7c6150>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11c1e0040>
          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11bfdb920>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x11b7c6150>>
          └ <fastapi.routing.APIRouter object at 0x11b7c6150>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11c1e0040>
          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11bfdb920>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │     └ <function Route.handle at 0x1079ca200>
          └ APIRoute(path='/api/v1/auth/refresh_token', name='refresh_token', methods=['POST'])
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11c1e0040>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11bfdb920>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <function request_response.<locals>.app at 0x11b8068e0>
          └ APIRoute(path='/api/v1/auth/refresh_token', name='refresh_token', methods=['POST'])
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11c1e0040>
          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11bfdb920>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x11bf65040>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x11c1e0c20>
          └ <function wrap_app_handling_exceptions at 0x1079c8400>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11c1e0fe0>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11bfdb920>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x11c1e0c20>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x11bf65040>
                     └ <function get_request_handler.<locals>.app at 0x11b806840>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    content = await serialize_response(
                    └ <function serialize_response at 0x106c2b880>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    raise ResponseValidationError(
          └ <class 'fastapi.exceptions.ResponseValidationError'>

fastapi.exceptions.ResponseValidationError: 2 validation errors:
  {'type': 'model_attributes_type', 'loc': ('response', 'data', 'access_token'), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzZXNzaW9uX3V1aWQiOiIwYzlmNmMyOS0xOTc1LTRkYTEtYTRmYS0zNTZmNmJhMzk1MDYiLCJleHAiOjE3NDkyNjU2NTQsInN1YiI6OH0.ZratFJ8casbNjKRfhT7GyrPnqHJcwqQC0ZQZOQJeO-s'}
  {'type': 'missing', 'loc': ('response', 'data', 'refresh_token'), 'msg': 'Field required', 'input': AccessToken(access_token='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzZXNzaW9uX3V1aWQiOiIwYzlmNmMyOS0xOTc1LTRkYTEtYTRmYS0zNTZmNmJhMzk1MDYiLCJleHAiOjE3NDkyNjU2NTQsInN1YiI6OH0.ZratFJ8casbNjKRfhT7GyrPnqHJcwqQC0ZQZOQJeO-s', access_token_expire_time=datetime.datetime(2025, 6, 7, 8, 52, 34, 20384, tzinfo=zoneinfo.ZoneInfo(key='Asia/Kathmandu')), session_uuid='0c9f6c29-1975-4da1-a4fa-356f6ba39506')}



During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 5
               │     └ 10
               └ <function _main at 0x10414e520>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 5
           │    └ <function BaseProcess._bootstrap at 0x1040f7ec0>
           └ <SpawnProcess name='SpawnProcess-9' parent=79052 started>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x1040f7420>
    └ <SpawnProcess name='SpawnProcess-9' parent=79052 started>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x106160ec0>, 'target': <bound method Server.run of <uvicorn.server.Server object...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-9' parent=79052 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-9' parent=79052 started>
    │    └ <function subprocess_started at 0x104696f20>
    └ <SpawnProcess name='SpawnProcess-9' parent=79052 started>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=2, type=1, proto=0, laddr=('127.0.0.1', 8080)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x106161010>>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=4, family=2, type=1, proto=0, laddr=('127.0.0.1', 8080)>]
           │       │   │    └ <function Server.serve at 0x104695b20>
           │       │   └ <uvicorn.server.Server object at 0x106161010>
           │       └ <function run at 0x104371d00>
           └ <module 'asyncio' from '/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/__init__.py'>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x1041b4d60>
           │      └ <function Runner.run at 0x1043c02c0>
           └ <asyncio.runners.Runner object at 0x106161940>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-pac...
           │    │     └ <cyfunction Loop.run_until_complete at 0x1063e06c0>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x106161940>
> File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x11b713a10>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11c0167b0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11c0167...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x11b711e80>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x11b713a10>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11c0167b0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11c0167...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11c0167b0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11c0167...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x11b8e0830>
          └ <fastapi.applications.FastAPI object at 0x11b711e80>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 177, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x11c1e9f50>
                     │    └ <function ExceptionHandler.register.<locals>.cors_custom_code_500_exception_handler at 0x11b8af420>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x11b8e0830>

  File "/Users/kathayatnk/Desktop/swipewise/src/common/exception/exception_handler.py", line 226, in cors_custom_code_500_exception_handler
    status_code = StandardResponseCode.HTTP_500.value
                  │                    └ 500
                  └ <class 'src.common.response.response_code.StandardResponseCode'>

AttributeError: 'int' object has no attribute 'value'
2025-06-06 08:52:54.164 | ERROR    |  718ddba44efd410c8bb49daed3f86655  | Exception in ASGI application

  + Exception Group Traceback (most recent call last):
  |
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                │     │                      └ <anyio._backends._asyncio.TaskGroup object at 0x11be81a90>
  |                │     └ <function create_task_group at 0x1060e85e0>
  |                └ <module 'anyio' from '/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/anyio/__init__.py'>
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  |
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |           │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x11c1e1b20>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11bf662...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.cors.CORSMiddleware object at 0x11b8e06e0>
    |           └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x11b8e0830>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x11c1e1b20>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11bf662...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x11b8e0440>, header_name='X-Request-I...
    |           └ <starlette.middleware.cors.CORSMiddleware object at 0x11b8e06e0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/asgi_correlation_id/middleware.py", line 90, in __call__
    |     await self.app(scope, receive, handle_outgoing_request)
    |           │    │   │      │        └ <function CorrelationIdMiddleware.__call__.<locals>.handle_outgoing_request at 0x1040c6ac0>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11bf662...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <src.middleware.state_middleware.StateMiddleware object at 0x11b8e0440>
    |           └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x11b8e0440>, header_name='X-Request-I...
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |          │            │            └ <function collapse_excgroups at 0x1076d2a20>
    |          │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
    |          └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
    |   File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 162, in __exit__
    |     self.gen.throw(value)
    |     │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [ResponseValidationError()])
    |     │    │   └ <method 'throw' of 'generator' objects>
    |     │    └ <generator object collapse_excgroups at 0x11c200fb0>
    |     └ <contextlib._GeneratorContextManager object at 0x11c1d9240>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                      │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x11c1e2480>
    |                      │    │             └ <starlette.middleware.base._CachedRequest object at 0x11bf65590>
    |                      │    └ <bound method StateMiddleware.dispatch of <src.middleware.state_middleware.StateMiddleware object at 0x11b8e0440>>
    |                      └ <src.middleware.state_middleware.StateMiddleware object at 0x11b8e0440>
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/src/middleware/state_middleware.py", line 24, in dispatch
    |     response = await call_next(request)
    |                      │         └ <starlette.middleware.base._CachedRequest object at 0x11bf65590>
    |                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x11c1e2480>
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 156, in call_next
    |     raise app_exc
    |           └ ResponseValidationError()
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |           │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x11c1e16c0>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11c1e0ea0>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x11b8e02f0>
    |           └ <src.middleware.state_middleware.StateMiddleware object at 0x11b8e0440>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/authentication.py", line 48, in __call__
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x11c1e16c0>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11c1e0ea0>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x11b8e01a0>
    |           └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x11b8e02f0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |           │                            │    │    │     │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x11c1e16c0>
    |           │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11c1e0ea0>
    |           │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │                            │    │    └ <starlette.requests.Request object at 0x11c1eb950>
    |           │                            │    └ <fastapi.routing.APIRouter object at 0x11b7c6150>
    |           │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x11b8e01a0>
    |           └ <function wrap_app_handling_exceptions at 0x1079c8400>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |           │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11c1e1800>
    |           │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11c1e0ea0>
    |           │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           └ <fastapi.routing.APIRouter object at 0x11b7c6150>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |           │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11c1e1800>
    |           │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11c1e0ea0>
    |           │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x11b7c6150>>
    |           └ <fastapi.routing.APIRouter object at 0x11b7c6150>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |           │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11c1e1800>
    |           │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11c1e0ea0>
    |           │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │     └ <function Route.handle at 0x1079ca200>
    |           └ APIRoute(path='/api/v1/auth/refresh_token', name='refresh_token', methods=['POST'])
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11c1e1800>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11c1e0ea0>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <function request_response.<locals>.app at 0x11b8068e0>
    |           └ APIRoute(path='/api/v1/auth/refresh_token', name='refresh_token', methods=['POST'])
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |           │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11c1e1800>
    |           │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11c1e0ea0>
    |           │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │                            │    └ <starlette.requests.Request object at 0x11c1e67b0>
    |           │                            └ <function request_response.<locals>.app.<locals>.app at 0x11c1e1e40>
    |           └ <function wrap_app_handling_exceptions at 0x1079c8400>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |           │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11c1e1940>
    |           │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11c1e0ea0>
    |           │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           └ <function request_response.<locals>.app.<locals>.app at 0x11c1e1e40>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    |     response = await f(request)
    |                      │ └ <starlette.requests.Request object at 0x11c1e67b0>
    |                      └ <function get_request_handler.<locals>.app at 0x11b806840>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    |     content = await serialize_response(
    |                     └ <function serialize_response at 0x106c2b880>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    |     raise ResponseValidationError(
    |           └ <class 'fastapi.exceptions.ResponseValidationError'>
    |
    | fastapi.exceptions.ResponseValidationError: 2 validation errors:
    |   {'type': 'model_attributes_type', 'loc': ('response', 'data', 'access_token'), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzZXNzaW9uX3V1aWQiOiI1N2QxN2VkOS02ZjdjLTQ3NzktODg5Ny0wYjBmZThlNmEzNDUiLCJleHAiOjE3NDkyNjU2NjcsInN1YiI6OH0.3213r9I8iPobL1NB3_OiObYcmKlmLeKtfIoY9IcXY3I'}
    |   {'type': 'missing', 'loc': ('response', 'data', 'refresh_token'), 'msg': 'Field required', 'input': AccessToken(access_token='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzZXNzaW9uX3V1aWQiOiI1N2QxN2VkOS02ZjdjLTQ3NzktODg5Ny0wYjBmZThlNmEzNDUiLCJleHAiOjE3NDkyNjU2NjcsInN1YiI6OH0.3213r9I8iPobL1NB3_OiObYcmKlmLeKtfIoY9IcXY3I', access_token_expire_time=datetime.datetime(2025, 6, 7, 8, 52, 47, 782642, tzinfo=zoneinfo.ZoneInfo(key='Asia/Kathmandu')), session_uuid='57d17ed9-6f7c-4779-8897-0b0fe8e6a345')}
    |
    +------------------------------------


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x11c1e1b20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11bf662...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x11b8e06e0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x11b8e0830>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x11c1e1b20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11bf662...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x11b8e0440>, header_name='X-Request-I...
          └ <starlette.middleware.cors.CORSMiddleware object at 0x11b8e06e0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/asgi_correlation_id/middleware.py", line 90, in __call__
    await self.app(scope, receive, handle_outgoing_request)
          │    │   │      │        └ <function CorrelationIdMiddleware.__call__.<locals>.handle_outgoing_request at 0x1040c6ac0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11bf662...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <src.middleware.state_middleware.StateMiddleware object at 0x11b8e0440>
          └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x11b8e0440>, header_name='X-Request-I...
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
         │            │            └ <function collapse_excgroups at 0x1076d2a20>
         │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
         └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [ResponseValidationError()])
    │    │   └ <method 'throw' of 'generator' objects>
    │    └ <generator object collapse_excgroups at 0x11c200fb0>
    └ <contextlib._GeneratorContextManager object at 0x11c1d9240>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    raise exc
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x11c1e2480>
                     │    │             └ <starlette.middleware.base._CachedRequest object at 0x11bf65590>
                     │    └ <bound method StateMiddleware.dispatch of <src.middleware.state_middleware.StateMiddleware object at 0x11b8e0440>>
                     └ <src.middleware.state_middleware.StateMiddleware object at 0x11b8e0440>

  File "/Users/kathayatnk/Desktop/swipewise/src/middleware/state_middleware.py", line 24, in dispatch
    response = await call_next(request)
                     │         └ <starlette.middleware.base._CachedRequest object at 0x11bf65590>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x11c1e2480>

  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 156, in call_next
    raise app_exc
          └ ResponseValidationError()
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x11c1e16c0>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11c1e0ea0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x11b8e02f0>
          └ <src.middleware.state_middleware.StateMiddleware object at 0x11b8e0440>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/authentication.py", line 48, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x11c1e16c0>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11c1e0ea0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x11b8e01a0>
          └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x11b8e02f0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x11c1e16c0>
          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11c1e0ea0>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x11c1eb950>
          │                            │    └ <fastapi.routing.APIRouter object at 0x11b7c6150>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x11b8e01a0>
          └ <function wrap_app_handling_exceptions at 0x1079c8400>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11c1e1800>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11c1e0ea0>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          └ <fastapi.routing.APIRouter object at 0x11b7c6150>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11c1e1800>
          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11c1e0ea0>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x11b7c6150>>
          └ <fastapi.routing.APIRouter object at 0x11b7c6150>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11c1e1800>
          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11c1e0ea0>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │     └ <function Route.handle at 0x1079ca200>
          └ APIRoute(path='/api/v1/auth/refresh_token', name='refresh_token', methods=['POST'])
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11c1e1800>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11c1e0ea0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <function request_response.<locals>.app at 0x11b8068e0>
          └ APIRoute(path='/api/v1/auth/refresh_token', name='refresh_token', methods=['POST'])
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11c1e1800>
          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11c1e0ea0>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x11c1e67b0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x11c1e1e40>
          └ <function wrap_app_handling_exceptions at 0x1079c8400>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11c1e1940>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x11c1e0ea0>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x11c1e1e40>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x11c1e67b0>
                     └ <function get_request_handler.<locals>.app at 0x11b806840>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    content = await serialize_response(
                    └ <function serialize_response at 0x106c2b880>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    raise ResponseValidationError(
          └ <class 'fastapi.exceptions.ResponseValidationError'>

fastapi.exceptions.ResponseValidationError: 2 validation errors:
  {'type': 'model_attributes_type', 'loc': ('response', 'data', 'access_token'), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzZXNzaW9uX3V1aWQiOiI1N2QxN2VkOS02ZjdjLTQ3NzktODg5Ny0wYjBmZThlNmEzNDUiLCJleHAiOjE3NDkyNjU2NjcsInN1YiI6OH0.3213r9I8iPobL1NB3_OiObYcmKlmLeKtfIoY9IcXY3I'}
  {'type': 'missing', 'loc': ('response', 'data', 'refresh_token'), 'msg': 'Field required', 'input': AccessToken(access_token='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzZXNzaW9uX3V1aWQiOiI1N2QxN2VkOS02ZjdjLTQ3NzktODg5Ny0wYjBmZThlNmEzNDUiLCJleHAiOjE3NDkyNjU2NjcsInN1YiI6OH0.3213r9I8iPobL1NB3_OiObYcmKlmLeKtfIoY9IcXY3I', access_token_expire_time=datetime.datetime(2025, 6, 7, 8, 52, 47, 782642, tzinfo=zoneinfo.ZoneInfo(key='Asia/Kathmandu')), session_uuid='57d17ed9-6f7c-4779-8897-0b0fe8e6a345')}



During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 5
               │     └ 10
               └ <function _main at 0x10414e520>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 5
           │    └ <function BaseProcess._bootstrap at 0x1040f7ec0>
           └ <SpawnProcess name='SpawnProcess-9' parent=79052 started>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x1040f7420>
    └ <SpawnProcess name='SpawnProcess-9' parent=79052 started>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x106160ec0>, 'target': <bound method Server.run of <uvicorn.server.Server object...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-9' parent=79052 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-9' parent=79052 started>
    │    └ <function subprocess_started at 0x104696f20>
    └ <SpawnProcess name='SpawnProcess-9' parent=79052 started>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=2, type=1, proto=0, laddr=('127.0.0.1', 8080)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x106161010>>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=4, family=2, type=1, proto=0, laddr=('127.0.0.1', 8080)>]
           │       │   │    └ <function Server.serve at 0x104695b20>
           │       │   └ <uvicorn.server.Server object at 0x106161010>
           │       └ <function run at 0x104371d00>
           └ <module 'asyncio' from '/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/__init__.py'>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x1041b4d60>
           │      └ <function Runner.run at 0x1043c02c0>
           └ <asyncio.runners.Runner object at 0x106161940>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-pac...
           │    │     └ <cyfunction Loop.run_until_complete at 0x1063e06c0>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x106161940>
> File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x11b713a10>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11bf66250>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11bf662...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x11b711e80>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x11b713a10>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11bf66250>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11bf662...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11bf66250>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11bf662...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x11b8e0830>
          └ <fastapi.applications.FastAPI object at 0x11b711e80>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 177, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x10460e8a0>
                     │    └ <function ExceptionHandler.register.<locals>.cors_custom_code_500_exception_handler at 0x11b8af420>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x11b8e0830>

  File "/Users/kathayatnk/Desktop/swipewise/src/common/exception/exception_handler.py", line 226, in cors_custom_code_500_exception_handler
    status_code = StandardResponseCode.HTTP_500.value
                  │                    └ 500
                  └ <class 'src.common.response.response_code.StandardResponseCode'>

AttributeError: 'int' object has no attribute 'value'
2025-06-06 08:55:21.890 | ERROR    |  e179918b8b1648f5a74e58cf1c94fc37  | Exception in ASGI application

  + Exception Group Traceback (most recent call last):
  |
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                │     │                      └ <anyio._backends._asyncio.TaskGroup object at 0x10cc3a350>
  |                │     └ <function create_task_group at 0x1065e85e0>
  |                └ <module 'anyio' from '/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/anyio/__init__.py'>
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  |
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |           │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x10cc2d8a0>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10cc386...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.cors.CORSMiddleware object at 0x10c4e06e0>
    |           └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x10c4e0830>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x10cc2d8a0>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10cc386...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x10c4e0440>, header_name='X-Request-I...
    |           └ <starlette.middleware.cors.CORSMiddleware object at 0x10c4e06e0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/asgi_correlation_id/middleware.py", line 90, in __call__
    |     await self.app(scope, receive, handle_outgoing_request)
    |           │    │   │      │        └ <function CorrelationIdMiddleware.__call__.<locals>.handle_outgoing_request at 0x10cc2e700>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10cc386...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <src.middleware.state_middleware.StateMiddleware object at 0x10c4e0440>
    |           └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x10c4e0440>, header_name='X-Request-I...
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |          │            │            └ <function collapse_excgroups at 0x1083d2a20>
    |          │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
    |          └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
    |   File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 162, in __exit__
    |     self.gen.throw(value)
    |     │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [ResponseValidationError()])
    |     │    │   └ <method 'throw' of 'generator' objects>
    |     │    └ <generator object collapse_excgroups at 0x10cc59630>
    |     └ <contextlib._GeneratorContextManager object at 0x10cbdb770>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                      │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x10cc2ed40>
    |                      │    │             └ <starlette.middleware.base._CachedRequest object at 0x10cc38b90>
    |                      │    └ <bound method StateMiddleware.dispatch of <src.middleware.state_middleware.StateMiddleware object at 0x10c4e0440>>
    |                      └ <src.middleware.state_middleware.StateMiddleware object at 0x10c4e0440>
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/src/middleware/state_middleware.py", line 24, in dispatch
    |     response = await call_next(request)
    |                      │         └ <starlette.middleware.base._CachedRequest object at 0x10cc38b90>
    |                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x10cc2ed40>
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 156, in call_next
    |     raise app_exc
    |           └ ResponseValidationError()
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |           │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x10cc2e5c0>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10cc2eca0>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x10c4e02f0>
    |           └ <src.middleware.state_middleware.StateMiddleware object at 0x10c4e0440>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/authentication.py", line 48, in __call__
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x10cc2e5c0>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10cc2eca0>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10c4e01a0>
    |           └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x10c4e02f0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |           │                            │    │    │     │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x10cc2e5c0>
    |           │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10cc2eca0>
    |           │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │                            │    │    └ <starlette.requests.Request object at 0x10cbc5940>
    |           │                            │    └ <fastapi.routing.APIRouter object at 0x10c3c6250>
    |           │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10c4e01a0>
    |           └ <function wrap_app_handling_exceptions at 0x1085c8400>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |           │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10cc2e7a0>
    |           │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10cc2eca0>
    |           │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           └ <fastapi.routing.APIRouter object at 0x10c3c6250>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |           │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10cc2e7a0>
    |           │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10cc2eca0>
    |           │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x10c3c6250>>
    |           └ <fastapi.routing.APIRouter object at 0x10c3c6250>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |           │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10cc2e7a0>
    |           │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10cc2eca0>
    |           │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │     └ <function Route.handle at 0x1085ca200>
    |           └ APIRoute(path='/api/v1/auth/refresh_token', name='refresh_token', methods=['POST'])
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10cc2e7a0>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10cc2eca0>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <function request_response.<locals>.app at 0x10c40a980>
    |           └ APIRoute(path='/api/v1/auth/refresh_token', name='refresh_token', methods=['POST'])
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |           │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10cc2e7a0>
    |           │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10cc2eca0>
    |           │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │                            │    └ <starlette.requests.Request object at 0x10cc3aad0>
    |           │                            └ <function request_response.<locals>.app.<locals>.app at 0x10cc2ef20>
    |           └ <function wrap_app_handling_exceptions at 0x1085c8400>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |           │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10cc2f060>
    |           │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10cc2eca0>
    |           │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           └ <function request_response.<locals>.app.<locals>.app at 0x10cc2ef20>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    |     response = await f(request)
    |                      │ └ <starlette.requests.Request object at 0x10cc3aad0>
    |                      └ <function get_request_handler.<locals>.app at 0x10c40a8e0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    |     content = await serialize_response(
    |                     └ <function serialize_response at 0x107847880>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    |     raise ResponseValidationError(
    |           └ <class 'fastapi.exceptions.ResponseValidationError'>
    |
    | fastapi.exceptions.ResponseValidationError: 2 validation errors:
    |   {'type': 'model_attributes_type', 'loc': ('response', 'data', 'access_token'), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzZXNzaW9uX3V1aWQiOiIyYWRiZmE3Ny1lNGIxLTQxNDUtOTU5OC04MGMzNTRjZjgwNDkiLCJleHAiOjE3NDkyNjU3NTEsInN1YiI6OH0.rV_MHOW4BCYLlkiPNXU9M_vsLY_VWDlAuMc12EOKzDs'}
    |   {'type': 'missing', 'loc': ('response', 'data', 'refresh_token'), 'msg': 'Field required', 'input': AccessToken(access_token='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzZXNzaW9uX3V1aWQiOiIyYWRiZmE3Ny1lNGIxLTQxNDUtOTU5OC04MGMzNTRjZjgwNDkiLCJleHAiOjE3NDkyNjU3NTEsInN1YiI6OH0.rV_MHOW4BCYLlkiPNXU9M_vsLY_VWDlAuMc12EOKzDs', access_token_expire_time=datetime.datetime(2025, 6, 7, 8, 54, 11, 180245, tzinfo=zoneinfo.ZoneInfo(key='Asia/Kathmandu')), session_uuid='2adbfa77-e4b1-4145-9598-80c354cf8049')}
    |
    +------------------------------------


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x10cc2d8a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10cc386...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x10c4e06e0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x10c4e0830>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x10cc2d8a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10cc386...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x10c4e0440>, header_name='X-Request-I...
          └ <starlette.middleware.cors.CORSMiddleware object at 0x10c4e06e0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/asgi_correlation_id/middleware.py", line 90, in __call__
    await self.app(scope, receive, handle_outgoing_request)
          │    │   │      │        └ <function CorrelationIdMiddleware.__call__.<locals>.handle_outgoing_request at 0x10cc2e700>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10cc386...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <src.middleware.state_middleware.StateMiddleware object at 0x10c4e0440>
          └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x10c4e0440>, header_name='X-Request-I...
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
         │            │            └ <function collapse_excgroups at 0x1083d2a20>
         │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
         └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [ResponseValidationError()])
    │    │   └ <method 'throw' of 'generator' objects>
    │    └ <generator object collapse_excgroups at 0x10cc59630>
    └ <contextlib._GeneratorContextManager object at 0x10cbdb770>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    raise exc
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x10cc2ed40>
                     │    │             └ <starlette.middleware.base._CachedRequest object at 0x10cc38b90>
                     │    └ <bound method StateMiddleware.dispatch of <src.middleware.state_middleware.StateMiddleware object at 0x10c4e0440>>
                     └ <src.middleware.state_middleware.StateMiddleware object at 0x10c4e0440>

  File "/Users/kathayatnk/Desktop/swipewise/src/middleware/state_middleware.py", line 24, in dispatch
    response = await call_next(request)
                     │         └ <starlette.middleware.base._CachedRequest object at 0x10cc38b90>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x10cc2ed40>

  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 156, in call_next
    raise app_exc
          └ ResponseValidationError()
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x10cc2e5c0>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10cc2eca0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x10c4e02f0>
          └ <src.middleware.state_middleware.StateMiddleware object at 0x10c4e0440>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/authentication.py", line 48, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x10cc2e5c0>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10cc2eca0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10c4e01a0>
          └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x10c4e02f0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x10cc2e5c0>
          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10cc2eca0>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x10cbc5940>
          │                            │    └ <fastapi.routing.APIRouter object at 0x10c3c6250>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10c4e01a0>
          └ <function wrap_app_handling_exceptions at 0x1085c8400>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10cc2e7a0>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10cc2eca0>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          └ <fastapi.routing.APIRouter object at 0x10c3c6250>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10cc2e7a0>
          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10cc2eca0>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x10c3c6250>>
          └ <fastapi.routing.APIRouter object at 0x10c3c6250>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10cc2e7a0>
          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10cc2eca0>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │     └ <function Route.handle at 0x1085ca200>
          └ APIRoute(path='/api/v1/auth/refresh_token', name='refresh_token', methods=['POST'])
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10cc2e7a0>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10cc2eca0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <function request_response.<locals>.app at 0x10c40a980>
          └ APIRoute(path='/api/v1/auth/refresh_token', name='refresh_token', methods=['POST'])
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10cc2e7a0>
          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10cc2eca0>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x10cc3aad0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x10cc2ef20>
          └ <function wrap_app_handling_exceptions at 0x1085c8400>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10cc2f060>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10cc2eca0>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x10cc2ef20>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x10cc3aad0>
                     └ <function get_request_handler.<locals>.app at 0x10c40a8e0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    content = await serialize_response(
                    └ <function serialize_response at 0x107847880>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    raise ResponseValidationError(
          └ <class 'fastapi.exceptions.ResponseValidationError'>

fastapi.exceptions.ResponseValidationError: 2 validation errors:
  {'type': 'model_attributes_type', 'loc': ('response', 'data', 'access_token'), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzZXNzaW9uX3V1aWQiOiIyYWRiZmE3Ny1lNGIxLTQxNDUtOTU5OC04MGMzNTRjZjgwNDkiLCJleHAiOjE3NDkyNjU3NTEsInN1YiI6OH0.rV_MHOW4BCYLlkiPNXU9M_vsLY_VWDlAuMc12EOKzDs'}
  {'type': 'missing', 'loc': ('response', 'data', 'refresh_token'), 'msg': 'Field required', 'input': AccessToken(access_token='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzZXNzaW9uX3V1aWQiOiIyYWRiZmE3Ny1lNGIxLTQxNDUtOTU5OC04MGMzNTRjZjgwNDkiLCJleHAiOjE3NDkyNjU3NTEsInN1YiI6OH0.rV_MHOW4BCYLlkiPNXU9M_vsLY_VWDlAuMc12EOKzDs', access_token_expire_time=datetime.datetime(2025, 6, 7, 8, 54, 11, 180245, tzinfo=zoneinfo.ZoneInfo(key='Asia/Kathmandu')), session_uuid='2adbfa77-e4b1-4145-9598-80c354cf8049')}



During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 5
               │     └ 10
               └ <function _main at 0x10564e520>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 5
           │    └ <function BaseProcess._bootstrap at 0x1055f7ec0>
           └ <SpawnProcess name='SpawnProcess-10' parent=79052 started>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x1055f7420>
    └ <SpawnProcess name='SpawnProcess-10' parent=79052 started>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x106660ec0>, 'target': <bound method Server.run of <uvicorn.server.Server object...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-10' parent=79052 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-10' parent=79052 started>
    │    └ <function subprocess_started at 0x106496f20>
    └ <SpawnProcess name='SpawnProcess-10' parent=79052 started>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket [closed] fd=-1, family=2, type=1, proto=0>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x106661010>>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket [closed] fd=-1, family=2, type=1, proto=0>]
           │       │   │    └ <function Server.serve at 0x106495b20>
           │       │   └ <uvicorn.server.Server object at 0x106661010>
           │       └ <function run at 0x106171d00>
           └ <module 'asyncio' from '/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/__init__.py'>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x1065392a0>
           │      └ <function Runner.run at 0x1061c02c0>
           └ <asyncio.runners.Runner object at 0x106661940>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-pac...
           │    │     └ <cyfunction Loop.run_until_complete at 0x1067186c0>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x106661940>
> File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x10c30ba10>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10cc38690>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10cc386...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x10c309e80>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x10c30ba10>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10cc38690>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10cc386...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10cc38690>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10cc386...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x10c4e0830>
          └ <fastapi.applications.FastAPI object at 0x10c309e80>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 177, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x105412710>
                     │    └ <function ExceptionHandler.register.<locals>.cors_custom_code_500_exception_handler at 0x10c4ab4c0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x10c4e0830>

  File "/Users/kathayatnk/Desktop/swipewise/src/common/exception/exception_handler.py", line 226, in cors_custom_code_500_exception_handler
    status_code = StandardResponseCode.HTTP_500.value
                  │                    └ 500
                  └ <class 'src.common.response.response_code.StandardResponseCode'>

AttributeError: 'int' object has no attribute 'value'
2025-06-06 08:55:46.776 | ERROR    |  f1a9a88c9d524269844a491435819cf4  | Exception in ASGI application

  + Exception Group Traceback (most recent call last):
  |
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                │     │                      └ <anyio._backends._asyncio.TaskGroup object at 0x107220690>
  |                │     └ <function create_task_group at 0x102ad0720>
  |                └ <module 'anyio' from '/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/anyio/__init__.py'>
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  |
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |           │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x107148680>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1072204...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.cors.CORSMiddleware object at 0x106d686e0>
    |           └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x106d68830>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x107148680>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1072204...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x106d68440>, header_name='X-Request-I...
    |           └ <starlette.middleware.cors.CORSMiddleware object at 0x106d686e0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/asgi_correlation_id/middleware.py", line 90, in __call__
    |     await self.app(scope, receive, handle_outgoing_request)
    |           │    │   │      │        └ <function CorrelationIdMiddleware.__call__.<locals>.handle_outgoing_request at 0x1071a72e0>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1072204...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <src.middleware.state_middleware.StateMiddleware object at 0x106d68440>
    |           └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x106d68440>, header_name='X-Request-I...
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |          │            │            └ <function collapse_excgroups at 0x103e12b60>
    |          │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
    |          └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
    |   File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 162, in __exit__
    |     self.gen.throw(value)
    |     │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [ResponseValidationError()])
    |     │    │   └ <method 'throw' of 'generator' objects>
    |     │    └ <generator object collapse_excgroups at 0x106cca5a0>
    |     └ <contextlib._GeneratorContextManager object at 0x10716f700>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                      │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x107209ee0>
    |                      │    │             └ <starlette.middleware.base._CachedRequest object at 0x107220050>
    |                      │    └ <bound method StateMiddleware.dispatch of <src.middleware.state_middleware.StateMiddleware object at 0x106d68440>>
    |                      └ <src.middleware.state_middleware.StateMiddleware object at 0x106d68440>
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/src/middleware/state_middleware.py", line 24, in dispatch
    |     response = await call_next(request)
    |                      │         └ <starlette.middleware.base._CachedRequest object at 0x107220050>
    |                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x107209ee0>
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 156, in call_next
    |     raise app_exc
    |           └ ResponseValidationError()
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |           │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x107209f80>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10720a020>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x106d682f0>
    |           └ <src.middleware.state_middleware.StateMiddleware object at 0x106d68440>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/authentication.py", line 48, in __call__
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x107209f80>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10720a020>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x106d681a0>
    |           └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x106d682f0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |           │                            │    │    │     │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x107209f80>
    |           │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10720a020>
    |           │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │                            │    │    └ <starlette.requests.Request object at 0x107151940>
    |           │                            │    └ <fastapi.routing.APIRouter object at 0x106c4e450>
    |           │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x106d681a0>
    |           └ <function wrap_app_handling_exceptions at 0x103f00540>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |           │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10720a340>
    |           │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10720a020>
    |           │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           └ <fastapi.routing.APIRouter object at 0x106c4e450>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |           │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10720a340>
    |           │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10720a020>
    |           │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x106c4e450>>
    |           └ <fastapi.routing.APIRouter object at 0x106c4e450>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |           │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10720a340>
    |           │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10720a020>
    |           │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │     └ <function Route.handle at 0x103f02340>
    |           └ APIRoute(path='/api/v1/auth/refresh_token', name='refresh_token', methods=['POST'])
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10720a340>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10720a020>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <function request_response.<locals>.app at 0x106c8aac0>
    |           └ APIRoute(path='/api/v1/auth/refresh_token', name='refresh_token', methods=['POST'])
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |           │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10720a340>
    |           │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10720a020>
    |           │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │                            │    └ <starlette.requests.Request object at 0x107221a90>
    |           │                            └ <function request_response.<locals>.app.<locals>.app at 0x10720a520>
    |           └ <function wrap_app_handling_exceptions at 0x103f00540>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |           │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10720a660>
    |           │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10720a020>
    |           │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           └ <function request_response.<locals>.app.<locals>.app at 0x10720a520>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    |     response = await f(request)
    |                      │ └ <starlette.requests.Request object at 0x107221a90>
    |                      └ <function get_request_handler.<locals>.app at 0x106c8aa20>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    |     content = await serialize_response(
    |                     └ <function serialize_response at 0x1035079c0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    |     raise ResponseValidationError(
    |           └ <class 'fastapi.exceptions.ResponseValidationError'>
    |
    | fastapi.exceptions.ResponseValidationError: 2 validation errors:
    |   {'type': 'model_attributes_type', 'loc': ('response', 'data', 'access_token'), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzZXNzaW9uX3V1aWQiOiIwZDA5ZDJhNC1iMDZmLTQ5Y2ItYmZlOC1kM2Q2NmU4MTYyYzIiLCJleHAiOjE3NDkyNjU4MzIsInN1YiI6OH0.eOJEyobjyzpCjj32QViBpzJ0kGSe0-kPpKj3J8ZJ0G8'}
    |   {'type': 'missing', 'loc': ('response', 'data', 'refresh_token'), 'msg': 'Field required', 'input': AccessToken(access_token='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzZXNzaW9uX3V1aWQiOiIwZDA5ZDJhNC1iMDZmLTQ5Y2ItYmZlOC1kM2Q2NmU4MTYyYzIiLCJleHAiOjE3NDkyNjU4MzIsInN1YiI6OH0.eOJEyobjyzpCjj32QViBpzJ0kGSe0-kPpKj3J8ZJ0G8', access_token_expire_time=datetime.datetime(2025, 6, 7, 8, 55, 32, 928250, tzinfo=zoneinfo.ZoneInfo(key='Asia/Kathmandu')), session_uuid='0d09d2a4-b06f-49cb-bfe8-d3d66e8162c2')}
    |
    +------------------------------------


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x107148680>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1072204...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x106d686e0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x106d68830>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x107148680>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1072204...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x106d68440>, header_name='X-Request-I...
          └ <starlette.middleware.cors.CORSMiddleware object at 0x106d686e0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/asgi_correlation_id/middleware.py", line 90, in __call__
    await self.app(scope, receive, handle_outgoing_request)
          │    │   │      │        └ <function CorrelationIdMiddleware.__call__.<locals>.handle_outgoing_request at 0x1071a72e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1072204...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <src.middleware.state_middleware.StateMiddleware object at 0x106d68440>
          └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x106d68440>, header_name='X-Request-I...
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
         │            │            └ <function collapse_excgroups at 0x103e12b60>
         │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
         └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [ResponseValidationError()])
    │    │   └ <method 'throw' of 'generator' objects>
    │    └ <generator object collapse_excgroups at 0x106cca5a0>
    └ <contextlib._GeneratorContextManager object at 0x10716f700>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    raise exc
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x107209ee0>
                     │    │             └ <starlette.middleware.base._CachedRequest object at 0x107220050>
                     │    └ <bound method StateMiddleware.dispatch of <src.middleware.state_middleware.StateMiddleware object at 0x106d68440>>
                     └ <src.middleware.state_middleware.StateMiddleware object at 0x106d68440>

  File "/Users/kathayatnk/Desktop/swipewise/src/middleware/state_middleware.py", line 24, in dispatch
    response = await call_next(request)
                     │         └ <starlette.middleware.base._CachedRequest object at 0x107220050>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x107209ee0>

  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 156, in call_next
    raise app_exc
          └ ResponseValidationError()
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x107209f80>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10720a020>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x106d682f0>
          └ <src.middleware.state_middleware.StateMiddleware object at 0x106d68440>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/authentication.py", line 48, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x107209f80>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10720a020>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x106d681a0>
          └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x106d682f0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x107209f80>
          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10720a020>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x107151940>
          │                            │    └ <fastapi.routing.APIRouter object at 0x106c4e450>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x106d681a0>
          └ <function wrap_app_handling_exceptions at 0x103f00540>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10720a340>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10720a020>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          └ <fastapi.routing.APIRouter object at 0x106c4e450>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10720a340>
          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10720a020>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x106c4e450>>
          └ <fastapi.routing.APIRouter object at 0x106c4e450>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10720a340>
          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10720a020>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │     └ <function Route.handle at 0x103f02340>
          └ APIRoute(path='/api/v1/auth/refresh_token', name='refresh_token', methods=['POST'])
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10720a340>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10720a020>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <function request_response.<locals>.app at 0x106c8aac0>
          └ APIRoute(path='/api/v1/auth/refresh_token', name='refresh_token', methods=['POST'])
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10720a340>
          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10720a020>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x107221a90>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x10720a520>
          └ <function wrap_app_handling_exceptions at 0x103f00540>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10720a660>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10720a020>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x10720a520>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x107221a90>
                     └ <function get_request_handler.<locals>.app at 0x106c8aa20>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    content = await serialize_response(
                    └ <function serialize_response at 0x1035079c0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    raise ResponseValidationError(
          └ <class 'fastapi.exceptions.ResponseValidationError'>

fastapi.exceptions.ResponseValidationError: 2 validation errors:
  {'type': 'model_attributes_type', 'loc': ('response', 'data', 'access_token'), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzZXNzaW9uX3V1aWQiOiIwZDA5ZDJhNC1iMDZmLTQ5Y2ItYmZlOC1kM2Q2NmU4MTYyYzIiLCJleHAiOjE3NDkyNjU4MzIsInN1YiI6OH0.eOJEyobjyzpCjj32QViBpzJ0kGSe0-kPpKj3J8ZJ0G8'}
  {'type': 'missing', 'loc': ('response', 'data', 'refresh_token'), 'msg': 'Field required', 'input': AccessToken(access_token='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzZXNzaW9uX3V1aWQiOiIwZDA5ZDJhNC1iMDZmLTQ5Y2ItYmZlOC1kM2Q2NmU4MTYyYzIiLCJleHAiOjE3NDkyNjU4MzIsInN1YiI6OH0.eOJEyobjyzpCjj32QViBpzJ0kGSe0-kPpKj3J8ZJ0G8', access_token_expire_time=datetime.datetime(2025, 6, 7, 8, 55, 32, 928250, tzinfo=zoneinfo.ZoneInfo(key='Asia/Kathmandu')), session_uuid='0d09d2a4-b06f-49cb-bfe8-d3d66e8162c2')}



During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 5
               │     └ 12
               └ <function _main at 0x1025d2660>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 5
           │    └ <function BaseProcess._bootstrap at 0x1025b8040>
           └ <SpawnProcess name='SpawnProcess-11' parent=79052 started>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x10257b560>
    └ <SpawnProcess name='SpawnProcess-11' parent=79052 started>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x102b44ec0>, 'target': <bound method Server.run of <uvicorn.server.Server object...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-11' parent=79052 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-11' parent=79052 started>
    │    └ <function subprocess_started at 0x102943060>
    └ <SpawnProcess name='SpawnProcess-11' parent=79052 started>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=2, type=1, proto=0, laddr=('127.0.0.1', 8080)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x102b45010>>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=4, family=2, type=1, proto=0, laddr=('127.0.0.1', 8080)>]
           │       │   │    └ <function Server.serve at 0x102941c60>
           │       │   └ <uvicorn.server.Server object at 0x102b45010>
           │       └ <function run at 0x102711e40>
           └ <module 'asyncio' from '/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/__init__.py'>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x102ac2f80>
           │      └ <function Runner.run at 0x102758400>
           └ <asyncio.runners.Runner object at 0x102b45940>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-pac...
           │    │     └ <cyfunction Loop.run_until_complete at 0x102dc46c0>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x102b45940>
> File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x106b93a10>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x107220410>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1072204...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x106b91e80>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x106b93a10>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x107220410>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1072204...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x107220410>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1072204...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x106d68830>
          └ <fastapi.applications.FastAPI object at 0x106b91e80>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 177, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x1072234d0>
                     │    └ <function ExceptionHandler.register.<locals>.cors_custom_code_500_exception_handler at 0x106d33600>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x106d68830>

  File "/Users/kathayatnk/Desktop/swipewise/src/common/exception/exception_handler.py", line 226, in cors_custom_code_500_exception_handler
    status_code = StandardResponseCode.HTTP_500.value
                  │                    └ 500
                  └ <class 'src.common.response.response_code.StandardResponseCode'>

AttributeError: 'int' object has no attribute 'value'
2025-06-06 08:56:42.835 | ERROR    |  d61839a172ca43c0a9de3d33a3759308  | Exception in ASGI application

  + Exception Group Traceback (most recent call last):
  |
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                │     │                      └ <anyio._backends._asyncio.TaskGroup object at 0x1073a4fc0>
  |                │     └ <function create_task_group at 0x102ad0720>
  |                └ <module 'anyio' from '/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/anyio/__init__.py'>
  |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  |
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |           │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x107578040>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1073a53...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.cors.CORSMiddleware object at 0x106d686e0>
    |           └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x106d68830>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x107578040>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1073a53...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x106d68440>, header_name='X-Request-I...
    |           └ <starlette.middleware.cors.CORSMiddleware object at 0x106d686e0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/asgi_correlation_id/middleware.py", line 90, in __call__
    |     await self.app(scope, receive, handle_outgoing_request)
    |           │    │   │      │        └ <function CorrelationIdMiddleware.__call__.<locals>.handle_outgoing_request at 0x107578220>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1073a53...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <src.middleware.state_middleware.StateMiddleware object at 0x106d68440>
    |           └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x106d68440>, header_name='X-Request-I...
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |          │            │            └ <function collapse_excgroups at 0x103e12b60>
    |          │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
    |          └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
    |   File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 162, in __exit__
    |     self.gen.throw(value)
    |     │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [ResponseValidationError()])
    |     │    │   └ <method 'throw' of 'generator' objects>
    |     │    └ <generator object collapse_excgroups at 0x1074dab50>
    |     └ <contextlib._GeneratorContextManager object at 0x107468b40>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                      │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x107578400>
    |                      │    │             └ <starlette.middleware.base._CachedRequest object at 0x1073a5940>
    |                      │    └ <bound method StateMiddleware.dispatch of <src.middleware.state_middleware.StateMiddleware object at 0x106d68440>>
    |                      └ <src.middleware.state_middleware.StateMiddleware object at 0x106d68440>
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/src/middleware/state_middleware.py", line 24, in dispatch
    |     response = await call_next(request)
    |                      │         └ <starlette.middleware.base._CachedRequest object at 0x1073a5940>
    |                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x107578400>
    |
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 156, in call_next
    |     raise app_exc
    |           └ ResponseValidationError()
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |           │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x107578680>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1075785e0>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x106d682f0>
    |           └ <src.middleware.state_middleware.StateMiddleware object at 0x106d68440>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/authentication.py", line 48, in __call__
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x107578680>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1075785e0>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x106d681a0>
    |           └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x106d682f0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |           │                            │    │    │     │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x107578680>
    |           │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1075785e0>
    |           │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │                            │    │    └ <starlette.requests.Request object at 0x1073a5ba0>
    |           │                            │    └ <fastapi.routing.APIRouter object at 0x106c4e450>
    |           │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x106d681a0>
    |           └ <function wrap_app_handling_exceptions at 0x103f00540>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |           │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x107578c20>
    |           │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1075785e0>
    |           │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           └ <fastapi.routing.APIRouter object at 0x106c4e450>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |           │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x107578c20>
    |           │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1075785e0>
    |           │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x106c4e450>>
    |           └ <fastapi.routing.APIRouter object at 0x106c4e450>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |           │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x107578c20>
    |           │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1075785e0>
    |           │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │     └ <function Route.handle at 0x103f02340>
    |           └ APIRoute(path='/api/v1/auth/refresh_token', name='refresh_token', methods=['POST'])
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x107578c20>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1075785e0>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │    └ <function request_response.<locals>.app at 0x106c8aac0>
    |           └ APIRoute(path='/api/v1/auth/refresh_token', name='refresh_token', methods=['POST'])
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |           │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x107578c20>
    |           │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1075785e0>
    |           │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           │                            │    └ <starlette.requests.Request object at 0x1073a6060>
    |           │                            └ <function request_response.<locals>.app.<locals>.app at 0x1075789a0>
    |           └ <function wrap_app_handling_exceptions at 0x103f00540>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |           │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x107578cc0>
    |           │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1075785e0>
    |           │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
    |           └ <function request_response.<locals>.app.<locals>.app at 0x1075789a0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    |     response = await f(request)
    |                      │ └ <starlette.requests.Request object at 0x1073a6060>
    |                      └ <function get_request_handler.<locals>.app at 0x106c8aa20>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    |     content = await serialize_response(
    |                     └ <function serialize_response at 0x1035079c0>
    |   File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    |     raise ResponseValidationError(
    |           └ <class 'fastapi.exceptions.ResponseValidationError'>
    |
    | fastapi.exceptions.ResponseValidationError: 2 validation errors:
    |   {'type': 'model_attributes_type', 'loc': ('response', 'data', 'access_token'), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzZXNzaW9uX3V1aWQiOiJiZTg1NWY4Ny0yOTJlLTRmYjctYWRhMC1jMTIxZTk2NDAwOGQiLCJleHAiOjE3NDkyNjU4NjQsInN1YiI6OH0.FeQzbD-T_gx07NsHOWoP80nFGPFsnvJGOuVhaQz50rs'}
    |   {'type': 'missing', 'loc': ('response', 'data', 'refresh_token'), 'msg': 'Field required', 'input': AccessToken(access_token='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzZXNzaW9uX3V1aWQiOiJiZTg1NWY4Ny0yOTJlLTRmYjctYWRhMC1jMTIxZTk2NDAwOGQiLCJleHAiOjE3NDkyNjU4NjQsInN1YiI6OH0.FeQzbD-T_gx07NsHOWoP80nFGPFsnvJGOuVhaQz50rs', access_token_expire_time=datetime.datetime(2025, 6, 7, 8, 56, 4, 702790, tzinfo=zoneinfo.ZoneInfo(key='Asia/Kathmandu')), session_uuid='be855f87-292e-4fb7-ada0-c121e964008d')}
    |
    +------------------------------------


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x107578040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1073a53...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x106d686e0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x106d68830>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x107578040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1073a53...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x106d68440>, header_name='X-Request-I...
          └ <starlette.middleware.cors.CORSMiddleware object at 0x106d686e0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/asgi_correlation_id/middleware.py", line 90, in __call__
    await self.app(scope, receive, handle_outgoing_request)
          │    │   │      │        └ <function CorrelationIdMiddleware.__call__.<locals>.handle_outgoing_request at 0x107578220>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1073a53...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <src.middleware.state_middleware.StateMiddleware object at 0x106d68440>
          └ CorrelationIdMiddleware(app=<src.middleware.state_middleware.StateMiddleware object at 0x106d68440>, header_name='X-Request-I...
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
         │            │            └ <function collapse_excgroups at 0x103e12b60>
         │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
         └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [ResponseValidationError()])
    │    │   └ <method 'throw' of 'generator' objects>
    │    └ <generator object collapse_excgroups at 0x1074dab50>
    └ <contextlib._GeneratorContextManager object at 0x107468b40>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    raise exc
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x107578400>
                     │    │             └ <starlette.middleware.base._CachedRequest object at 0x1073a5940>
                     │    └ <bound method StateMiddleware.dispatch of <src.middleware.state_middleware.StateMiddleware object at 0x106d68440>>
                     └ <src.middleware.state_middleware.StateMiddleware object at 0x106d68440>

  File "/Users/kathayatnk/Desktop/swipewise/src/middleware/state_middleware.py", line 24, in dispatch
    response = await call_next(request)
                     │         └ <starlette.middleware.base._CachedRequest object at 0x1073a5940>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x107578400>

  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 156, in call_next
    raise app_exc
          └ ResponseValidationError()
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x107578680>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1075785e0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x106d682f0>
          └ <src.middleware.state_middleware.StateMiddleware object at 0x106d68440>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/authentication.py", line 48, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x107578680>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1075785e0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x106d681a0>
          └ <starlette.middleware.authentication.AuthenticationMiddleware object at 0x106d682f0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x107578680>
          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1075785e0>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x1073a5ba0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x106c4e450>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x106d681a0>
          └ <function wrap_app_handling_exceptions at 0x103f00540>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x107578c20>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1075785e0>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          └ <fastapi.routing.APIRouter object at 0x106c4e450>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x107578c20>
          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1075785e0>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x106c4e450>>
          └ <fastapi.routing.APIRouter object at 0x106c4e450>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x107578c20>
          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1075785e0>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │     └ <function Route.handle at 0x103f02340>
          └ APIRoute(path='/api/v1/auth/refresh_token', name='refresh_token', methods=['POST'])
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x107578c20>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1075785e0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <function request_response.<locals>.app at 0x106c8aac0>
          └ APIRoute(path='/api/v1/auth/refresh_token', name='refresh_token', methods=['POST'])
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x107578c20>
          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1075785e0>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x1073a6060>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x1075789a0>
          └ <function wrap_app_handling_exceptions at 0x103f00540>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x107578cc0>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1075785e0>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x1075789a0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x1073a6060>
                     └ <function get_request_handler.<locals>.app at 0x106c8aa20>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    content = await serialize_response(
                    └ <function serialize_response at 0x1035079c0>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    raise ResponseValidationError(
          └ <class 'fastapi.exceptions.ResponseValidationError'>

fastapi.exceptions.ResponseValidationError: 2 validation errors:
  {'type': 'model_attributes_type', 'loc': ('response', 'data', 'access_token'), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzZXNzaW9uX3V1aWQiOiJiZTg1NWY4Ny0yOTJlLTRmYjctYWRhMC1jMTIxZTk2NDAwOGQiLCJleHAiOjE3NDkyNjU4NjQsInN1YiI6OH0.FeQzbD-T_gx07NsHOWoP80nFGPFsnvJGOuVhaQz50rs'}
  {'type': 'missing', 'loc': ('response', 'data', 'refresh_token'), 'msg': 'Field required', 'input': AccessToken(access_token='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzZXNzaW9uX3V1aWQiOiJiZTg1NWY4Ny0yOTJlLTRmYjctYWRhMC1jMTIxZTk2NDAwOGQiLCJleHAiOjE3NDkyNjU4NjQsInN1YiI6OH0.FeQzbD-T_gx07NsHOWoP80nFGPFsnvJGOuVhaQz50rs', access_token_expire_time=datetime.datetime(2025, 6, 7, 8, 56, 4, 702790, tzinfo=zoneinfo.ZoneInfo(key='Asia/Kathmandu')), session_uuid='be855f87-292e-4fb7-ada0-c121e964008d')}



During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 5
               │     └ 12
               └ <function _main at 0x1025d2660>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 5
           │    └ <function BaseProcess._bootstrap at 0x1025b8040>
           └ <SpawnProcess name='SpawnProcess-11' parent=79052 started>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x10257b560>
    └ <SpawnProcess name='SpawnProcess-11' parent=79052 started>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x102b44ec0>, 'target': <bound method Server.run of <uvicorn.server.Server object...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-11' parent=79052 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-11' parent=79052 started>
    │    └ <function subprocess_started at 0x102943060>
    └ <SpawnProcess name='SpawnProcess-11' parent=79052 started>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=2, type=1, proto=0, laddr=('127.0.0.1', 8080)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x102b45010>>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=4, family=2, type=1, proto=0, laddr=('127.0.0.1', 8080)>]
           │       │   │    └ <function Server.serve at 0x102941c60>
           │       │   └ <uvicorn.server.Server object at 0x102b45010>
           │       └ <function run at 0x102711e40>
           └ <module 'asyncio' from '/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/__init__.py'>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x102ac2f80>
           │      └ <function Runner.run at 0x102758400>
           └ <asyncio.runners.Runner object at 0x102b45940>
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-pac...
           │    │     └ <cyfunction Loop.run_until_complete at 0x102dc46c0>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x102b45940>
> File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x106b93a10>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1073a5350>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1073a53...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x106b91e80>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x106b93a10>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1073a5350>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1073a53...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1073a5350>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1073a53...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8080), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x106d68830>
          └ <fastapi.applications.FastAPI object at 0x106b91e80>
  File "/Users/kathayatnk/Desktop/swipewise/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 177, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x107343e30>
                     │    └ <function ExceptionHandler.register.<locals>.cors_custom_code_500_exception_handler at 0x106d33600>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x106d68830>

  File "/Users/kathayatnk/Desktop/swipewise/src/common/exception/exception_handler.py", line 226, in cors_custom_code_500_exception_handler
    status_code = StandardResponseCode.HTTP_500.value
                  │                    └ 500
                  └ <class 'src.common.response.response_code.StandardResponseCode'>

AttributeError: 'int' object has no attribute 'value'
